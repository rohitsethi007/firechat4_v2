<ion-header>
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>{{title}}</ion-title>
  </ion-toolbar> 
</ion-header>

<ion-content class="contact-card-content"> 
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
<div>
    <ion-card>
      <ion-row class="user-preferences-wrapper">
        <ion-card-header class="header">
          <ion-card-subtitle class="addedBy">
           <img class="addedByImg" src="{{post.avatar}}" onError="this.src='./assets/images/default-dp.png'" /> 
           <p><span class="addedByTitle">{{post.addedByUser.addedByUsername}}</span>, <span class="addedByDate">posted {{post.date | DateFormat}}</span><br/>
           <span class="addedByTitle">in <b>Guitar Posts</b></span></p>
           <img *ngIf="post.showNewIcon" class="newIcon" src="./assets/icon/new.svg" /> 
         </ion-card-subtitle>
        </ion-card-header>
      <ion-card-content class="message">
        {{post.data.message}}<br/>
          <ion-row class="tags-wrapper">
            <div class="tags" *ngFor="let tag of post.postTags">
              <span *ngIf="tag.isChecked" class="item-rating" [attr.ratingBase]="1">#{{tag.val}}</span>
              <span *ngIf="!tag.isChecked" class="item-rating" [attr.ratingBase]="0">#{{tag.val}}</span>
            </div>
          </ion-row>
      </ion-card-content>
    </ion-row>
    
  <ion-row class="user-preferences-wrapper message">
    <ion-col>
      <ion-buttons>
        <ion-button (click)="submitReactionSmile()">
       <div *ngIf="post.showSmiley"><ion-icon size="small" class="icon" src="./assets/icon/smile-active.svg" ></ion-icon> <span class="text">Thanks</span></div> 
       <div *ngIf="!post.showSmiley"><ion-icon size="small" class="icon"  src="./assets/icon/smile.svg" ></ion-icon> <span class="text">Thanks</span></div> 
      </ion-button>
      </ion-buttons> 
    </ion-col>
    <ion-col>
      <ion-buttons>
        <ion-button (click)="submitReactionHug()">
       <div *ngIf="post.showHug"><ion-icon size="small" class="icon" src="./assets/icon/hug-active.svg" ></ion-icon> <span class="text">Hug</span></div> 
       <div *ngIf="!post.showHug"><ion-icon size="small" class="icon"  src="./assets/icon/hug.svg" ></ion-icon> <span class="text">Hug</span></div> 
      </ion-button>
      </ion-buttons> 
    </ion-col>
    <ion-col>
      <ion-buttons>
        <ion-button (click)="showReactionsList()">
      <div><ion-icon size="small" src="./assets/icon/smile-active.svg" class="icon"></ion-icon><ion-icon size="small" src="./assets/icon/hug-active.svg" class="icon"></ion-icon> <span class="text">{{post.totalReactionCount}}</span></div>
    </ion-button>
  </ion-buttons> 
    </ion-col>
    <ion-col>
      <ion-buttons>
        <ion-button>
      <div><ion-icon size="small" src="./assets/icon/chat.svg" class="icon"></ion-icon> <span class="text">{{post.totalReviewCount}}</span></div>
    </ion-button>
  </ion-buttons> 
  </ion-col>
  </ion-row>

  <!-- <hr class="details-divider">
  
    <h3 class="detail-title">Selected Tags</h3> -->
  
  <hr class="details-divider">
  <div class="user-preferences-wrapper">
    <div>
      <div class="addedBy" *ngFor="let r of postReviews">
        <ion-row>
          <ion-col size="2" class="review">
              <img class="addedByImg" src="{{r.addedByUser.addedByImg}}" onError="this.src='./assets/images/default-dp.png'" />
          </ion-col>
          <ion-col size="10">
            <p><span class="addedByTitle"><b>{{r.addedByUser.addedByUsername}}</b></span>, <span class="addedByDate">posted {{r.dateCreated.toDate() | DateFormat}}</span><br/>
              {{r.review}}</p>
          </ion-col>
      </ion-row>
     </div>
    </div>
  </div>

 </ion-card>
</div>
</ion-content>
<ion-footer>
  <ion-toolbar>
    <ion-item class="bottom_bar">
      <ion-button fill="clear" (click)="attach()">
        <ion-icon size="large" name="camera-outline"></ion-icon>
      </ion-button>
      <ion-buttons slot="end" style="margin-left:4px;">
        <ion-input placeholder="Type your message" [(ngModel)]="message"></ion-input>
        <ion-button color="primary" fill="clear" (click)="submitReply()" [disabled]="!message">
          send
        </ion-button>
      </ion-buttons>
    </ion-item>
  </ion-toolbar>
</ion-footer>
