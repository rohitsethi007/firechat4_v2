<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>{{title}}</ion-title>
    <ion-buttons slot="end"> 
		<ion-button *ngIf="loggedInUserIsMember == true" (click)="newPost()" ><ion-icon name="add-circle-outline"></ion-icon></ion-button>
	</ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="contact-card-content"> 
<div>


    <ion-card>
      <ion-row class="user-preferences-wrapper">
      <ion-card-header class="subtitle">
        <img src="{{post.avatar}}" onError="this.src='./assets/images/default-dp.png'" /> {{post.senderName}}, posted {{post.date | DateFormat}}
        <ion-card-title class="title">{{post.title}}</ion-card-title>
      </ion-card-header>
    
      <ion-card-content class="message">
        {{post.message}}
        
      </ion-card-content>

    </ion-row>
    
  <ion-row class="user-preferences-wrapper message">
    <ion-col>
      <ion-buttons>
        <ion-button (click)="submitReactionSmile()">
       <div *ngIf="post.showSmiley"><ion-icon size="small" class="icon" src="./assets/icon/smile-active.svg" ></ion-icon> <span class="text">Thanks</span></div> 
       <div *ngIf="!post.showSmiley"><ion-icon size="small" class="icon"  src="./assets/icon/smile.svg" ></ion-icon> <span class="text">Thanks</span></div> 
      </ion-button>
      </ion-buttons> 
    </ion-col>
    <ion-col>
      <ion-buttons>
        <ion-button (click)="submitReactionHug()">
       <div *ngIf="post.showHug"><ion-icon size="small" class="icon" src="./assets/icon/hug-active.svg" ></ion-icon> <span class="text">Hug</span></div> 
       <div *ngIf="!post.showHug"><ion-icon size="small" class="icon"  src="./assets/icon/hug.svg" ></ion-icon> <span class="text">Hug</span></div> 
      </ion-button>
      </ion-buttons> 
    </ion-col>
    <ion-col>
      <ion-buttons>
        <ion-button (click)="showReactionsList()">
      <div><ion-icon size="small" src="./assets/icon/smile-active.svg" class="icon"></ion-icon><ion-icon size="small" src="./assets/icon/hug-active.svg" class="icon"></ion-icon> <span class="text">{{post.totalReactionCount}}</span></div>
    </ion-button>
  </ion-buttons> 
    </ion-col>
    <ion-col>
      <ion-buttons>
        <ion-button>
      <div><ion-icon size="small" src="./assets/icon/chat.svg" class="icon"></ion-icon> <span class="text">{{post.totalReviewCount}}</span></div>
    </ion-button>
  </ion-buttons> 
  </ion-col>
  </ion-row>

  <hr class="details-divider">
  <div class="reviews-wrapper">
    <h3 class="detail-title">Selected Tags</h3>
  <ion-row>
    <div class="tags" *ngFor="let tag of post.postTags">
      <span *ngIf="tag.isChecked" class="item-rating" [attr.ratingBase]="1">{{tag.val}}</span>
      <span *ngIf="!tag.isChecked" class="item-rating" [attr.ratingBase]="0">{{tag.val}}</span>
    </div>
  </ion-row>
  </div>

  
  <hr class="details-divider">
  <div class="reviews-wrapper">
    <h3 class="detail-title-reply">Replies</h3>
    <ion-row nowrap>
    <ion-col size="9">
        <ion-textarea class="placeholder" rows="0" placeholder="Type your message" [(ngModel)]="message">
          </ion-textarea>
    </ion-col>
    <ion-col size="3">
      <ion-buttons>
        <ion-button (click)="attach()">
          <ion-icon name="attach"></ion-icon>
        </ion-button>
        <ion-button color="primary" fill="clear" (click)="submitReply()"> <!-- [disabled]="!message">-->
          <ion-icon name="send-sharp"></ion-icon>
        </ion-button>
      </ion-buttons> 
    </ion-col>
   </ion-row>
    <div class="reviews-list">
      <div class="review-item" *ngFor="let r of postReviews">
        <ion-row>
          <ion-col size="2" class="review">
            <img src="{{r.addedByUser.addedByImg}}" onError="this.src='./assets/images/default-dp.png'" /> 
          </ion-col>
          <ion-col size="10">
            <app-text-shell class="comment-detail-author-name" [data]="r.addedByUser.addedByUsername"></app-text-shell>
            <app-text-shell [data]="r.review"></app-text-shell>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col >
          <app-text-shell class="review-date" [data]="r.dateCreated | DateFormat"></app-text-shell>
        </ion-col>

        <!-- TODO: Commenting out thumbs up/Thanks option on the comments section
          <ion-col class="review">
          <ion-buttons>
            <ion-button (click)="submitReactionSmile()">
           <div *ngIf="post.showSmiley"><ion-icon size="small" class="icon" src="./assets/icon/smile-active.svg" ></ion-icon> <span class="text">Thanks</span></div> 
           <div *ngIf="!post.showSmiley"><ion-icon size="small" class="icon"  src="./assets/icon/smile.svg" ></ion-icon> <span class="text">Thanks</span></div> 
          </ion-button>
          </ion-buttons> 
        </ion-col> -->
        </ion-row>
<!-- 
        <ion-item class="bottom_bar">
          <ion-textarea style="margin:0" rows="0" placeholder="Type your message" [(ngModel)]="message">
          </ion-textarea>
          <ion-buttons slot="end" style="margin-left:4px;">
            <ion-button fill="clear" (click)="attach()">
              <ion-icon name="attach"></ion-icon>
            </ion-button>
            <ion-button color="primary" fill="clear" (click)="send('text')" [disabled]="!message">
              send
            </ion-button>
          </ion-buttons>
        </ion-item> -->
        <!-- <ion-row class="review-user">
          <ion-col class="user-brief-wrapper">
            <h5 class="review-user-name">
              <app-text-shell [data]="review.addedByUsername"></app-text-shell>
            </h5>
            <ion-row class="details-scores user-scores">
              <ion-col class="score-item user-score">
                <p class="review-message">
                  <app-text-shell [data]="review.review" lines="5"></app-text-shell>
                  <ion-buttons>
                    <ion-button (click)="commentBox=!commentBox">reply</ion-button>
                  </ion-buttons>
                  <ion-item *ngIf="commentBox" class="input-item">
                    <ion-label position="floating">Comments</ion-label>
                    <ion-textarea rows="3"  placeholder="Enter more information here..." type="text" clearInput ></ion-textarea>
                    <ion-buttons>
                      <ion-button (click)="submitReview(review.key)">reply</ion-button>
                    </ion-buttons>
                  </ion-item>
                </p>
              </ion-col>

            </ion-row>
          </ion-col>
          <ion-col class="review-info-wrapper">
            <span class="review-date">
              <app-text-shell [data]="review.dateCreated | DateFormat"></app-text-shell>
            </span>
            <div class="review-rating" [attr.ratingBase]="review.rating">
              <app-text-shell [data]="review.rating"></app-text-shell>
            </div>
          </ion-col>
        </ion-row> -->
     </div>
    </div>
  </div>

 </ion-card>
</div>
</ion-content>
