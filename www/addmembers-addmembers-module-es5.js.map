{"version":3,"sources":["src/app/addmembers/addmembers.page.html","src/app/addmembers/addmembers.module.ts","src/app/addmembers/addmembers.page.scss","src/app/addmembers/addmembers.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primart\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Add Memebers</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"done()\\\">Done</ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <!-- All friends already in the group. -->\\r\\n  <div class=\\\"empty-list\\\" *ngIf=\\\"friends && friends.length == 0\\\">\\r\\n    <h1>\\r\\n      <ion-icon name=\\\"md-contacts\\\"></ion-icon>\\r\\n    </h1>\\r\\n    <p>Uh-oh! Sorry but your friends are already a member of this group.</p>\\r\\n  </div>\\r\\n  <!-- Add/Cancel Add friends to the group. -->\\r\\n  <ion-list lines=\\\"none\\\" *ngIf=\\\"friends && friends.length > 0\\\">\\r\\n    <ion-searchbar [(ngModel)]=\\\"searchFriend\\\" placeholder=\\\"Search for friend or username\\\" showCancelButton=\\\"true\\\"\\r\\n      cancelButtonText=\\\"Done\\\"></ion-searchbar>\\r\\n    <ion-item *ngFor=\\\"let friend of friends | friendFilter:searchFriend\\\" (click)=\\\"addOrRemove(friend)\\\">\\r\\n\\r\\n      <ion-avatar slot=\\\"start\\\">\\r\\n        <img src=\\\"{{friend.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\r\\n      </ion-avatar>\\r\\n      <ion-label>\\r\\n        <ion-text>\\r\\n          <h2>{{friend.name}}</h2>\\r\\n        </ion-text>\\r\\n        <ion-text>\\r\\n          <p>@{{friend.username}}</p>\\r\\n        </ion-text>\\r\\n      </ion-label>\\r\\n      <ion-button size=\\\"small\\\" slot=\\\"end\\\" fill=\\\"outline\\\" (click)=\\\"add(friend); $event.stopPropagation();\\\"\\r\\n        *ngIf=\\\"!isAdded(friend)\\\">Add</ion-button>\\r\\n      <ion-button size=\\\"small\\\" slot=\\\"end\\\" fill=\\\"outline\\\" (click)=\\\"remove(friend); $event.stopPropagation();\\\"\\r\\n        *ngIf=\\\"isAdded(friend)\\\">Remove</ion-button>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AddmembersPage } from './addmembers.page';\r\nimport { SharedModule } from '../services/share.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AddmembersPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [AddmembersPage]\r\n})\r\nexport class AddmembersPageModule { }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkZG1lbWJlcnMvYWRkbWVtYmVycy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { DataService } from '../services/data.service';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-addmembers',\r\n  templateUrl: './addmembers.page.html',\r\n  styleUrls: ['./addmembers.page.scss'],\r\n})\r\nexport class AddmembersPage implements OnInit {\r\n\r\n  groupId: any;\r\n  group: any;\r\n  groupMembers: any;\r\n  friends: any;\r\n  searchFriend: any;\r\n  toAdd: any;\r\n  user: any;\r\n  // AddMemberPage\r\n  // This is the page where the user can add their friends to an existing group.\r\n  // The user can only add their friends to the group.\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public dataProvider: DataService,\r\n    public loadingProvider: LoadingService,\r\n    public firestore: AngularFirestore,\r\n    public alertCtrl: AlertController,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    // Initialize\r\n    this.groupId = this.route.snapshot.params.id;\r\n\r\n    this.searchFriend = '';\r\n    this.toAdd = [];\r\n    this.loadingProvider.show();\r\n\r\n    // Get user information for system message sent to the group when a member was added.\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((user: any) => {\r\n        this.user = user.payload.data();\r\n    });\r\n\r\n    // Get group information\r\n    this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group: any) => {\r\n      this.group = group.payload.data();\r\n      this.groupMembers = null;\r\n      // Get group members\r\n      if (group.payload.data().members) {\r\n        group.payload.data().members.forEach((memberId) => {\r\n          this.dataProvider.getUser(memberId).snapshotChanges().subscribe((member) => {\r\n              this.addOrUpdateMember(member);\r\n            });\r\n        });\r\n        // Get user's friends to add\r\n        this.dataProvider.getCurrentUser().snapshotChanges().subscribe((user: any) => {\r\n          let account = user.payload.data();\r\n          if (account.friends) {\r\n            for (var i = 0; i < account.friends.length; i++) {\r\n              this.dataProvider.getUser(account.friends[i]).snapshotChanges().subscribe((friendRes: any) => {\r\n                // Only friends that are not yet a member of this group can be added.\r\n                let friend = { $key: friendRes.key, ...friendRes.payload.data() };\r\n                console.log(friend)\r\n                if (!this.isMember(friend)) {\r\n                  this.addOrUpdateFriend(friend);\r\n                }\r\n              });\r\n            }\r\n            if (!this.friends) {\r\n              this.friends = [];\r\n            }\r\n          } else {\r\n            this.friends = [];\r\n          }\r\n      });\r\n      }\r\n      console.log(this.friends);\r\n      this.loadingProvider.hide();\r\n    });\r\n  }\r\n\r\n  // Check if friend is a member of the group or not.\r\n  isMember(friend) {\r\n    if (this.groupMembers) {\r\n      for (var i = 0; i < this.groupMembers.length; i++) {\r\n        if (this.groupMembers[i].$key == friend.$key) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Check if friend is already on the list of members to be added.\r\n  isAdded(friend) {\r\n    if (this.toAdd) {\r\n      for (var i = 0; i < this.toAdd.length; i++) {\r\n        if (this.toAdd[i].$key == friend.$key) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Toggle for adding/removing friend on the list of members to be added.\r\n  addOrRemove(friend) {\r\n    if (this.isAdded(friend)) {\r\n      this.remove(friend);\r\n    } else {\r\n      this.add(friend);\r\n    }\r\n  }\r\n\r\n  // Add or update friend information for real-time sync.\r\n  addOrUpdateFriend(friend) {\r\n    if (!this.friends) {\r\n      this.friends = [friend];\r\n    } else {\r\n      var index = -1;\r\n      for (var i = 0; i < this.friends.length; i++) {\r\n        if (this.friends[i].$key == friend.$key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.friends[index] = friend;\r\n      } else {\r\n        this.friends.push(friend);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add or update member information for real-time sync.\r\n  addOrUpdateMember(member) {\r\n    if (!this.groupMembers) {\r\n      this.groupMembers = [member];\r\n    } else {\r\n      var index = -1;\r\n      for (var i = 0; i < this.groupMembers.length; i++) {\r\n        if (this.groupMembers[i].$key == member.$key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.groupMembers[index] = member;\r\n      } else {\r\n        this.groupMembers.push(member);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add friend to the list of to be added.\r\n  add(friend) {\r\n    this.toAdd.push(friend);\r\n  }\r\n\r\n  // Remove friend from the list of to be added.\r\n  remove(friend) {\r\n    this.toAdd.splice(this.toAdd.indexOf(friend), 1);\r\n  }\r\n  // Get names of the members to be added to the group.\r\n  getNames() {\r\n    var names = '';\r\n    this.toAdd.forEach((friend) => {\r\n      names += friend.name + ', ';\r\n    });\r\n    return names.substring(0, names.length - 2);\r\n  }\r\n\r\n  // Confirm adding of new members, afterwards add the members.\r\n  done() {\r\n    this.alertCtrl.create({\r\n      header: 'Add Members',\r\n      message: 'Are you sure you want to add <b>' + this.getNames() + '</b> to the group?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel'\r\n        },\r\n        {\r\n          text: 'Add',\r\n          handler: data => {\r\n            // Proceed\r\n            this.loadingProvider.show();\r\n            this.toAdd.forEach((friend) => {\r\n              // Add groupInfo to each friend added to the group.\r\n              this.firestore.doc('/accounts/' + friend.$key + '/groups/' + this.groupId).update({\r\n                messagesRead: 0\r\n              });\r\n              // Add friend as members of the group.\r\n              console.log(friend.$key);\r\n              console.log(this.group.members);\r\n              this.group.members.push(friend.$key);\r\n              // Add system message that the members are added to the group.\r\n              this.group.messages.push({\r\n                date: new Date().toString(),\r\n                sender: this.user.userId,\r\n                type: 'system',\r\n                message: this.user.name + ' has added ' + this.getNames() + ' to the group.',\r\n                icon: 'md-contacts'\r\n              });\r\n            });\r\n            // Update group data on the database.\r\n            this.dataProvider.getGroup(this.groupId).update({\r\n              members: this.group.members,\r\n              messages: this.group.messages\r\n            }).then(() => {\r\n              // Back.\r\n              this.loadingProvider.hide();\r\n            });\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"addmembers-addmembers-module-es5.js"}