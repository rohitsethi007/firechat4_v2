{"version":3,"sources":["src/app/addmembers/addmembers.page.html","src/app/addmembers/addmembers.module.ts","src/app/addmembers/addmembers.page.scss","src/app/addmembers/addmembers.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,0tDAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACUf,QAAM,MAAM,GAAW,CACrB;AACE,MAAA,IAAI,EAAE,EADR;AAEE,MAAA,SAAS,EAAE,6CAAA,CAAA,gBAAA;AAFb,KADqB,CAAvB;;AAiBA,QAAa,oBAAb;AAAA;AAAA,KAAA;;AAAa,IAAA,oBAAoB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAVhC,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,OAAO,EAAE,CACP,4CAAA,CAAA,cAAA,CADO,EAEP,2CAAA,CAAA,aAAA,CAFO,EAGP,2CAAA,CAAA,aAAA,CAHO,EAIP,mDAAA,CAAA,cAAA,CAJO,EAKP,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CALO,CADD;AAQR,MAAA,YAAY,EAAE,CAAC,6CAAA,CAAA,gBAAA,CAAD;AARN,KAAT,CAUgC,CAAA,EAApB,oBAAoB,CAApB;;;;;;;;;;;;;;;;AC3Bb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,iMAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYf,QAAa,cAAb;AAAA;AAAA;AASE;AACA;AACA;AACA,8BACU,MADV,EAEU,KAFV,EAGS,YAHT,EAIS,eAJT,EAKS,SALT,EAMS,SANT,EAMmC;AAAA;;AALzB,aAAA,MAAA,GAAA,MAAA;AACA,aAAA,KAAA,GAAA,KAAA;AACD,aAAA,YAAA,GAAA,YAAA;AACA,aAAA,eAAA,GAAA,eAAA;AACA,aAAA,SAAA,GAAA,SAAA;AACA,aAAA,SAAA,GAAA,SAAA;AACJ;;AAnBP;AAAA;AAAA,mCAqBU,CACP;AAtBH;AAAA;AAAA,0CAwBiB;AAAA;;AACb;AACA,eAAK,OAAL,GAAe,KAAK,KAAL,CAAW,QAAX,CAAoB,MAApB,CAA2B,EAA1C;AAEA,eAAK,YAAL,GAAoB,EAApB;AACA,eAAK,KAAL,GAAa,EAAb;AACA,eAAK,eAAL,CAAqB,IAArB,GANa,CAQb;;AACA,eAAK,YAAL,CAAkB,cAAlB,GAAmC,eAAnC,GAAqD,SAArD,CAA+D,UAAC,IAAD,EAAc;AACzE,YAAA,KAAI,CAAC,IAAL,GAAY,IAAI,CAAC,OAAL,CAAa,IAAb,EAAZ;AACH,WAFD,EATa,CAab;;AACA,eAAK,YAAL,CAAkB,QAAlB,CAA2B,KAAK,OAAhC,EAAyC,eAAzC,GAA2D,SAA3D,CAAqE,UAAC,KAAD,EAAe;AAClF,YAAA,KAAI,CAAC,KAAL,GAAa,KAAK,CAAC,OAAN,CAAc,IAAd,EAAb;AACA,YAAA,KAAI,CAAC,YAAL,GAAoB,IAApB,CAFkF,CAGlF;;AACA,gBAAI,KAAK,CAAC,OAAN,CAAc,IAAd,GAAqB,OAAzB,EAAkC;AAChC,cAAA,KAAK,CAAC,OAAN,CAAc,IAAd,GAAqB,OAArB,CAA6B,OAA7B,CAAqC,UAAC,QAAD,EAAa;AAChD,gBAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB,CAA0B,QAA1B,EAAoC,eAApC,GAAsD,SAAtD,CAAgE,UAAC,MAAD,EAAW;AACvE,kBAAA,KAAI,CAAC,iBAAL,CAAuB,MAAvB;AACD,iBAFH;AAGD,eAJD,EADgC,CAMhC;;AACA,cAAA,KAAI,CAAC,YAAL,CAAkB,cAAlB,GAAmC,eAAnC,GAAqD,SAArD,CAA+D,UAAC,IAAD,EAAc;AAC3E,oBAAI,OAAO,GAAG,IAAI,CAAC,OAAL,CAAa,IAAb,EAAd;;AACA,oBAAI,OAAO,CAAC,OAAZ,EAAqB;AACnB,uBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,OAAO,CAAC,OAAR,CAAgB,MAApC,EAA4C,CAAC,EAA7C,EAAiD;AAC/C,oBAAA,KAAI,CAAC,YAAL,CAAkB,OAAlB,CAA0B,OAAO,CAAC,OAAR,CAAgB,CAAhB,CAA1B,EAA8C,eAA9C,GAAgE,SAAhE,CAA0E,UAAC,SAAD,EAAmB;AAC3F;AACA,0BAAI,MAAM,GAAA,MAAA,CAAA,MAAA,CAAA;AAAK,wBAAA,IAAI,EAAE,SAAS,CAAC;AAArB,uBAAA,EAA6B,SAAS,CAAC,OAAV,CAAkB,IAAlB,EAA7B,CAAV;AACA,sBAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;;AACA,0BAAI,CAAC,KAAI,CAAC,QAAL,CAAc,MAAd,CAAL,EAA4B;AAC1B,wBAAA,KAAI,CAAC,iBAAL,CAAuB,MAAvB;AACD;AACF,qBAPD;AAQD;;AACD,sBAAI,CAAC,KAAI,CAAC,OAAV,EAAmB;AACjB,oBAAA,KAAI,CAAC,OAAL,GAAe,EAAf;AACD;AACF,iBAdD,MAcO;AACL,kBAAA,KAAI,CAAC,OAAL,GAAe,EAAf;AACD;AACJ,eAnBC;AAoBD;;AACD,YAAA,OAAO,CAAC,GAAR,CAAY,KAAI,CAAC,OAAjB;;AACA,YAAA,KAAI,CAAC,eAAL,CAAqB,IAArB;AACD,WAlCD;AAmCD,SAzEH,CA2EE;;AA3EF;AAAA;AAAA,iCA4EW,MA5EX,EA4EiB;AACb,cAAI,KAAK,YAAT,EAAuB;AACrB,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,CAAkB,MAAtC,EAA8C,CAAC,EAA/C,EAAmD;AACjD,kBAAI,KAAK,YAAL,CAAkB,CAAlB,EAAqB,IAArB,IAA6B,MAAM,CAAC,IAAxC,EAA8C;AAC5C,uBAAO,IAAP;AACD;AACF;AACF;;AACD,iBAAO,KAAP;AACD,SArFH,CAuFE;;AAvFF;AAAA;AAAA,gCAwFU,MAxFV,EAwFgB;AACZ,cAAI,KAAK,KAAT,EAAgB;AACd,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,KAAL,CAAW,MAA/B,EAAuC,CAAC,EAAxC,EAA4C;AAC1C,kBAAI,KAAK,KAAL,CAAW,CAAX,EAAc,IAAd,IAAsB,MAAM,CAAC,IAAjC,EAAuC;AACrC,uBAAO,IAAP;AACD;AACF;AACF;;AACD,iBAAO,KAAP;AACD,SAjGH,CAmGE;;AAnGF;AAAA;AAAA,oCAoGc,MApGd,EAoGoB;AAChB,cAAI,KAAK,OAAL,CAAa,MAAb,CAAJ,EAA0B;AACxB,iBAAK,MAAL,CAAY,MAAZ;AACD,WAFD,MAEO;AACL,iBAAK,GAAL,CAAS,MAAT;AACD;AACF,SA1GH,CA4GE;;AA5GF;AAAA;AAAA,0CA6GoB,MA7GpB,EA6G0B;AACtB,cAAI,CAAC,KAAK,OAAV,EAAmB;AACjB,iBAAK,OAAL,GAAe,CAAC,MAAD,CAAf;AACD,WAFD,MAEO;AACL,gBAAI,KAAK,GAAG,CAAC,CAAb;;AACA,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,OAAL,CAAa,MAAjC,EAAyC,CAAC,EAA1C,EAA8C;AAC5C,kBAAI,KAAK,OAAL,CAAa,CAAb,EAAgB,IAAhB,IAAwB,MAAM,CAAC,IAAnC,EAAyC;AACvC,gBAAA,KAAK,GAAG,CAAR;AACD;AACF;;AACD,gBAAI,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,mBAAK,OAAL,CAAa,KAAb,IAAsB,MAAtB;AACD,aAFD,MAEO;AACL,mBAAK,OAAL,CAAa,IAAb,CAAkB,MAAlB;AACD;AACF;AACF,SA7HH,CA+HE;;AA/HF;AAAA;AAAA,0CAgIoB,MAhIpB,EAgI0B;AACtB,cAAI,CAAC,KAAK,YAAV,EAAwB;AACtB,iBAAK,YAAL,GAAoB,CAAC,MAAD,CAApB;AACD,WAFD,MAEO;AACL,gBAAI,KAAK,GAAG,CAAC,CAAb;;AACA,iBAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,KAAK,YAAL,CAAkB,MAAtC,EAA8C,CAAC,EAA/C,EAAmD;AACjD,kBAAI,KAAK,YAAL,CAAkB,CAAlB,EAAqB,IAArB,IAA6B,MAAM,CAAC,IAAxC,EAA8C;AAC5C,gBAAA,KAAK,GAAG,CAAR;AACD;AACF;;AACD,gBAAI,KAAK,GAAG,CAAC,CAAb,EAAgB;AACd,mBAAK,YAAL,CAAkB,KAAlB,IAA2B,MAA3B;AACD,aAFD,MAEO;AACL,mBAAK,YAAL,CAAkB,IAAlB,CAAuB,MAAvB;AACD;AACF;AACF,SAhJH,CAkJE;;AAlJF;AAAA;AAAA,4BAmJM,MAnJN,EAmJY;AACR,eAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB;AACD,SArJH,CAuJE;;AAvJF;AAAA;AAAA,+BAwJS,MAxJT,EAwJe;AACX,eAAK,KAAL,CAAW,MAAX,CAAkB,KAAK,KAAL,CAAW,OAAX,CAAmB,MAAnB,CAAlB,EAA8C,CAA9C;AACD,SA1JH,CA2JE;;AA3JF;AAAA;AAAA,mCA4JU;AACN,cAAI,KAAK,GAAG,EAAZ;AACA,eAAK,KAAL,CAAW,OAAX,CAAmB,UAAC,MAAD,EAAW;AAC5B,YAAA,KAAK,IAAI,MAAM,CAAC,IAAP,GAAc,IAAvB;AACD,WAFD;AAGA,iBAAO,KAAK,CAAC,SAAN,CAAgB,CAAhB,EAAmB,KAAK,CAAC,MAAN,GAAe,CAAlC,CAAP;AACD,SAlKH,CAoKE;;AApKF;AAAA;AAAA,+BAqKM;AAAA;;AACF,eAAK,SAAL,CAAe,MAAf,CAAsB;AACpB,YAAA,MAAM,EAAE,aADY;AAEpB,YAAA,OAAO,EAAE,qCAAqC,KAAK,QAAL,EAArC,GAAuD,oBAF5C;AAGpB,YAAA,OAAO,EAAE,CACP;AACE,cAAA,IAAI,EAAE;AADR,aADO,EAIP;AACE,cAAA,IAAI,EAAE,KADR;AAEE,cAAA,OAAO,EAAE,iBAAA,IAAI,EAAG;AACd;AACA,gBAAA,MAAI,CAAC,eAAL,CAAqB,IAArB;;AACA,gBAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,UAAC,MAAD,EAAW;AAC5B;AACA,kBAAA,MAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,eAAe,MAAM,CAAC,IAAtB,GAA6B,UAA7B,GAA0C,MAAI,CAAC,OAAlE,EAA2E,MAA3E,CAAkF;AAChF,oBAAA,YAAY,EAAE;AADkE,mBAAlF,EAF4B,CAK5B;;;AACA,kBAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,IAAnB;AACA,kBAAA,OAAO,CAAC,GAAR,CAAY,MAAI,CAAC,KAAL,CAAW,OAAvB;;AACA,kBAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,IAAnB,CAAwB,MAAM,CAAC,IAA/B,EAR4B,CAS5B;;;AACA,kBAAA,MAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,IAApB,CAAyB;AACvB,oBAAA,IAAI,EAAE,IAAI,IAAJ,GAAW,QAAX,EADiB;AAEvB,oBAAA,MAAM,EAAE,MAAI,CAAC,IAAL,CAAU,MAFK;AAGvB,oBAAA,IAAI,EAAE,QAHiB;AAIvB,oBAAA,OAAO,EAAE,MAAI,CAAC,IAAL,CAAU,IAAV,GAAiB,aAAjB,GAAiC,MAAI,CAAC,QAAL,EAAjC,GAAmD,gBAJrC;AAKvB,oBAAA,IAAI,EAAE;AALiB,mBAAzB;AAOD,iBAjBD,EAHc,CAqBd;;;AACA,gBAAA,MAAI,CAAC,YAAL,CAAkB,QAAlB,CAA2B,MAAI,CAAC,OAAhC,EAAyC,MAAzC,CAAgD;AAC9C,kBAAA,OAAO,EAAE,MAAI,CAAC,KAAL,CAAW,OAD0B;AAE9C,kBAAA,QAAQ,EAAE,MAAI,CAAC,KAAL,CAAW;AAFyB,iBAAhD,EAGG,IAHH,CAGQ,YAAK;AACX;AACA,kBAAA,MAAI,CAAC,eAAL,CAAqB,IAArB;AACD,iBAND;AAOD;AA/BH,aAJO;AAHW,WAAtB,EAyCG,IAzCH,CAyCQ,UAAA,CAAC;AAAA,mBAAI,CAAC,CAAC,OAAF,EAAJ;AAAA,WAzCT;AA0CD;AAhNH;;AAAA;AAAA,OAAA;;;;cAaoB,4CAAA,CAAA,QAAA;;cACD,4CAAA,CAAA,gBAAA;;cACM,mDAAA,CAAA,aAAA;;cACG,sDAAA,CAAA,gBAAA;;cACN,oDAAA,CAAA,kBAAA;;cACA,2CAAA,CAAA,iBAAA;;;;AAlBT,IAAA,cAAc,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAL1B,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,gBADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,uFAAA,CAAA,EAAA,OAFS;;;;AAAA,KAAV,CAK0B,E,uEAaP,4CAAA,CAAA,QAAA,C,EACD,4CAAA,CAAA,gBAAA,C,EACM,mDAAA,CAAA,aAAA,C,EACG,sDAAA,CAAA,gBAAA,C,EACN,oDAAA,CAAA,kBAAA,C,EACA,2CAAA,CAAA,iBAAA,C,EAlBK,CAAA,EAAd,cAAc,CAAd","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"primart\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Add Memebers</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"done()\\\">Done</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <!-- All friends already in the group. -->\\n  <div class=\\\"empty-list\\\" *ngIf=\\\"friends && friends.length == 0\\\">\\n    <h1>\\n      <ion-icon name=\\\"md-contacts\\\"></ion-icon>\\n    </h1>\\n    <p>Uh-oh! Sorry but your friends are already a member of this group.</p>\\n  </div>\\n  <!-- Add/Cancel Add friends to the group. -->\\n  <ion-list lines=\\\"none\\\" *ngIf=\\\"friends && friends.length > 0\\\">\\n    <ion-searchbar [(ngModel)]=\\\"searchFriend\\\" placeholder=\\\"Search for friend or username\\\" showCancelButton=\\\"true\\\"\\n      cancelButtonText=\\\"Done\\\"></ion-searchbar>\\n    <ion-item *ngFor=\\\"let friend of friends | friendFilter:searchFriend\\\" (click)=\\\"addOrRemove(friend)\\\">\\n\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"{{friend.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\n      </ion-avatar>\\n      <ion-label>\\n        <ion-text>\\n          <h2>{{friend.name}}</h2>\\n        </ion-text>\\n        <ion-text>\\n          <p>@{{friend.username}}</p>\\n        </ion-text>\\n      </ion-label>\\n      <ion-button size=\\\"small\\\" slot=\\\"end\\\" fill=\\\"outline\\\" (click)=\\\"add(friend); $event.stopPropagation();\\\"\\n        *ngIf=\\\"!isAdded(friend)\\\">Add</ion-button>\\n      <ion-button size=\\\"small\\\" slot=\\\"end\\\" fill=\\\"outline\\\" (click)=\\\"remove(friend); $event.stopPropagation();\\\"\\n        *ngIf=\\\"isAdded(friend)\\\">Remove</ion-button>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AddmembersPage } from './addmembers.page';\nimport { SharedModule } from '../services/share.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AddmembersPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AddmembersPage]\n})\nexport class AddmembersPageModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FkZG1lbWJlcnMvYWRkbWVtYmVycy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { LoadingService } from '../services/loading.service';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-addmembers',\n  templateUrl: './addmembers.page.html',\n  styleUrls: ['./addmembers.page.scss'],\n})\nexport class AddmembersPage implements OnInit {\n\n  groupId: any;\n  group: any;\n  groupMembers: any;\n  friends: any;\n  searchFriend: any;\n  toAdd: any;\n  user: any;\n  // AddMemberPage\n  // This is the page where the user can add their friends to an existing group.\n  // The user can only add their friends to the group.\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    public dataProvider: DataService,\n    public loadingProvider: LoadingService,\n    public firestore: AngularFirestore,\n    public alertCtrl: AlertController,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewDidEnter() {\n    // Initialize\n    this.groupId = this.route.snapshot.params.id;\n\n    this.searchFriend = '';\n    this.toAdd = [];\n    this.loadingProvider.show();\n\n    // Get user information for system message sent to the group when a member was added.\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((user: any) => {\n        this.user = user.payload.data();\n    });\n\n    // Get group information\n    this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group: any) => {\n      this.group = group.payload.data();\n      this.groupMembers = null;\n      // Get group members\n      if (group.payload.data().members) {\n        group.payload.data().members.forEach((memberId) => {\n          this.dataProvider.getUser(memberId).snapshotChanges().subscribe((member) => {\n              this.addOrUpdateMember(member);\n            });\n        });\n        // Get user's friends to add\n        this.dataProvider.getCurrentUser().snapshotChanges().subscribe((user: any) => {\n          let account = user.payload.data();\n          if (account.friends) {\n            for (var i = 0; i < account.friends.length; i++) {\n              this.dataProvider.getUser(account.friends[i]).snapshotChanges().subscribe((friendRes: any) => {\n                // Only friends that are not yet a member of this group can be added.\n                let friend = { $key: friendRes.key, ...friendRes.payload.data() };\n                console.log(friend)\n                if (!this.isMember(friend)) {\n                  this.addOrUpdateFriend(friend);\n                }\n              });\n            }\n            if (!this.friends) {\n              this.friends = [];\n            }\n          } else {\n            this.friends = [];\n          }\n      });\n      }\n      console.log(this.friends);\n      this.loadingProvider.hide();\n    });\n  }\n\n  // Check if friend is a member of the group or not.\n  isMember(friend) {\n    if (this.groupMembers) {\n      for (var i = 0; i < this.groupMembers.length; i++) {\n        if (this.groupMembers[i].$key == friend.$key) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // Check if friend is already on the list of members to be added.\n  isAdded(friend) {\n    if (this.toAdd) {\n      for (var i = 0; i < this.toAdd.length; i++) {\n        if (this.toAdd[i].$key == friend.$key) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // Toggle for adding/removing friend on the list of members to be added.\n  addOrRemove(friend) {\n    if (this.isAdded(friend)) {\n      this.remove(friend);\n    } else {\n      this.add(friend);\n    }\n  }\n\n  // Add or update friend information for real-time sync.\n  addOrUpdateFriend(friend) {\n    if (!this.friends) {\n      this.friends = [friend];\n    } else {\n      var index = -1;\n      for (var i = 0; i < this.friends.length; i++) {\n        if (this.friends[i].$key == friend.$key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.friends[index] = friend;\n      } else {\n        this.friends.push(friend);\n      }\n    }\n  }\n\n  // Add or update member information for real-time sync.\n  addOrUpdateMember(member) {\n    if (!this.groupMembers) {\n      this.groupMembers = [member];\n    } else {\n      var index = -1;\n      for (var i = 0; i < this.groupMembers.length; i++) {\n        if (this.groupMembers[i].$key == member.$key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.groupMembers[index] = member;\n      } else {\n        this.groupMembers.push(member);\n      }\n    }\n  }\n\n  // Add friend to the list of to be added.\n  add(friend) {\n    this.toAdd.push(friend);\n  }\n\n  // Remove friend from the list of to be added.\n  remove(friend) {\n    this.toAdd.splice(this.toAdd.indexOf(friend), 1);\n  }\n  // Get names of the members to be added to the group.\n  getNames() {\n    var names = '';\n    this.toAdd.forEach((friend) => {\n      names += friend.name + ', ';\n    });\n    return names.substring(0, names.length - 2);\n  }\n\n  // Confirm adding of new members, afterwards add the members.\n  done() {\n    this.alertCtrl.create({\n      header: 'Add Members',\n      message: 'Are you sure you want to add <b>' + this.getNames() + '</b> to the group?',\n      buttons: [\n        {\n          text: 'Cancel'\n        },\n        {\n          text: 'Add',\n          handler: data => {\n            // Proceed\n            this.loadingProvider.show();\n            this.toAdd.forEach((friend) => {\n              // Add groupInfo to each friend added to the group.\n              this.firestore.doc('/accounts/' + friend.$key + '/groups/' + this.groupId).update({\n                messagesRead: 0\n              });\n              // Add friend as members of the group.\n              console.log(friend.$key);\n              console.log(this.group.members);\n              this.group.members.push(friend.$key);\n              // Add system message that the members are added to the group.\n              this.group.messages.push({\n                date: new Date().toString(),\n                sender: this.user.userId,\n                type: 'system',\n                message: this.user.name + ' has added ' + this.getNames() + ' to the group.',\n                icon: 'md-contacts'\n              });\n            });\n            // Update group data on the database.\n            this.dataProvider.getGroup(this.groupId).update({\n              members: this.group.members,\n              messages: this.group.messages\n            }).then(() => {\n              // Back.\n              this.loadingProvider.hide();\n            });\n          }\n        }\n      ]\n    }).then(r => r.present());\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"addmembers-addmembers-module-es5.js"}