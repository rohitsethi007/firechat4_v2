{"version":3,"sources":["webpack:///src/app/group/group.page.scss","webpack:///src/app/group/group.module.ts","webpack:///src/app/group/group.page.ts","webpack:///src/app/group/group.page.html"],"names":["routes","path","component","GroupPageModule","imports","forChild","declarations","GroupPage","dataProvider","navCtrl","modalCtrl","firestore","alertCtrl","imageProvider","loadingProvider","camera","keyboard","actionSheet","contacts","geolocation","route","router","popoverCtrl","startIndex","scrollDirection","numberOfMessages","polls","resources","events","loggedInUserIsMember","resourceTags","notifications","toggled","posts","numberOfPosts","maxNoOfPosts","maxNoOfEvents","maxNoOfPolls","maxNoOfResources","loggedInUserId","auth","currentUser","uid","handleSelection","event","emojitext","ngOnInit","show","tab","title","getCurrentUser","then","u","get","subscribe","user","loggedInUser","data","getGroupDetailsandPosts","hide","ionViewDidEnter","ionViewWillLeave","messages","setMessagesRead","doc","groupId","update","messagesRead","length","onType","keyCode","scrollBottom","that","setTimeout","content","nativeElement","scrollHeight","scrollTop","doScroll","isSender","message","sender","isSystemMessage","type","viewUser","userId","navigateByUrl","send","JSON","parse","stringify","push","date","Date","toString","getGroup","enlargeImage","img","attach","action","create","header","buttons","text","handler","uploadGroupPhotoMessage","PictureSourceType","CAMERA","url","sendPhotoMessage","PHOTOLIBRARY","uploadGroupVideoMessage","sendVideoMessage","getCurrentPosition","timeout","res","locationMessage","coords","latitude","longitude","mapUrl","confirm","r","present","locationErr","pickContact","displayName","phoneNumbers","value","err","role","takePhoto","groupInfo","onPress","$event","onPressUp","presentPopover","joinGroup","alert","group","members","name","icon","back","myEvent","ev","target","getBoundingClientRect","top","center","y","left","x","componentProps","translucent","popover","getGroupDetailsandMessages","snapshot","params","id","subscription","snapshotChanges","payload","forEach","memberId","getUser","member","key","$key","addUpdateOrRemoveMember","getGroupMessages","messagesRes","undefined","avatar","messagesToShow","i","getGroupMembers","memberIdsRes","memberIds","includes","updateDateTime","setInterval","exists","firstDataSetPost","collection","ref","where","orderBy","limit","onSnapshot","po","lastDataSetPost","docs","loadEachPostData","post","p","startDate","endDate","seconds","getTime","showNewIcon","reactions","element","reaction","foundSmiley","find","el","addedByUser","addedByKey","getCurrentUserId","reactionType","some","showSmiley","foundHug","showHug","postTags","filter","isChecked","addOrUpdatePost","indexOf","groupMembers","index","index1","j","splice","segmentChanged","getPolls","getResources","getEvents","firstDataSetPoll","lastDataSetPoll","loadEachPollData","addOrUpdatePoll","viewPoll","poll","viewResource","resource","viewPost","viewEvent","newPoll","newPost","newResource","newEvent","firstDataSetResources","lastDataSetResources","loadEachResourceData","foundBookmark","showBookmark","addOrUpdateResource","firstDataSetEvent","lastDataSetEvent","loadEachEventData","foundCheckin","showCheckin","addOrUpdateEvent","totalPollCount","pollOptions","dateCreated","showGroupOptions","backdropDismiss","mode","cssClass","submitReactionPost","addPostReaction","totalReactionCount","removePostReaction","postIndex","findIndex","react","addedByUsername","username","addedByImg","addPostReactions","FieldValue","arrayUnion","increment","found","values","Object","keys","map","e","arrayRemove","showReactionsList","modal","showPostOptions","createPostOptionButtons","followPost","showToast","unFollowPost","reportPost","addReports","deletePost","cancelButton","reportButton","notificationButton","deletePostButton","loadDataPosts","disabled","nextDataSetPost","startAfter","complete","loadDataPolls","nextDataSetPoll","loadDataEvents","nextDataSetEvent","loadDataResources","nextDataSetResources","selector","template"],"mappings":"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","file":"group-group-module-es5.js","sourcesContent":["export default \":host {\\n  --page-margin: var(--app-fair-margin);\\n  --page-background: var(--app-background);\\n  --page-rating-2-color: #aa6c39;\\n  --page-rating-1-color: #bbb2b2;\\n}\\n\\n.tab-title {\\n  size: 9px;\\n}\\n\\nion-segment-button {\\n  background-color: var(--page-background);\\n}\\n\\n.filters-toolbar {\\n  --padding-start: var(--page-margin);\\n  --padding-end: var(--page-margin);\\n  --padding-top: var(--page-margin);\\n  --padding-bottom: var(--page-margin);\\n  --border-style: 10px;\\n}\\n\\n.filters-toolbar .searchbar-row {\\n  --ion-grid-column-padding: 0px;\\n}\\n\\n.filters-toolbar .searchbar-row ion-searchbar.items-searchbar {\\n  padding: 0px;\\n  height: 100%;\\n  contain: content;\\n}\\n\\n.filters-toolbar .searchbar-row .call-to-action-col {\\n  max-width: -moz-fit-content;\\n  max-width: fit-content;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.filters-toolbar .searchbar-row .call-to-action-col .filters-btn {\\n  --padding-start: 6px;\\n  --padding-end: 6px;\\n  margin: 0px;\\n  font-size: 15px;\\n  height: initial;\\n}\\n\\n.listing-item {\\n  background-color: var(--page-background);\\n}\\n\\n.icon {\\n  display: inline-block;\\n  vertical-align: middle;\\n}\\n\\n.text {\\n  display: inline-block;\\n  vertical-align: middle;\\n  padding-left: 3px;\\n  text-transform: capitalize !important;\\n}\\n\\n.addedByTitle {\\n  margin-left: 10px;\\n  line-height: 5px;\\n  text-decoration: none;\\n}\\n\\n.addedByDate {\\n  margin-left: 10px;\\n  font-style: italic;\\n}\\n\\n.addedByImg {\\n  width: 50px;\\n  float: left;\\n  vertical-align: middle;\\n}\\n\\n.newIcon {\\n  margin-left: 10px;\\n  height: 40px;\\n  vertical-align: middle;\\n}\\n\\n.message {\\n  font-family: \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  font-weight: 400;\\n  font-size: 14px;\\n  line-height: 19px;\\n  -webkit-font-smoothing: subpixel-antialiased;\\n  -moz-osx-font-smoothing: auto;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n.message .slider {\\n  margin-bottom: 5px;\\n}\\n\\n.message .slider .bgSizeContain {\\n  background-repeat: no-repeat;\\n  background-position: center center;\\n  background-size: 100%;\\n  width: 100%;\\n  height: 200px;\\n  text-shadow: white 0px 0px 2px;\\n  font-size: 16px;\\n  border-radius: 10px;\\n}\\n\\n.message .reactions {\\n  margin-bottom: 0px;\\n  margin-left: -10px;\\n}\\n\\n.message .tags-wrapper {\\n  padding-top: 5px;\\n}\\n\\n.message .tags-wrapper .tags {\\n  padding-right: 5px;\\n}\\n\\n.message .tags-wrapper .tags .item-rating {\\n  background-color: rgba(var(--page-color-rgb), 0.35);\\n  padding-right: 15px;\\n  font-size: 12px;\\n  font-weight: bold;\\n  width: 100%;\\n  display: block;\\n  text-align: center;\\n  color: #aa6c39;\\n}\\n\\n.group-info {\\n  margin: var(--page-margin) var(--page-margin) var(--page-margin) var(--page-margin);\\n}\\n\\n.group-info .group-name {\\n  padding-top: var(--page-margin);\\n  padding-bottom: var(--page-margin);\\n  font-family: \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  text-align: left;\\n  font-weight: bold;\\n  font-size: 19px;\\n}\\n\\n.group-info .group-tags {\\n  padding-bottom: calc(var(--page-margin) / 3);\\n}\\n\\n.group-info .group-tags .tags {\\n  padding-right: 5px;\\n}\\n\\n.group-info .group-tags .tags .item-rating {\\n  background-color: rgba(var(--page-color-rgb), 0.35);\\n  padding-right: calc(var(--page-margin) / 2);\\n  font-size: 14px;\\n  font-weight: bold;\\n  width: 100%;\\n  display: block;\\n  text-align: center;\\n}\\n\\n.group-info .group-tags .tags .item-rating[ratingBase=\\\"0\\\"] {\\n  color: var(--page-rating-1-color);\\n}\\n\\n.group-info .group-tags .tags .item-rating[ratingBase=\\\"1\\\"] {\\n  color: var(--page-rating-2-color);\\n}\\n\\n.group-info .group-member-name {\\n  padding-left: var(--page-margin);\\n}\\n\\n.empty-list {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ3JvdXAvZ3JvdXAucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UscUNBQUE7RUFDQSx3Q0FBQTtFQUNBLDhCQUFBO0VBQ0EsOEJBQUE7QUFDRjs7QUFDQTtFQUNFLFNBQUE7QUFFRjs7QUFBQTtFQUNFLHdDQUFBO0FBR0Y7O0FBQUE7RUFDRSxtQ0FBQTtFQUNBLGlDQUFBO0VBQ0EsaUNBQUE7RUFDQSxvQ0FBQTtFQUNBLG9CQUFBO0FBR0Y7O0FBREU7RUFDRSw4QkFBQTtBQUdKOztBQURJO0VBQ0UsWUFBQTtFQUVBLFlBQUE7RUFFQSxnQkFBQTtBQUNOOztBQUVJO0VBRUUsMkJBQUE7RUFBQSxzQkFBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0VBRUEsYUFBQTtFQUNBLHlCQUFBO0FBRk47O0FBSU07RUFDRSxvQkFBQTtFQUNBLGtCQUFBO0VBRUEsV0FBQTtFQUNBLGVBQUE7RUFFQSxlQUFBO0FBSlI7O0FBV0E7RUFDQSx3Q0FBQTtBQVJBOztBQVdBO0VBQ0EscUJBQUE7RUFDQSxzQkFBQTtBQVJBOztBQVdBO0VBQ0MscUJBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0VBQ0EscUNBQUE7QUFSRDs7QUFVQTtFQUNDLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxxQkFBQTtBQVBEOztBQVNBO0VBQ0EsaUJBQUE7RUFDQyxrQkFBQTtBQU5EOztBQVFBO0VBQ0UsV0FBQTtFQUNBLFdBQUE7RUFDQSxzQkFBQTtBQUxGOztBQU9BO0VBQ0UsaUJBQUE7RUFDQSxZQUFBO0VBQ0Esc0JBQUE7QUFKRjs7QUFNQTtFQUNFLGtHQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSw0Q0FBQTtFQUNBLDZCQUFBO0VBQ0EsZ0JBQUE7RUFDQSx1QkFBQTtBQUhGOztBQUtFO0VBQ0Usa0JBQUE7QUFISjs7QUFJSTtFQUNFLDRCQUFBO0VBQ0Esa0NBQUE7RUFDQSxxQkFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsOEJBQUE7RUFDQSxlQUFBO0VBR0EsbUJBQUE7QUFGTjs7QUFNRTtFQUNFLGtCQUFBO0VBQ0Esa0JBQUE7QUFKSjs7QUFNRTtFQUNFLGdCQUFBO0FBSko7O0FBTUk7RUFDRSxrQkFBQTtBQUpOOztBQU1JO0VBQ0UsbURBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0FBSk47O0FBVUE7RUFDRSxtRkFBQTtBQVBGOztBQVdFO0VBQ0UsK0JBQUE7RUFDQSxrQ0FBQTtFQUNBLGtHQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGVBQUE7QUFUSjs7QUFXRTtFQUNFLDRDQUFBO0FBVEo7O0FBV0k7RUFDRSxrQkFBQTtBQVROOztBQVdJO0VBRUUsbURBQUE7RUFNUSwyQ0FBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7QUFmZDs7QUFnQmM7RUFDRSxpQ0FBQTtBQWRoQjs7QUFnQmM7RUFDRSxpQ0FBQTtBQWRoQjs7QUFxQkU7RUFDRSxnQ0FBQTtBQW5CSjs7QUF1QkE7RUFDRSxrQkFBQTtBQXBCRiIsImZpbGUiOiJzcmMvYXBwL2dyb3VwL2dyb3VwLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgLS1wYWdlLW1hcmdpbjogdmFyKC0tYXBwLWZhaXItbWFyZ2luKTtcbiAgLS1wYWdlLWJhY2tncm91bmQ6IHZhcigtLWFwcC1iYWNrZ3JvdW5kKTtcbiAgLS1wYWdlLXJhdGluZy0yLWNvbG9yOiAjYWE2YzM5O1xuICAtLXBhZ2UtcmF0aW5nLTEtY29sb3I6ICNiYmIyYjI7XG59XG4udGFiLXRpdGxlIHtcbiAgc2l6ZTogOXB4O1xufVxuaW9uLXNlZ21lbnQtYnV0dG9uIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcGFnZS1iYWNrZ3JvdW5kKTtcbn1cblxuLmZpbHRlcnMtdG9vbGJhciB7XG4gIC0tcGFkZGluZy1zdGFydDogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICAtLXBhZGRpbmctZW5kOiB2YXIoLS1wYWdlLW1hcmdpbik7XG4gIC0tcGFkZGluZy10b3A6IHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgLS1wYWRkaW5nLWJvdHRvbTogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICAtLWJvcmRlci1zdHlsZTogMTBweDtcblxuICAuc2VhcmNoYmFyLXJvdyB7XG4gICAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZzogMHB4O1xuXG4gICAgaW9uLXNlYXJjaGJhci5pdGVtcy1zZWFyY2hiYXIge1xuICAgICAgcGFkZGluZzogMHB4O1xuICAgICAgLy8gb3ZlcnJpZGUgSW9uaWMgZml4ZWQgaGVpZ2h0XG4gICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAvLyBMZWFybiBtb3JlIGFib3V0IENTUyBjb250YWluIHByb3BlcnR5IGhlcmU6IGh0dHBzOi8vdGVybXZhZGVyLmdpdGh1Yi5pby9jc3MtY29udGFpbi9cbiAgICAgIGNvbnRhaW46IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgLmNhbGwtdG8tYWN0aW9uLWNvbCB7XG4gICAgICAvL3BhZGRpbmctaW5saW5lLXN0YXJ0OiB2YXIoLS1wYWdlLW1hcmdpbik7XG4gICAgICBtYXgtd2lkdGg6IGZpdC1jb250ZW50O1xuICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICBmbGV4LWdyb3c6IDA7XG5cbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuXG4gICAgICAuZmlsdGVycy1idG4ge1xuICAgICAgICAtLXBhZGRpbmctc3RhcnQ6IDZweDtcbiAgICAgICAgLS1wYWRkaW5nLWVuZDogNnB4O1xuXG4gICAgICAgIG1hcmdpbjogMHB4O1xuICAgICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgICAgIC8vIG92ZXJyaWRlIElvbmljIGZpeGVkIGhlaWdodFxuICAgICAgICBoZWlnaHQ6IGluaXRpYWw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cblxuLmxpc3RpbmctaXRlbSB7XG5iYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYWdlLWJhY2tncm91bmQpO1xufVxuXG4uaWNvbiB7XG5kaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG52ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xufVxuXG4udGV4dHtcbiBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiBwYWRkaW5nLWxlZnQ6IDNweDtcbiB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZSAhaW1wb3J0YW50O1xufVxuLmFkZGVkQnlUaXRsZSB7XG4gbWFyZ2luLWxlZnQ6IDEwcHg7XG4gbGluZS1oZWlnaHQ6IDVweDtcbiB0ZXh0LWRlY29yYXRpb246IG5vbmUgXG59XG4uYWRkZWRCeURhdGUge1xubWFyZ2luLWxlZnQ6IDEwcHg7XG4gZm9udC1zdHlsZTogaXRhbGljO1xufVxuLmFkZGVkQnlJbWcge1xuICB3aWR0aDogNTBweDtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG4ubmV3SWNvbiB7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBoZWlnaHQ6IDQwcHg7XG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XG59XG4ubWVzc2FnZSB7XG4gIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhTmV1ZScsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgJ1JvYm90bycsICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICBmb250LXdlaWdodDogNDAwO1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxpbmUtaGVpZ2h0OiAxOXB4O1xuICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBzdWJwaXhlbC1hbnRpYWxpYXNlZDtcbiAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGF1dG87XG4gIG92ZXJmbG93OiBoaWRkZW47IFxuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcblxuICAuc2xpZGVyIHtcbiAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgLmJnU2l6ZUNvbnRhaW4ge1xuICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7XG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IDEwMCU7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIGhlaWdodDogMjAwcHg7XG4gICAgICB0ZXh0LXNoYWRvdzogd2hpdGUgMHB4IDBweCAycHg7XG4gICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAtbW96LWJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICB9XG4gIH1cblxuICAucmVhY3Rpb25zIHtcbiAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IC0xMHB4O1xuICB9IFxuICAudGFncy13cmFwcGVyIHtcbiAgICBwYWRkaW5nLXRvcDogNXB4O1xuICAgXG4gICAgLnRhZ3Mge1xuICAgICAgcGFkZGluZy1yaWdodDogNXB4O1xuXG4gICAgLml0ZW0tcmF0aW5nIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tcGFnZS1jb2xvci1yZ2IpLCAuMzUpO1xuICAgICAgcGFkZGluZy1yaWdodDogMTVweDtcbiAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGNvbG9yOiAjYWE2YzM5O1xuICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLmdyb3VwLWluZm8ge1xuICBtYXJnaW46IHZhcigtLXBhZ2UtbWFyZ2luKSB2YXIoLS1wYWdlLW1hcmdpbikgdmFyKC0tcGFnZS1tYXJnaW4pIHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgLmdyb3VwLWltZyB7XG5cbiAgfVxuICAuZ3JvdXAtbmFtZSB7XG4gICAgcGFkZGluZy10b3A6IHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgICBwYWRkaW5nLWJvdHRvbTogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICAgIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhTmV1ZScsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgJ1JvYm90bycsICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zaXplOiAxOXB4O1xuICB9XG4gIC5ncm91cC10YWdzIHtcbiAgICBwYWRkaW5nLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAzKTtcbiAgIFxuICAgIC50YWdzIHtcbiAgICAgIHBhZGRpbmctcmlnaHQ6IDVweDtcblxuICAgIC5pdGVtLXJhdGluZyB7XG4gICAgICAvLyBEZWZhdWx0IGJhY2tncm91bmRcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tcGFnZS1jb2xvci1yZ2IpLCAuMzUpO1xuICAgICAgICAgICAgICAvLyBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWxpZ2h0ZXN0KTtcbiAgICAgICAgICAgICAgLy8gYm9yZGVyLXJhZGl1czogdmFyKC0tYXBwLW5hcnJvdy1yYWRpdXMpO1xuICAgICAgICAgICAgICAvLyBwYWRkaW5nLXRvcDogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAxKTtcbiAgICAgICAgICAgICAgLy9wYWRkaW5nLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAzKTtcbiAgICAgICAgICAgICAgLy8gcGFkZGluZy1sZWZ0OiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDIpO1xuICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDIpO1xuICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgJltyYXRpbmdCYXNlPVwiMFwiXSB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXBhZ2UtcmF0aW5nLTEtY29sb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICZbcmF0aW5nQmFzZT1cIjFcIl0ge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wYWdlLXJhdGluZy0yLWNvbG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgIH1cblxuICAgIH1cbiAgfVxuXG4gIC5ncm91cC1tZW1iZXItbmFtZSB7XG4gICAgcGFkZGluZy1sZWZ0OiB2YXIoLS1wYWdlLW1hcmdpbik7XG4gIH1cbn1cblxuLmVtcHR5LWxpc3Qge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4iXX0= */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { GroupPage } from './group.page';\nimport { SharedModule } from '../services/share.module';\nimport { ComponentsModule } from '../components/components.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GroupPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    ComponentsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [GroupPage]\n})\nexport class GroupPageModule {}\n","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { Camera } from '@ionic-native/camera/ngx';\nimport { Keyboard } from '@ionic-native/keyboard/ngx';\nimport { NavController, ActionSheetController, AlertController,\n  ModalController, PopoverController, IonInfiniteScroll } from '@ionic/angular';\nimport { Contacts } from '@ionic-native/contacts/ngx';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { LoadingService } from '../services/loading.service';\nimport { ImageService } from '../services/image.service';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\nimport * as firebase from 'firebase';\n\nimport { PopoverPage } from '../popover/popover.page';\nimport { TagModalPage } from '../tag-modal/tag-modal.page';\nimport { ReactionListModalPage } from '../reaction-list-modal/reaction-list-modal.page';\n\n@Component({\n  selector: 'app-group',\n  templateUrl: './group.page.html',\n  styleUrls: ['./group.page.scss'],\n})\nexport class GroupPage implements OnInit {\n\n  @ViewChild('content', null) content: ElementRef;\n  @ViewChild(IonInfiniteScroll, {static: true}) infiniteScroll: IonInfiniteScroll;\n  title: any;\n  groupId: any;\n  message: any;\n  messages: any;\n  updateDateTime: any;\n  subscription: any;\n  messagesToShow: any;\n  startIndex: any = -1;\n  scrollDirection: any = 'bottom';\n  // Set number of messages to show.\n  numberOfMessages = 10;\n  private polls: any = [];\n  private resources: any = [];\n  private events: any = [];\n  private tab: any;\n  private group: any;\n  private user: any;\n  private groupMembers: any;\n  private loggedInUserIsMember: any = 'false';\n  private resourceTags: any = [];\n  private eventTags: any;\n  private alert: any;\n  private loggedInUserId: any;\n  private loggedInUser: any;\n  notifications: any = [];\n\n  private toggled = false;\n  private emojitext: string;\n\n  // posts\n  private posts: any = [];\n  private postsToShow: any;\n  private numberOfPosts = 10;\n\n  // infinite scroll data\n  private firstDataSetPost: any;\n  private lastDataSetPost: any;\n  private maxNoOfPosts: any = 1000;\n  private nextDataSetPost: firebase.default.firestore.Query;\n\n  private firstDataSetEvent: any;\n  private lastDataSetEvent: any;\n  private maxNoOfEvents: any = 1000;\n  private nextDataSetEvent: firebase.default.firestore.Query;\n\n\n  private firstDataSetPoll: any;\n  private lastDataSetPoll: any;\n  private maxNoOfPolls: any = 1000;\n  private nextDataSetPoll: firebase.default.firestore.Query;\n\n\n  private firstDataSetResources: any;\n  private lastDataSetResources: any;\n  private maxNoOfResources: any = 1000;\n  private nextDataSetResources: firebase.default.firestore.Query;\n\n  // GroupPage\n  // This is the page where the user can chat with other group members and view group info.\n  constructor(\n    public dataProvider: DataService,\n    public navCtrl: NavController,\n    public modalCtrl: ModalController,\n    public firestore: AngularFirestore,\n    public alertCtrl: AlertController,\n    public imageProvider: ImageService,\n    public loadingProvider: LoadingService,\n    public camera: Camera,\n    public keyboard: Keyboard,\n    public actionSheet: ActionSheetController,\n    public contacts: Contacts,\n    public geolocation: Geolocation,\n    private route: ActivatedRoute,\n    private router: Router,\n\n    public popoverCtrl: PopoverController\n  ) {\n    this.loggedInUserId = firebase.default.auth().currentUser.uid;\n  }\n\n  handleSelection(event) {\n    this.emojitext = this.emojitext + ' ' + event.char;\n  }\n\n  ngOnInit() {\n    this.loadingProvider.show();\n    this.tab = 'posts';\n    this.title = 'Posts';\n\n    this.loggedInUserId = firebase.default.auth().currentUser.uid;\n    // Get Posts\n    this.dataProvider.getCurrentUser().then((u) => {\n      u.get().subscribe((user) => {\n        // this.userReactions = user.data().userReactions;\n        // this.userNotifications = user.data().userNotifications;\n        this.loggedInUser = user.data();\n        this.getGroupDetailsandPosts();\n      });\n  \n    })\n\n    this.loadingProvider.hide();\n  }\n\n  ionViewDidEnter() { }\n\n  // Update messagesRead when user lefts this page.\n  ionViewWillLeave() {\n    if (this.messages) {\n      this.setMessagesRead(this.messages);\n    }\n  }\n\n  // Check if currentPage is active, then update user's messagesRead.\n  setMessagesRead(messages) {\n    // if (this.navCtrl.getActive().instance instanceof GroupPage) {\n    // Update user's messagesRead on database.\n    this.firestore.doc('/accounts/' + firebase.default.auth().currentUser.uid + '/groups/' + this.groupId).update({\n      messagesRead: this.messages.length\n    });\n    // }\n  }\n\n  // Check if 'return' button is pressed and send the message.\n  onType(keyCode) {\n    if (keyCode == 13) {\n      // this.keyboard.close();\n      // this.send();\n    }\n  }\n\n  // Scroll to bottom of page after a short delay.\n  scrollBottom() {\n    const that = this;\n    setTimeout(function() {\n      that.content.nativeElement.scrollBottom = that.content.nativeElement.scrollHeight;\n    }, 300);\n  }\n\n  // Scroll to top of the page after a short delay.\n  scrollTop() {\n    const that = this;\n    setTimeout(function() {\n      that.content.nativeElement.scrollTop = that.content.nativeElement.scrollHeight;\n    }, 300);\n  }\n\n  // Scroll depending on the direction.\n  doScroll() {\n    if (this.scrollDirection === 'bottom') {\n      this.scrollBottom();\n    } else if (this.scrollDirection === 'top') {\n      this.scrollTop();\n    }\n  }\n\n  // Check if the user is the sender of the message.\n  isSender(message) {\n    if (message.sender === firebase.default.auth().currentUser.uid) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Check if the message is a system message.\n  isSystemMessage(message) {\n    if (message.type === 'system') {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // View user info\n  viewUser(userId) {\n    this.router.navigateByUrl('/userinfo/' + userId);\n  }\n\n  // Send text message to the group.\n  send(type) {\n    // Clone an instance of messages object so it will not directly be updated.\n    // The messages object should be updated by our observer declared on ionViewDidLoad.\n    const messages = JSON.parse(JSON.stringify(this.messages));\n\n    messages.push({\n      date: new Date().toString(),\n      sender: firebase.default.auth().currentUser.uid,\n      // tslint:disable-next-line: object-literal-shorthand\n      type: type,\n      message: this.message\n    });\n\n    // Update group messages.\n    this.dataProvider.getGroup(this.groupId).update({\n      // tslint:disable-next-line: object-literal-shorthand\n      messages: messages\n    });\n    // Clear messagebox.\n    this.message = '';\n  }\n\n  // Enlarge image messages.\n  enlargeImage(img) {\n    // let imageModal = this.modalCtrl.create(\"ImageModalPage\", { img: img });\n    // imageModal.present();\n  }\n\n  attach() {\n    const action = this.actionSheet.create({\n      header: 'Choose attachments',\n      buttons: [{\n        text: 'Camera',\n        handler: () => {\n          this.imageProvider.uploadGroupPhotoMessage(this.groupId, this.camera.PictureSourceType.CAMERA).then((url) => {\n            // Process image message.\n            this.sendPhotoMessage(url);\n          });\n        }\n      }, {\n        text: 'Photo Library',\n        handler: () => {\n          this.imageProvider.uploadGroupPhotoMessage(this.groupId, this.camera.PictureSourceType.PHOTOLIBRARY).then((url) => {\n            // Process image message.\n            this.sendPhotoMessage(url);\n          });\n        }\n      }, {\n        text: 'Video',\n        handler: () => {\n          this.imageProvider.uploadGroupVideoMessage(this.groupId).then(url => {\n            this.sendVideoMessage(url);\n          });\n        }\n      }, {\n        text: 'Location',\n        handler: () => {\n          this.geolocation.getCurrentPosition({\n            timeout: 2000\n          }).then(res => {\n            const locationMessage = 'current location: lat:' + res.coords.latitude + ' lng:' + res.coords.longitude;\n            const mapUrl = '<a href=\\'https://www.google.com/maps/search/' + res.coords.latitude + ',' + res.coords.longitude + '\\'>View on Map</a>';\n            const confirm = this.alertCtrl.create({\n              header: 'Your Location',\n              message: locationMessage,\n              buttons: [{\n                text: 'cancel',\n                handler: () => {\n                }\n              }, {\n                text: 'Share',\n                handler: () => {\n                  this.message = locationMessage + '<br>' + mapUrl;\n                  this.send('location');\n                }\n              }]\n            }).then(r => r.present());\n          }, locationErr => {\n          });\n        }\n      }, {\n        text: 'Contact',\n        handler: () => {\n          this.contacts.pickContact().then(data => {\n            this.message = '<b>Name:</b> ' + data.displayName + '<br><b>Mobile:</b> <a href=\\'tel:' + data.phoneNumbers[0].value + '\\'>' + data.phoneNumbers[0].value + '</a>';\n            this.send('contact');\n          }, err => {\n          });\n        }\n      }, {\n        text: 'cancel',\n        role: 'cancel',\n        handler: () => {\n        }\n      }]\n    }).then(r => r.present());\n  }\n\n  takePhoto() {\n    this.imageProvider.uploadGroupPhotoMessage(this.groupId, this.camera.PictureSourceType.CAMERA).then((url) => {\n      // Process image message.\n      this.sendPhotoMessage(url);\n    });\n  }\n\n  // Process photoMessage on database.\n  sendPhotoMessage(url) {\n    const messages = JSON.parse(JSON.stringify(this.messages));\n    messages.push({\n      date: new Date().toString(),\n      sender: firebase.default.auth().currentUser.uid,\n      type: 'image',\n      url\n    });\n    this.dataProvider.getGroup(this.groupId).update({\n      messages\n    });\n    this.message = '';\n  }\n\n  sendVideoMessage(url) {\n    const messages = JSON.parse(JSON.stringify(this.messages));\n    messages.push({\n      date: new Date().toString(),\n      sender: firebase.default.auth().currentUser.uid,\n      type: 'video',\n      url\n    });\n    this.dataProvider.getGroup(this.groupId).update({\n      messages\n    });\n    this.message = '';\n  }\n\n  // View group info.\n  groupInfo() {\n    this.router.navigateByUrl('/groupinfo/' + this.groupId);\n  }\n\n  // Controller Functions\n  onPress($event) {\n  }\n\n  onPressUp(event, message) {\n    this.presentPopover(event, message);\n  }\n\n  async joinGroup() {\n    this.alert = this.alertCtrl.create({\n      header: 'Join Group',\n      message: 'Are you sure you want to join this group?',\n      buttons: [\n        {\n          text: 'Cancel'\n        },\n        {\n          text: 'Join',\n          handler: data => {\n            // Proceed\n            this.loadingProvider.show();\n\n            // Add groupInfo to each friend added to the group.\n            this.firestore.doc('/accounts/' + firebase.default.auth().currentUser.uid + '/groups/' + this.groupId).update({\n              messagesRead: 0\n            });\n            // Add friend as members of the group.\n            this.group.members.push(firebase.default.auth().currentUser.uid);\n            // Add system message that the members are added to the group.\n            this.group.messages.push({\n              date: new Date().toString(),\n              sender: firebase.default.auth().currentUser.uid,\n              type: 'system',\n              message: this.user.name + ' has joined the group.',\n              icon: 'md-contacts'\n            });\n\n            // Update group data on the database.\n            this.dataProvider.getGroup(this.groupId).update({\n              members: this.group.members,\n              messages: this.group.messages\n            }).then(() => {\n              // Back.\n              this.loadingProvider.hide();\n              this.navCtrl.back();\n            });\n          }\n        }\n      ]\n    }).then(r => r.present());\n  }\n\n  async presentPopover(myEvent: any, message) {\n    let ev: any;\n    ev = {\n      target: {\n        getBoundingClientRect: () => {\n          return {\n            top: myEvent.center.y,\n            left: myEvent.center.x\n          };\n        }\n      }\n    };\n    const popover = await this.popoverCtrl.create({\n      component: PopoverPage,\n      componentProps: { message, groupId: this.groupId },\n      event: ev,\n      translucent: true\n    });\n    return await popover.present();\n  }\n\n  getGroupDetailsandMessages() {\n    // Get group details\n\n    this.groupId = this.route.snapshot.params.id;\n    this.subscription = this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group: any) => {\n      this.group = group.payload.data();\n      this.title = group.payload.data().name;\n\n        // Get Group Members\n      if (this.group.members) {\n          this.group.members.forEach((memberId) => {\n            this.dataProvider.getUser(memberId).snapshotChanges().subscribe((member: any) => {\n              if (member.key != null) {\n                member = { $key: member.key, ...member.payload.data() };\n                this.addUpdateOrRemoveMember(member);\n              }\n            });\n          });\n        }\n\n        // Get group messages\n      this.dataProvider.getGroupMessages(this.groupId).snapshotChanges().subscribe((messagesRes: any) => {\n          let messages = messagesRes.payload.data();\n          if (messages == null || messages == undefined) { messages = []; }\n\n          if (this.messages != null && this.messages != undefined) {\n            // Just append newly added messages to the bottom of the view.\n\n            if (messages.length > this.messages.length) {\n              const message = messages[messages.length - 1];\n              this.dataProvider.getUser(message.sender).snapshotChanges().subscribe((user: any) => {\n                message.avatar = user.payload.data().img;\n              });\n              this.messages.push(message);\n              // Also append to messagesToShow.\n              this.messagesToShow.push(message);\n              // Reset scrollDirection to bottom.\n              this.scrollDirection = 'bottom';\n            }\n          } else {\n            // Get all messages, this will be used as reference object for messagesToShow.\n            this.messages = [];\n            messages.forEach((message) => {\n              this.dataProvider.getUser(message.sender).snapshotChanges().subscribe((user: any) => {\n                if (user.key != null) {\n                  message.avatar = user.payload.data().img;\n                }\n              });\n              this.messages.push(message);\n            });\n            // Load messages in relation to numOfMessages.\n            if (this.startIndex === -1) {\n              // Get initial index for numberOfMessages to show.\n              if ((this.messages.length - this.numberOfMessages) > 0) {\n                this.startIndex = this.messages.length - this.numberOfMessages;\n              } else {\n                this.startIndex = 0;\n              }\n            }\n            if (!this.messagesToShow) {\n              this.messagesToShow = [];\n            }\n            // Set messagesToShow\n            for (let i = this.startIndex; i < this.messages.length; i++) {\n              this.messagesToShow.push(this.messages[i]);\n            }\n            this.loadingProvider.hide();\n          }\n        });\n\n      this.dataProvider.getGroupMembers(this.groupId).snapshotChanges().subscribe((memberIdsRes: any) => {\n          const memberIds = memberIdsRes.payload.data();\n          if (memberIds.includes(firebase.default.auth().currentUser.uid)) {\n            this.loggedInUserIsMember = true;\n          } else {\n            this.loggedInUserIsMember = false;\n          }\n\n        });\n\n    });\n\n    // Update messages' date time elapsed every minute based on Moment.js.\n    const that = this;\n    if (!that.updateDateTime) {\n      that.updateDateTime = setInterval(() => {\n        if (that.messages) {\n          that.messages.forEach((message) => {\n            const date = message.date;\n            message.date = new Date(date);\n          });\n        }\n      }, 60000);\n    }\n  }\n\n  getGroupDetailsandPosts() {\n    // Get group details\n    this.posts = [];\n    this.groupId = this.route.snapshot.params.id;\n    this.subscription = this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group: any) => {\n\n    this.group = group.payload.data();\n    this.title = group.payload.data().name;\n\n    // Get Group Members\n    if (this.group.members) {\n      this.group.members.forEach((memberId) => {\n        this.dataProvider.getUser(memberId).snapshotChanges().subscribe((member: any) => {\n          if (member.payload.exists) {\n            member = { $key: member.payload.id, ...member.payload.data() };\n            this.addUpdateOrRemoveMember(member);\n          }\n        });\n      });\n    }\n\n        // Get group posts\n    this.firstDataSetPost = this.firestore.collection('posts').ref\n        .where('groupId', '==', this.groupId)\n        .where('type', '==', 'general')\n        .orderBy('date', 'desc')\n        .limit(5);\n\n    this.firstDataSetPost.onSnapshot((po) => {\n      this.lastDataSetPost = po.docs[po.docs.length - 1];\n      this.posts = [];\n      this.loadEachPostData(po);\n      });\n    });\n\n    // Update messages' date time elapsed every minute based on Moment.js.\n    const that = this;\n    if (!that.updateDateTime) {\n      that.updateDateTime = setInterval(() => {\n        if (that.posts) {\n          that.posts.forEach((post) => {\n            const date = post.date;\n            post.date = new Date(date);\n          });\n        }\n      }, 60000);\n    }\n  }\n\n  loadEachPostData(po: any) {\n    po.forEach((p) => {\n      let post: any;\n      post = p.data();\n      post.key = p.id;\n      const startDate = new Date(post.date);\n    // Do your operations\n      const endDate   = new Date();\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n      if (seconds > 120) {\n      post.showNewIcon = false;\n    } else {\n      post.showNewIcon = true;\n    }\n      // get reactions list\n      this.firestore.collection('posts').doc(post.key).collection('reactions').snapshotChanges().subscribe((reactions: any) => {\n        post.reactions = [];\n        reactions.forEach(element => {\n        let reaction = element.payload.doc.data();\n        reaction.key = element.payload.doc.id;\n        post.reactions.push(reaction);\n      });\n\n        // Check for Thanks\n        if (reactions.length > 0) {\n        let foundSmiley = false;\n        if (post.reactions !== undefined) {\n            let r = post.reactions.find(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId());\n            foundSmiley = r.reactionType.some(r => r === 'Thanks');\n          }\n        if (foundSmiley) {\n            post.showSmiley = true;\n          } else {\n            post.showSmiley = false;\n          }\n          // Check for Hugs\n        let foundHug = false;\n        if (post.reactions !== undefined) {\n            let r = post.reactions.find(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId())\n            foundHug = r.reactionType.some(r => r === 'Hug');\n          }\n        if (foundHug) {\n            post.showHug = true;\n          } else {\n            post.showHug = false;\n          }\n      }\n     });\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\n      this.addOrUpdatePost(post);\n    });\n  }\n\n  addUpdateOrRemoveMember(member) {\n    if (this.group) {\n      if (this.group.members.indexOf(member.$key) > -1) {\n        // User exists in the group.\n        if (!this.groupMembers) {\n          this.groupMembers = [member];\n        } else {\n          let index = -1;\n          for (let i = 0; i < this.groupMembers.length; i++) {\n            if (this.groupMembers[i].$key === member.$key) {\n              index = i;\n            }\n          }\n          // Add/Update User.\n          if (index > -1) {\n            this.groupMembers[index] = member;\n          } else {\n            this.groupMembers.push(member);\n          }\n        }\n      } else {\n        // User already left the group, remove member from list.\n        let index1 = -1;\n        for (let j = 0; j < this.groupMembers.length; j++) {\n          if (this.groupMembers[j].$key === member.$key) {\n            index1 = j;\n          }\n        }\n        if (index1 > -1) {\n          this.groupMembers.splice(index1, 1);\n        }\n      }\n    }\n  }\n\n  segmentChanged($event) {\n    if (this.tab === 'groups') {\n      this.title = this.group.name; this.getGroupDetailsandMessages();\n    } else if (this.tab === 'posts') {\n      this.title = this.group.name; this.getGroupDetailsandPosts();\n    } else if (this.tab === 'polls') {\n      this.title = this.group.name; this.getPolls();\n    } else if (this.tab === 'resources') {\n      this.title = this.group.name; this.getResources();\n    } else if (this.tab === 'events') {\n      this.title = this.group.name; this.getEvents();\n    } else if (this.tab === 'groupInfo') {\n      this.title = this.group.name;\n    }\n  }\n\n  getPolls() {\n        // Get group posts\n    this.firstDataSetPoll = this.firestore.collection('posts').ref\n                              .where('groupId', '==', this.groupId)\n                              .where('type', '==', 'poll')\n                              .orderBy('date', 'desc')\n                              .limit(5);\n    // Get group posts\n    this.firstDataSetPoll\n    .onSnapshot((po) => {\n      this.lastDataSetPoll = po.docs[po.docs.length - 1];\n      this.polls = [];\n      this.loadEachPollData(po);\n      });\n  }\n\n  loadEachPollData(po: any) {\n    po.forEach((p) => {\n      let post: any;\n      post = p.data();\n      post.key = p.id;\n      const startDate = new Date(post.date);\n    // Do your operations\n      const endDate   = new Date();\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n      if (seconds > 120) {\n      post.showNewIcon = false;\n    } else {\n      post.showNewIcon = true;\n    }\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\n      this.addOrUpdatePoll(post);\n    });\n  }\n\n  viewPoll(poll) {\n    this.router.navigateByUrl('post/' + poll.key);\n  }\n\n  viewResource(resource) {\n    this.router.navigateByUrl('post/' + resource.key);\n  }\n\n  viewPost(post) {\n    this.router.navigateByUrl('post/' + post.key);\n\n  }\n\n  viewEvent(event) {\n    this.router.navigateByUrl('post/' + event.key);\n  }\n\n  newPoll() {\n    this.router.navigateByUrl('/new-poll/' + this.groupId);\n  }\n\n  newPost() {\n    this.router.navigateByUrl('/new-post/' + this.groupId);\n  }\n\n  newResource() {\n    this.router.navigateByUrl('/new-resource/' + this.groupId);\n  }\n\n  newEvent() {\n    this.router.navigateByUrl('/new-event/' + this.groupId);\n  }\n\n  getResources() {\n    // Get group posts\n    this.firstDataSetResources = this.firestore.collection('posts').ref\n    .where('groupId', '==', this.groupId)\n    .where('type', '==', 'resource')\n    .orderBy('date', 'desc')\n    .limit(5);\n    // Get group posts\n    this.firstDataSetResources\n        .onSnapshot((po) => {\n    this.lastDataSetResources = po.docs[po.docs.length - 1];\n    this.resources = [];\n    this.loadEachResourceData(po);\n    });\n  }\n\n  loadEachResourceData(po: any) {\n    po.forEach((p) => {\n      let post: any;\n      post = p.data();\n      post.key = p.id;\n      const startDate = new Date(post.date);\n    // Do your operations\n      const endDate   = new Date();\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n      if (seconds > 120) {\n      post.showNewIcon = false;\n    } else {\n      post.showNewIcon = true;\n    }\n      // get reactions list\n      this.firestore.collection('posts').doc(post.key).collection('reactions').snapshotChanges().subscribe((reactions: any) => {\n        post.reactions = [];\n        reactions.forEach(element => {\n        let reaction = element.payload.doc.data();\n        reaction.key = element.payload.doc.id;\n        post.reactions.push(reaction);\n      });\n\n        // Check for Thanks\n        if (reactions) {\n        let foundSmiley = false;\n        if (post.reactions !== undefined) {\n            foundSmiley = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \n                                          && el.reactionType === 'Thanks');\n          }\n        if (foundSmiley) {\n            post.showSmiley = true;\n          } else {\n            post.showSmiley = false;\n          }\n        // Check for Bookmark\n        let foundBookmark = false;\n        if (post.reactions !== undefined) {\n          foundBookmark = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \n                                        && el.reactionType === 'Bookmark');\n          }\n        if (foundBookmark) {\n            post.showBookmark = true;\n          } else {\n            post.showBookmark = false;\n          }\n      }\n      });\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\n      this.addOrUpdateResource(post);\n    });\n  }\n\n  getEvents() {\n    // Get group posts\n    this.firstDataSetEvent = this.firestore.collection('posts').ref\n    .where('groupId', '==', this.groupId)\n    .where('type', '==', 'event')\n    .orderBy('date', 'desc')\n    .limit(5);\n    // Get group posts\n    this.firstDataSetEvent\n        .onSnapshot((po) => {\n    this.lastDataSetEvent = po.docs[po.docs.length - 1];\n    this.events = [];\n    this.loadEachEventData(po);\n    });\n  }\n\n  loadEachEventData(po: any) {\n    po.forEach((p) => {\n      let post: any;\n      post = p.data();\n      post.key = p.id;\n      const startDate = new Date(post.date);\n    // Do your operations\n      const endDate   = new Date();\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n      if (seconds > 120) {\n      post.showNewIcon = false;\n    } else {\n      post.showNewIcon = true;\n    }\n      // get reactions list\n      this.firestore.collection('posts').doc(post.key).collection('reactions').snapshotChanges().subscribe((reactions: any) => {\n        post.reactions = [];\n        reactions.forEach(element => {\n        let reaction = element.payload.doc.data();\n        reaction.key = element.payload.doc.id;\n        post.reactions.push(reaction);\n      });\n\n        // Check for Thanks\n        if (reactions) {\n        let foundSmiley = false;\n        if (post.reactions !== undefined) {\n            foundSmiley = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \n                                          && el.reactionType === 'Thanks');\n          }\n        if (foundSmiley) {\n            post.showSmiley = true;\n          } else {\n            post.showSmiley = false;\n          }\n         // Check for Checkin\n        let foundCheckin = false;\n        if (post.reactions !== undefined) {\n          foundCheckin = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \n                                        && el.reactionType === 'Checkin');\n          }\n        if (foundCheckin) {\n            post.showCheckin = true;\n          } else {\n            post.showCheckin = false;\n          }\n\n      }\n      });\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\n      this.addOrUpdateEvent(post);\n    });\n  }\n\n  addOrUpdatePoll(poll) {\n    let totalPollCount = 0;\n    // Add total poll count\n    if (poll.pollOptions) {\n      poll.pollOptions.forEach(element => {\n        if (element.members !== undefined) {\n        totalPollCount = totalPollCount + element.members.length;\n        }\n      });\n    }\n    poll.totalPollCount = totalPollCount;\n\n    // Add NEW Icon\n    const startDate = new Date(poll.dateCreated);\n    const endDate   = new Date();\n    const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n\n    if (seconds > 120) {\n      poll.showNewIcon = false;\n    } else {\n      poll.showNewIcon = true;\n    }\n\n    if (!this.polls) {\n      this.polls = [poll];\n    } else {\n      let index = -1;\n      for (let i = 0; i < this.polls.length; i++) {\n        if (this.polls[i].key == poll.key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.polls[index] = poll;\n      } else {\n        this.polls.push(poll);\n      }\n    }\n  }\n\n  addOrUpdateResource(resource) {\n    // Add NEW Icon\n    const startDate = new Date(resource.dateCreated);\n    const endDate   = new Date();\n    const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n\n    if (seconds > 120) {\n      resource.showNewIcon = false;\n    } else {\n      resource.showNewIcon = true;\n    }\n\n    if (!this.resources) {\n      this.resources = [resource];\n    } else {\n      let index = -1;\n      for (let i = 0; i < this.resources.length; i++) {\n        if (this.resources[i].key == resource.key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.resources[index] = resource;\n      } else {\n        this.resources.push(resource);\n      }\n    }\n  }\n\n  addOrUpdatePost(post) {\n    if (!this.posts) {\n      this.posts = [post];\n    } else {\n      let index = -1;\n      for (let i = 0; i < this.posts.length; i++) {\n        if (this.posts[i].key == post.key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.posts[index] = post;\n      } else {\n        this.posts.push(post);\n      }\n    }\n\n  }\n\n  addOrUpdateEvent(event) {\n    // Add NEW Icon\n    const startDate = new Date(event.dateCreated);\n    const endDate   = new Date();\n    const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\n\n    if (seconds > 120) {\n      event.showNewIcon = false;\n    } else {\n      event.showNewIcon = true;\n    }\n\n    if (!this.events) {\n      this.events = [event];\n    } else {\n      let index = -1;\n      for (let i = 0; i < this.events.length; i++) {\n        if (this.events[i].key === event.key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.events[index] = event;\n      } else {\n        this.events.push(event);\n      }\n    }\n  }\n\n  showGroupOptions() {\n  const action = this.actionSheet.create({\n    header: 'Create a new ...',\n    backdropDismiss: true,\n    mode: 'md',\n    cssClass: 'GroupAction',\n    buttons: [{\n      text: 'Post',\n      icon: 'chatbubbles',\n      handler: () => {\n        this.newPost();\n      }\n    }, {\n      text: 'Resource',\n      icon: 'document',\n      handler: () => {\n        this.newResource();\n      }\n    }, {\n      text: 'Poll',\n      icon: 'podium',\n      handler: () => {\n        this.newPoll();\n      }\n    }, {\n      text: 'Event',\n      icon: 'calendar',\n      cssClass: 'cancelAction',\n      handler: () => {\n        this.newEvent();\n      }\n    }]\n  }).then(r => r.present());\n  }\n\n  submitReactionPost(post, reactionType) {\n    switch (reactionType) {\n      case 'Thanks': {\n        if (!post.showSmiley) {\n          this.addPostReaction(post, reactionType);\n          post.showSmiley = true;\n          post.totalReactionCount += 1;\n        } else {\n          this.removePostReaction(post, reactionType);\n          post.showSmiley = false;\n          post.totalReactionCount -= 1;\n        }\n        break;\n      }\n\n      case 'Hug': {\n        if (!post.showHug) {\n          this.addPostReaction(post, reactionType);\n          post.showHug = true;\n          post.totalReactionCount += 1;\n        } else {\n          this.removePostReaction(post, reactionType);\n          post.showHug = false;\n          post.totalReactionCount -= 1;\n        }\n        break;\n      }\n\n      case 'Checkin': {\n        if (!post.showCheckin) {\n          this.addPostReaction(post, reactionType);\n          post.showCheckin = true;\n          post.totalReactionCount += 1;\n        } else {\n          this.removePostReaction(post, reactionType);\n          post.showCheckin = false;\n          post.totalReactionCount -= 1;\n        }\n        break;\n      }\n\n      case 'Bookmark': {\n        if (!post.showBookmark) {\n          this.addPostReaction(post, reactionType);\n          post.showBookmark = true;\n          post.totalReactionCount += 1;\n        } else {\n          this.removePostReaction(post, reactionType);\n          post.showBookmark = false;\n          post.totalReactionCount -= 1;\n        }\n        break;\n      }\n    }\n  }\n\n  addPostReaction(post, reactionType) {\n    // first find the post in the collection\n    let postIndex: any;\n    let p: any;\n    if (post.type === 'general') {\n      postIndex = this.posts.findIndex(el => el.key ===  post.key);\n      p = this.posts[postIndex];\n    } else if (post.type === 'event') {\n      postIndex = this.events.findIndex(el => el.key ===  post.key);\n      p = this.events[postIndex];\n    } else if (post.type === 'poll') {\n      postIndex = this.polls.findIndex(el => el.key ===  post.key);\n      p = this.polls[postIndex];\n    } else if (post.type === 'resource') {\n      postIndex = this.resources.findIndex(el => el.key ===  post.key);\n      p = this.resources[postIndex];\n    }\n    const r = p.reactions.find(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId());\n\n    if (!r) {\n      const react = {\n        dateCreated: new Date(),\n        addedByUser: {\n                      addedByKey: this.dataProvider.getCurrentUserId(),\n                      addedByUsername: this.loggedInUser.username,\n                      addedByImg: this.loggedInUser.img\n                    },\n        reactionType: [reactionType]\n      };\n\n      this.dataProvider.addPostReactions(post.key, react).then(() => {\n        // // Update user notifications.\n        // if (!this.userNotifications.some(p => p !== this.postId)) {\n        //   this.userNotifications.push(this.postId);\n        //   this.dataProvider.getUser(this.loggedInUserId).update({\n        //     userNotifications: this.userNotifications\n        //   });\n        // }\n\n        // // Update user activity.\n        // if (!this.userReactions && this.userReactions.some(p => p !== this.postId)) {\n        //   this.userReactions.push(this.postId);\n        //   this.dataProvider.getUser(this.loggedInUserId).update({\n        //     userReactions: this.userReactions\n        //   });\n        // }\n      });\n    } else {\n      this.firestore.collection('posts').doc(post.key).collection('reactions').doc(r.key).update({\n        reactionType: firebase.default.firestore.FieldValue.arrayUnion(reactionType)\n    }).then(() => {\n      const increment = firebase.default.firestore.FieldValue.increment(1);\n      this.firestore.collection('posts').doc(post.key).update({\n        totalReactionCount : increment\n      });\n    });\n    }\n  }\n\n  removePostReaction(post, reactionType) {\n    let postIndex: any;\n    let p: any;\n    if (post.type === 'general') {\n      postIndex = this.posts.findIndex(el => el.key ===  post.key);\n      p = this.posts[postIndex];\n    } else if (post.type === 'event') {\n      postIndex = this.events.findIndex(el => el.key ===  post.key);\n      p = this.events[postIndex];\n    } else if (post.type === 'poll') {\n      postIndex = this.polls.findIndex(el => el.key ===  post.key);\n      p = this.polls[postIndex];\n    } else if (post.type === 'resource') {\n      postIndex = this.resources.findIndex(el => el.key ===  post.key);\n      p = this.resources[postIndex];\n    }\n\n    const found = false;\n    if (p.reactions !== undefined) {\n      const values = Object.keys(p.reactions).map( function(e) {\n        return p.reactions[e];\n      });\n\n      const reaction = p.reactions.find(\n        el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId());\n\n      if (reaction.reactionType.length === 1 \n        && reaction.reactionType.some(e => e === reactionType)) {\n        this.dataProvider.removePostReaction(post.key, reaction.key);\n      } else {\n        // reaction.reactionType = reaction.reactionType.filter(x => x !== reactionType);\n        // this.dataProvider.updatePostReactions(post.key, reaction, true);\n        this.firestore.collection('posts').doc(post.key).collection('reactions').doc(reaction.key).update({\n          reactionType: firebase.default.firestore.FieldValue.arrayRemove(reactionType)\n      }).then(() => {\n        const increment = firebase.default.firestore.FieldValue.increment(-1);\n        this.firestore.collection('posts').doc(post.key).update({\n          totalReactionCount : increment\n        });\n      });\n      }\n    }\n  }\n\n  async showReactionsList(post) {\n    if (post.totalReactionCount === 0) {\n      return;\n    }\n  // first find the post in the collection\n    let postIndex: any;\n    let p: any;\n    if (post.type === 'general') {\n      postIndex = this.posts.findIndex(el => el.key ===  post.key);\n      p = this.posts[postIndex];\n    } else if (post.type === 'event') {\n      postIndex = this.events.findIndex(el => el.key ===  post.key);\n      p = this.events[postIndex];\n    } else if (post.type === 'poll') {\n      postIndex = this.polls.findIndex(el => el.key ===  post.key);\n      p = this.polls[postIndex];\n    } else if (post.type === 'resource') {\n      postIndex = this.resources.findIndex(el => el.key ===  post.key);\n      p = this.resources[postIndex];\n    }\n\n    const modal = await this.modalCtrl.create({\n      component: ReactionListModalPage,\n      componentProps: {\n        reactions: p.reactions\n      }\n    });\n    return await modal.present();\n  }\n\n  showPostOptions(post) {\n    const action = this.actionSheet.create({\n      header: 'Post options',\n      backdropDismiss: true,\n      mode: 'md',\n      cssClass: 'GroupAction',\n      buttons: this.createPostOptionButtons(post)\n    }).then(r => r.present());\n  }\n\n  followPost(post) {\n    if (!this.notifications) {\n      this.notifications = [post.key];\n    } else {\n      this.notifications.push(post.key);\n    }\n\n    this.dataProvider.getUser(this.loggedInUserId).update({\n      notifications: this.notifications\n    }).then(() => {\n      this.loadingProvider.showToast('You will be notified when there are new replies');\n    });\n  }\n\n  unFollowPost(post) {\n    const index = this.notifications.indexOf(post.key, 0);\n    if (index > -1) {\n      this.notifications.splice(index, 1);\n    }\n\n    this.dataProvider.getUser(this.loggedInUserId).update({\n      notifications: this.notifications\n    }).then(() => {\n      this.loadingProvider.showToast('You won\\'t get notifications for this post');\n    });\n  }\n\n  reportPost(post) {\n    this.dataProvider.addReports(this.loggedInUserId, post).then(() => {\n      this.loadingProvider.showToast('Thank you for reporting the post.');\n    });\n  }\n\n  deletePost(post) {\n    this.alertCtrl.create({\n      header: 'Delete Post',\n      message: 'Are you sure you want to delete this post?',\n      buttons: [\n        {\n          text: 'Cancel'\n        },\n        {\n          text: 'Yes',\n          handler: data => {\n            this.firestore.doc('posts/' + post.key).delete();\n          }\n        }\n      ]\n    }).then(r => r.present());\n  }\n\n  createPostOptionButtons(post) {\n    let buttons = [];\n    \n    let cancelButton = {\n      text: 'Cancel',\n      icon: 'close',\n      role: 'cancel',\n      handler: () => {\n      }\n    };\n\n    let reportButton = {\n      text: 'Report Post',\n      icon: 'flag-outline',\n      handler: () => {\n        this.reportPost(post);\n      }\n      };\n    let notificationButton = {};\n\n    if (post.addedByUser.addedByKey === this.loggedInUserId) {\n      const deletePostButton = {\n        text: 'Delete Post',\n        icon: 'trash-outline',\n        cssClass: 'actionicon',\n        handler: () => {\n          this.deletePost(post);\n        }\n      };\n      buttons.push(deletePostButton);\n    } else {\n      if (this.notifications && this.notifications.some(el => el === post.key)) {\n        notificationButton = {\n            text: 'Turn Off Notifications',\n            icon: 'notifications-off-outline',\n            cssClass: 'actionicon',\n            handler: () => {\n              this.unFollowPost(post);\n            }\n          };\n      } else {\n        notificationButton = {\n          text: 'Turn On Notifications',\n          icon: 'notifications-outline',\n          cssClass: 'actionicon',\n          handler: () => {\n            this.followPost(post);\n          }\n        };\n      }\n      buttons.push(notificationButton);\n  }\n    buttons.push(reportButton);\n    buttons.push(cancelButton);\n    return buttons;\n  }\n\n  loadDataPosts(event) {\n    if ( this.posts.length > this.maxNoOfPosts ) {\n      event.target.disabled = true;\n    } else {\n      if (this.lastDataSetPost) {\n      this.nextDataSetPost = this.firestore.collection('posts').ref\n                          .where('groupId', '==', this.groupId)\n                          .where('type', '==', 'general')\n                          .orderBy('date', 'desc')\n                          .startAfter(this.lastDataSetPost).limit(5);\n      this.nextDataSetPost.onSnapshot((po: any) => {\n      this.lastDataSetPost = po.docs[po.docs.length - 1];\n      if (po.docs.length > 0) {\n        this.loadEachPostData(po);\n      }\n      event.target.complete();\n        });\n      } else {\n        event.target.complete();\n      }\n    }\n  }\n\n  loadDataPolls(event) {\n    if ( this.polls.length > this.maxNoOfPolls ) {\n      event.target.disabled = true;\n    } else {\n      if (this.lastDataSetPoll) {\n      this.nextDataSetPoll = this.firestore.collection('posts').ref\n                          .where('groupId', '==', this.groupId)\n                          .where('type', '==', 'poll')\n                          .orderBy('date', 'desc')\n                          .startAfter(this.lastDataSetPoll).limit(5);\n      this.nextDataSetPoll.onSnapshot((po: any) => {\n      this.lastDataSetPoll = po.docs[po.docs.length - 1];\n      if (po.docs.length > 0) {\n        this.loadEachPollData(po);\n      }\n      event.target.complete();\n        });\n      } else {\n        event.target.complete();\n      }\n    }\n  }\n\n  loadDataEvents(event) {\n    if ( this.events.length > this.maxNoOfEvents ) {\n      event.target.disabled = true;\n    } else {\n      if (this.lastDataSetEvent) {\n      this.nextDataSetEvent = this.firestore.collection('posts').ref\n                          .where('groupId', '==', this.groupId)\n                          .where('type', '==', 'event')\n                          .orderBy('date', 'desc')\n                          .startAfter(this.lastDataSetEvent).limit(5);\n      this.nextDataSetEvent.onSnapshot((po: any) => {\n      this.lastDataSetEvent = po.docs[po.docs.length - 1];\n      if (po.docs.length > 0) {\n        this.loadEachEventData(po);\n      }\n      event.target.complete();\n        });\n      } else {\n        event.target.complete();\n      }\n    }\n  }\n\n  loadDataResources(event) {\n    if ( this.events.length > this.maxNoOfResources ) {\n      event.target.disabled = true;\n    } else {\n      if (this.lastDataSetResources) {\n      this.nextDataSetResources = this.firestore.collection('posts').ref\n                          .where('groupId', '==', this.groupId)\n                          .where('type', '==', 'resource')\n                          .orderBy('date', 'desc')\n                          .startAfter(this.lastDataSetResources).limit(5);\n      this.nextDataSetResources.onSnapshot((po: any) => {\n      this.lastDataSetResources = po.docs[po.docs.length - 1];\n      if (po.docs.length > 0) {\n        this.loadEachResourceData(po);\n      }\n      event.target.complete();\n        });\n      } else {\n        event.target.complete();\n      }\n    }\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title (click)=\\\"groupInfo()\\\">{{title}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\"> \\n      <ion-button *ngIf=\\\"loggedInUserIsMember == true\\\" (click)=\\\"showGroupOptions()\\\" ><ion-icon name=\\\"ellipsis-vertical\\\"></ion-icon></ion-button>\\n   <ion-button *ngIf=\\\"loggedInUserIsMember == false\\\" (click)=\\\"joinGroup()\\\" >Join Group</ion-button>\\n    <ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='posts'\\\" (click)=\\\"newPost()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\n    <ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='polls'\\\" (click)=\\\"newPoll()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\n\\t\\t<ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='resources'\\\" (click)=\\\"newResource()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\n\\t\\t<ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='events'\\\" (click)=\\\"newEvent()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\n\\t</ion-buttons>\\n\\n  </ion-toolbar>\\n\\n  <ion-segment value=\\\"posts\\\" color=\\\"secondary\\\" [(ngModel)]=\\\"tab\\\" (ionChange)=\\\"segmentChanged($event)\\\">\\n\\t\\t<!-- <ion-segment-button value=\\\"group\\\">\\n  \\t\\t\\t<ion-icon name=\\\"chatbubbles\\\"></ion-icon>\\n    </ion-segment-button> -->\\n\\t\\t<!-- <ion-segment-button value=\\\"groupInfo\\\">\\n      <ion-icon name=\\\"ellipsis-vertical\\\"></ion-icon>\\n\\t\\t</ion-segment-button> -->\\n    <ion-segment-button value=\\\"posts\\\">\\n      <ion-icon size=\\\"medium\\\" name=\\\"chatbubbles\\\"></ion-icon>\\n      <!-- <span class=\\\"tab-title\\\">Posts</span> -->\\n    </ion-segment-button>\\n\\t\\t<ion-segment-button value=\\\"polls\\\">\\n      <ion-icon size=\\\"medium\\\" name=\\\"podium\\\"></ion-icon>\\n      <!-- <span class=\\\"tab-title\\\">Polls</span> -->\\n\\t\\t</ion-segment-button>\\n\\t\\t<ion-segment-button value=\\\"resources\\\">\\n      <ion-icon size=\\\"medium\\\" name=\\\"library\\\"></ion-icon>\\n      <!-- <span class=\\\"tab-title\\\">Resources</span> -->\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"events\\\">\\n      <ion-icon size=\\\"medium\\\" name=\\\"calendar\\\"></ion-icon>\\n      <!-- <span class=\\\"tab-title\\\">Events</span> -->\\n    </ion-segment-button>\\n</ion-segment>\\n</ion-header>\\n\\n<ion-content fullscreen>\\n  <div [ngSwitch]=\\\"tab\\\" >\\n\\n  <div *ngSwitchCase=\\\"'posts'\\\">\\n    <!-- No Posts to show -->\\n     <div class=\\\"empty-list\\\" *ngIf=\\\"posts && posts.length == 0\\\">\\n     <h1><ion-icon name=\\\"chatbubbles-outline\\\"></ion-icon></h1>\\n     <p>No new Posts added to this group.</p>\\n     </div>\\n     <!-- Show Posts -->\\n     <div *ngIf=\\\"posts && posts.length > 0\\\" >\\n     <div class=\\\"listing-item\\\" *ngFor=\\\"let item of posts\\\" >\\n      <ion-card>\\n        <ion-card-header>\\n          <ion-row>\\n            <ion-col size=10>\\n           <ion-card-subtitle class=\\\"addedBy\\\">\\n            <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\n             <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\n              <br/>\\n             <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\n            <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\n          </ion-card-subtitle>\\n        </ion-col>\\n        <ion-col size=2>\\n          <ion-buttons>\\n            <ion-button (click)=\\\"showPostOptions(item)\\\">\\n              <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\n            </ion-button>\\n          </ion-buttons>\\n        </ion-col>\\n        </ion-row>\\n        </ion-card-header>\\n        <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'general'\\\">\\n          <div (click)=\\\"viewPost(item)\\\">\\n            <div>\\n              <ion-slides class=\\\"slider\\\" pager=\\\"true\\\" [options]=\\\"slideOptsOne\\\" #slideWithNav>\\n              <ion-slide *ngFor=\\\"let s of item.postMedia\\\">\\n                <div class=\\\"bgSizeContain\\\" \\n                [ngStyle]=\\\"{'background-image':'url('+s+')'}\\\">\\n              </div>\\n              </ion-slide>\\n            </ion-slides>\\n            </div>\\n          <ion-label><b>{{item.title}}.</b> {{item.data.message}} <br/></ion-label>\\n        </div>\\n          <div class=\\\"tags-wrapper\\\">\\n          <ion-row>\\n            <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\n              <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\n            </div>\\n          </ion-row>\\n          </div>\\n          <div class=\\\"reactions\\\">\\n          <ion-row >\\n            <ion-col size=3>\\n              <ion-buttons>\\n                <ion-button (click)=\\\"submitReactionPost(item, 'Thanks')\\\">\\n               <div *ngIf=\\\"item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/smile-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\n               <div *ngIf=\\\"!item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/smile.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\n              </ion-button>\\n              </ion-buttons> \\n            </ion-col>\\n            <ion-col size=3>\\n              <ion-buttons>\\n                <ion-button (click)=\\\"submitReactionPost(item, 'Hug')\\\">\\n               <div *ngIf=\\\"item.showHug\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/hug-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Hug</span></div> \\n               <div *ngIf=\\\"!item.showHug\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/hug.svg\\\" ></ion-icon> <span class=\\\"text\\\">Hug</span></div> \\n              </ion-button>\\n              </ion-buttons> \\n            </ion-col>\\n            <ion-col size=2></ion-col>\\n            <ion-col size=2>\\n              <ion-buttons>\\n                <ion-button (click)=\\\"showReactionsList(item)\\\">\\n              <div><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/smile-active.svg\\\" class=\\\"icon\\\"></ion-icon><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/hug-active.svg\\\" class=\\\"icon\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReactionCount}}</span></div>\\n            </ion-button>\\n          </ion-buttons> \\n            </ion-col>\\n            <ion-col size=2>\\n              <ion-buttons>\\n                <ion-button>\\n              <div><ion-icon size=\\\"small\\\" class=\\\"icon\\\" name=\\\"chatbox-outline\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReviewCount}}</span></div>\\n            </ion-button>\\n          </ion-buttons> \\n            </ion-col>\\n          </ion-row>\\n          </div>\\n        </ion-card-content>\\n      </ion-card>\\n    </div>\\n     </div>\\n    </div>\\n     <div *ngSwitchCase=\\\"'polls'\\\">\\n    <!-- No polls to show -->\\n     <div class=\\\"empty-list\\\" *ngIf=\\\"polls && polls.length == 0\\\">\\n     <h1><ion-icon name=\\\"md-chatbubbles\\\"></ion-icon></h1>\\n     <p>No new polls yet.</p>\\n     </div>\\n     <!-- Show polls -->\\n     <div *ngIf=\\\"polls && polls.length > 0\\\">\\n      <div class=\\\"listing-item\\\" *ngFor=\\\"let item of polls\\\">\\n     <ion-card>\\n      <ion-card-header>\\n        <ion-row>\\n          <ion-col size=10>\\n         <ion-card-subtitle class=\\\"addedBy\\\">\\n          <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\n           <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\n            <br/>\\n           <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\n          <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\n        </ion-card-subtitle>\\n      </ion-col>\\n      <ion-col size=2>\\n        <ion-buttons>\\n          <ion-button (click)=\\\"showPostOptions(item)\\\">\\n            <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\n          </ion-button>\\n        </ion-buttons>\\n      </ion-col>\\n      </ion-row>\\n      </ion-card-header>\\n\\n      <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'poll'\\\" >\\n        <div (click)=\\\"viewPoll(item)\\\">\\n        <b>{{item.title}}.</b><br/>\\n        <ion-row  *ngFor=\\\"let pollOption of item.data.pollOptions\\\">\\n          <ion-col >\\n             <div><ion-icon class=\\\"poll-icon\\\" name=\\\"checkbox-outline\\\"></ion-icon> <span>{{pollOption.name}}</span></div>\\n          </ion-col>\\n        </ion-row>\\n      </div>\\n      <div class=\\\"tags-wrapper\\\">\\n        <ion-row>\\n          <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\n            <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\n          </div>\\n        </ion-row>\\n        </div>\\n\\n              <ion-row class=\\\"info-row\\\" >\\n         <ion-col size=\\\"8\\\">\\n                   <span class=\\\"text\\\" *ngIf=\\\"!item.pollClosed\\\">Poll ends {{item.data.dateEnding.toDate() | DateFormat}}</span> \\n                   <span class=\\\"text\\\" *ngIf=\\\"item.pollClosed\\\">Poll closed</span> \\n                </ion-col>\\n          <ion-col size=\\\"1\\\">\\n          </ion-col>\\n                <ion-col size=\\\"3\\\">\\n                  <div><span class=\\\"text\\\">{{item.totalPollCount}} voted</span></div>\\n                </ion-col>\\n              </ion-row>\\n      </ion-card-content>\\n      </ion-card>\\n   </div>\\n      </div>\\n    </div>\\n    <div *ngSwitchCase=\\\"'resources'\\\">\\n    <!-- No Resources to show -->\\n     <div class=\\\"empty-list\\\" *ngIf=\\\"resources && resources.length == 0\\\">\\n     <h1><ion-icon name=\\\"chatbubbles-outline\\\"></ion-icon></h1>\\n     <p>No new Resources added to this group.</p>\\n     </div>\\n     <!-- Show Resources -->\\n     <div *ngIf=\\\"resources && resources.length > 0\\\" >\\n      <div class=\\\"listing-item\\\" *ngFor=\\\"let item of resources\\\">\\n       <div>\\n     <ion-card>\\n      <ion-card-header>\\n        <ion-row>\\n          <ion-col size=10>\\n         <ion-card-subtitle class=\\\"addedBy\\\">\\n          <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\n           <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\n            <br/>\\n           <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\n          <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\n        </ion-card-subtitle>\\n      </ion-col>\\n      <ion-col size=2>\\n        <ion-buttons>\\n          <ion-button (click)=\\\"showPostOptions(item)\\\">\\n            <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\n          </ion-button>\\n        </ion-buttons>\\n      </ion-col>\\n      </ion-row>\\n      </ion-card-header>\\n      <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'resource'\\\">\\n        <div (click)=\\\"viewResource(item)\\\">\\n        <b>{{item.title}}.</b><br/>\\n        <div *ngIf=\\\"item?.data.type == 'contact'\\\">\\n          {{item.data.name}}<br/>\\n          <div [innerHtml]=\\\"item.data.address\\\"></div><br/>\\n          {{item.data.email}}<br/>\\n          {{item.data.phones}}<br/>\\n        </div>\\n        <div *ngIf=\\\"item?.data.type == 'upload'\\\">\\n          <div *ngIf=\\\"item.data.uploadtype == 'location'\\\" [innerHtml]=\\\"item.data.url\\\"></div>\\n          <div *ngIf=\\\"item.data.uploadtype == 'contact'\\\">\\n          {{item.data.name}}<br/>\\n          {{item.data.address}}<br/>\\n          {{item.data.phones}}<br/>\\n          {{item.data.email}}<br/>\\n          </div>\\n          <div *ngIf=\\\"item.data.uploadtype == 'image'\\\">\\n          <img src=\\\"{{item.data.resolvedurl}}\\\" />\\n          </div>\\n          <div *ngIf=\\\"item.data.uploadtype == 'video'\\\">\\n            <video controls width=\\\"100%\\\" src=\\\"{{item.data.resolvedurl}}\\\" ></video>\\n          </div>\\n        </div>\\n        <div *ngIf=\\\"item?.data.type == 'weblink'\\\">\\n        {{item.data.metatitle}}<br/>\\n        <img [src]=\\\"item.data.metaicon\\\"/> \\n        {{item.data.metadescription}}<br/><br/>\\n        <a href=\\\"{{item.data.metasite}}\\\">{{item.data.metasite}}</a>\\n        </div>\\n      </div>\\n      <div class=\\\"tags-wrapper\\\">\\n        <ion-row>\\n          <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\n            <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\n          </div>\\n        </ion-row>\\n        </div>\\n        <div class=\\\"reactions\\\">\\n           <ion-row>\\n            <ion-col size=3>\\n              <ion-buttons>\\n              <ion-button (click)=\\\"submitReactionPost(item, 'Thanks')\\\">\\n             <div *ngIf=\\\"item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/smile-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\n             <div *ngIf=\\\"!item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/smile.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\n              </ion-button>\\n              </ion-buttons> \\n            </ion-col>\\n            <ion-col size=3>\\n                 <ion-buttons>\\n                 <ion-button (click)=\\\"submitReactionPost(item, 'Bookmark')\\\">\\n                <div *ngIf=\\\"item.showBookmark\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/bookmark-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Bookmark</span></div> \\n                <div *ngIf=\\\"!item.showBookmark\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/bookmark.svg\\\" ></ion-icon> <span class=\\\"text\\\">Bookmark</span></div> \\n                 </ion-button>\\n                 </ion-buttons> \\n            </ion-col>\\n          <ion-col size=2></ion-col>\\n          <ion-col size=2>\\n                 <ion-buttons>\\n                 <ion-button (click)=\\\"showReactionsList(item)\\\">\\n                 <div><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/bookmark-active.svg\\\" class=\\\"icon\\\"></ion-icon><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/smile-active.svg\\\" class=\\\"icon\\\"></ion-icon><span class=\\\"text\\\">{{item.totalReactionCount}}</span></div>\\n               </ion-button>\\n               </ion-buttons> \\n               </ion-col>\\n               <ion-col size=2>\\n                 <ion-buttons>\\n                 <ion-button>\\n                  <div><ion-icon size=\\\"small\\\" class=\\\"icon\\\" name=\\\"chatbox-outline\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReviewCount}}</span></div>\\n                </ion-button>\\n               </ion-buttons> \\n               </ion-col>\\n          </ion-row>\\n        \\n        </div>\\n      </ion-card-content>\\n        </ion-card>\\n           </div>\\n     </div>\\n      </div>\\n    </div>\\n    <div *ngSwitchCase=\\\"'events'\\\">\\n      <!-- No Events to show -->\\n       <div class=\\\"empty-list\\\" *ngIf=\\\"events && events.length == 0\\\">\\n       <h1><ion-icon name=\\\"chatbubbles\\\"></ion-icon></h1>\\n       <p>No new upcoming Events added to this group.</p>\\n       </div>\\n       <!-- Show Events -->\\n       <div *ngIf=\\\"events && events.length > 0\\\" >\\n        <div class=\\\"listing-item\\\" *ngFor=\\\"let item of events\\\">\\n          <ion-card>\\n            <ion-card-header>\\n              <ion-row>\\n                <ion-col size=10>\\n               <ion-card-subtitle class=\\\"addedBy\\\">\\n                <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\n                 <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\n                  <br/>\\n                 <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\n                <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\n              </ion-card-subtitle>\\n            </ion-col>\\n            <ion-col size=2>\\n              <ion-buttons>\\n                <ion-button (click)=\\\"showPostOptions(item)\\\">\\n                  <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\n                </ion-button>\\n              </ion-buttons>\\n            </ion-col>\\n            </ion-row>\\n            </ion-card-header>\\n            <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'event'\\\">\\n              <div (click)=\\\"viewEvent(item)\\\">\\n              <b>{{item.title}}.</b> <br/>{{item.data.eventDate}} at {{item.data.eventTime}}<br/><br/>\\n                {{item.data.address}}<br/><br/>\\n                {{item.data.link}}\\n              </div>\\n              <div class=\\\"tags-wrapper\\\">\\n                <ion-row>\\n                  <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\n                    <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\n                  </div>\\n                </ion-row>\\n                </div>\\n              <div class=\\\"reactions\\\">\\n                <ion-row>\\n                  <ion-col size=3>\\n                    <ion-buttons>\\n                      <ion-button (click)=\\\"submitReactionPost(item, 'Thanks')\\\">\\n                      <div *ngIf=\\\"item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/smile-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\n                      <div *ngIf=\\\"!item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/smile.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\n                    </ion-button>\\n                    </ion-buttons> \\n                  </ion-col>\\n                  <ion-col size=3>\\n                    <ion-buttons>\\n                      <ion-button (click)=\\\"submitReactionPost(item, 'Checkin')\\\">\\n                      <div *ngIf=\\\"item.showCheckin\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/checkin-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Checkin</span></div> \\n                      <div *ngIf=\\\"!item.showCheckin\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/checkin.svg\\\" ></ion-icon> <span class=\\\"text\\\">Checkin</span></div> \\n                    </ion-button>\\n                    </ion-buttons> \\n                  </ion-col>\\n                  <ion-col size=2></ion-col>\\n                  <ion-col size=2>\\n                          <ion-buttons>\\n                            <ion-button (click)=\\\"showReactionsList(item)\\\">\\n                          <div><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/smile-active.svg\\\" class=\\\"icon\\\"></ion-icon><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/checkin-active.svg\\\" class=\\\"icon\\\"></ion-icon><span class=\\\"text\\\">{{item.totalReactionCount}}</span></div>\\n                        </ion-button>\\n                      </ion-buttons> \\n                  </ion-col>\\n                  <ion-col size=2>\\n                          <ion-buttons>\\n                            <ion-button>\\n                              <div><ion-icon size=\\\"small\\\" class=\\\"icon\\\" name=\\\"chatbox-outline\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReviewCount}}</span></div>\\n                            </ion-button>\\n                      </ion-buttons> \\n                  </ion-col>\\n                 </ion-row>\\n             </div>\\n            </ion-card-content>\\n        </ion-card>\\n        </div>\\n       </div>\\n      </div>\\n      <!-- Group Info -->\\n <div  class=\\\"group-info\\\" *ngSwitchCase=\\\"'groupInfo'\\\">\\n  <div>\\n\\n    <div class=\\\"group-img\\\">\\n      <img src=\\\"{{group.img}}\\\">\\n    </div>\\n    <div class=\\\"group-name\\\">    \\n      {{group.name}}\\n    </div>\\n    <div class=\\\"group-desc\\\">\\n      {{group.description}}\\n    </div>\\n</div>\\n<div class=\\\"group-name\\\"> \\nGroup Tags\\n</div>\\n<div class=\\\"group-tags\\\">\\n  <ion-row>\\n    <div class=\\\"tags\\\" *ngFor=\\\"let tag of group.groupTags\\\">\\n      <span class=\\\"item-rating\\\" [attr.ratingBase]=\\\"1\\\">#{{tag}}</span>\\n    </div>\\n  </ion-row>\\n</div>\\n<div class=\\\"group-name\\\"> \\n  Group Members ({{groupMembers.length}})\\n  </div>\\n   <ion-list *ngIf=\\\"groupMembers\\\">\\n    <!-- <ion-item (click)=\\\"addMembers()\\\">\\n     <ion-icon name=\\\"add\\\" item-left></ion-icon>\\n     <h2>Add Members</h2>\\n     </ion-item>-->\\n     <ion-item *ngFor=\\\"let member of groupMembers\\\" (click)=\\\"viewUser(member.$key)\\\">\\n     <ion-avatar>\\n       <img src=\\\"{{member.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\"/>\\n     </ion-avatar>\\n     <ion-label class=\\\"group-member-name\\\">{{member.name}}</ion-label>\\n     <p>{{member.description}}</p>\\n     </ion-item>\\n   </ion-list>\\n   <ion-list-header *ngIf=\\\"loggedInUserIsMember == true\\\" >\\n     More\\n   </ion-list-header>\\n   <ion-list *ngIf=\\\"loggedInUserIsMember == true\\\"  style=\\\"text-align: center;\\\">  \\n     <ion-item no-lines tappable (click)=\\\"leaveGroup()\\\" *ngIf=\\\"groupMembers && groupMembers.length > 1\\\">\\n     Leave Group\\n     </ion-item>\\n     <!-- When there's only one member left, allow deleting of group. -->\\n     <ion-item color=\\\"danger\\\" no-lines tappable (click)=\\\"deleteGroup()\\\" *ngIf=\\\"groupMembers && groupMembers.length <= 1\\\">\\n     Delete Group\\n     </ion-item>\\n   </ion-list>\\n   <p padding style=\\\"color:#aaa\\\">Started {{group.dateCreated | DateFormat}}</p>\\n   </div>\\n  </div>\\n\\n  <ion-infinite-scroll *ngIf=\\\"tab=='posts'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataPosts($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <ion-infinite-scroll *ngIf=\\\"tab=='events'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataEvents($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <ion-infinite-scroll *ngIf=\\\"tab=='polls'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataPolls($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <ion-infinite-scroll *ngIf=\\\"tab=='resources'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataResources($event)\\\">\\n    <ion-infinite-scroll-content\\n      loadingSpinner=\\\"bubbles\\\"\\n      loadingText=\\\"Loading more data...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\\n\";"]}