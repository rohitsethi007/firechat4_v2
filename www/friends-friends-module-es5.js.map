{"version":3,"sources":["webpack:///src/app/friends/friends.page.html","webpack:///src/app/friends/friends.page.ts","webpack:///src/app/friends/friends.module.ts","webpack:///src/app/friends/friends.page.scss"],"names":["FriendsPage","dataProvider","loadingProvider","alertCtrl","firebaseProvider","afAuth","router","friendRequests","requestsSent","friendRequestCount","accounts","excludedIds","ngOnInit","ionViewDidEnter","tab","title","searchFriend","currentUser","getRequests","getCurrentUserId","snapshotChanges","subscribe","requestsRes","payload","requests","data","undefined","length","segmentChanged","$event","getFriends","getFriendRequests","findNewFriends","show","friends","getCurrentUser","then","u","user","account","hide","i","console","log","getUser","friend","friendData","$key","userId","addOrUpdateFriend","index","push","viewUser","navigateByUrl","message","accountRes","forEach","sender","addOrUpdateFriendRequest","receiver","addOrUpdateRequestSent","isFriends","j","searchUser","getUsers","acc","filter","c","key","doc","name","publicVisibility","map","indexOf","get","sendFriendRequest","alert","create","header","buttons","text","handler","r","present","acceptFriendRequest","deleteFriendRequest","cancelFriendRequest","getStatus","selector","template","routes","path","component","FriendsPageModule","imports","forChild","declarations"],"mappings":"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","file":"friends-friends-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"secondary\\\">\\n    <ion-title>{{title}}</ion-title>\\n  </ion-toolbar>\\n  <ion-segment color=\\\"secondary\\\" [(ngModel)]=\\\"tab\\\" (ionChange)=\\\"segmentChanged($event)\\\">\\n    <ion-segment-button value=\\\"friends\\\">\\n      FRIENDS\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"requests\\\">\\n      REQUESTS\\n      <span *ngIf=\\\"friendRequestCount != 0\\\">({{friendRequestCount}})</span>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"search\\\">\\n      FIND NEW\\n    </ion-segment-button>\\n  </ion-segment>\\n</ion-header> \\n\\n<ion-content>\\n  <div [ngSwitch]=\\\"tab\\\">\\n    <div *ngSwitchCase=\\\"'friends'\\\">\\n      <!-- No friends to show -->\\n      <div class=\\\"empty-list\\\" *ngIf=\\\"friends && friends.length == 0\\\">\\n        <h1>\\n          <ion-icon name=\\\"contacts\\\"></ion-icon>\\n        </h1>\\n        <p>You don't have new friend yet</p>\\n      </div>\\n      <!-- Show list of friends -->\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"friends && friends.length > 0\\\">\\n        <!-- <ion-searchbar [(ngModel)]=\\\"searchFriend\\\" placeholder=\\\"Search for friend or username\\\" showCancelButton=\\\"true\\\" cancelButtonText=\\\"Done\\\"></ion-searchbar> -->\\n        <ion-item *ngFor=\\\"let friend of friends | friendFilter:searchFriend\\\"\\n          (click)=\\\"message(friend.$key); $event.stopPropagation();\\\">\\n          <ion-avatar slot=\\\"start\\\">\\n            <img src=\\\"{{friend.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\n          </ion-avatar>\\n          <ion-label>\\n            <ion-text>\\n              <h2>{{friend.name}}</h2>\\n            </ion-text>\\n            <ion-text>\\n              <p>{{friend.description}}</p>\\n            </ion-text>\\n          </ion-label>\\n          <ion-note slot=\\\"end\\\" *ngIf=\\\"friend.online == true\\\">online</ion-note>\\n        </ion-item>\\n      </ion-list>\\n    </div>\\n    <div *ngSwitchCase=\\\"'requests'\\\">\\n      <!-- No friend requests sent or received. -->\\n      <div class=\\\"empty-list\\\"\\n        *ngIf=\\\"(friendRequests && friendRequests.length == 0) && (requestsSent && requestsSent.length == 0)\\\">\\n        <h1>\\n          <ion-icon name=\\\"md-filing\\\"></ion-icon>\\n        </h1>\\n        <p>No New Requests</p>\\n      </div>\\n      <!-- Show friend requests received. -->\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"friendRequests && friendRequests.length > 0\\\">\\n        <ion-item *ngFor=\\\"let friendRequest of friendRequests\\\" (click)=\\\"viewUser(friendRequest.$key)\\\">\\n          <ion-avatar slot=\\\"start\\\">\\n            <img src=\\\"{{friendRequest.img}}\\\" onError=\\\"this.src='http://placehold.it/80x80'\\\">\\n          </ion-avatar>\\n          <ion-label>\\n            <ion-text>\\n              <h2>{{friendRequest.name}}</h2>\\n            </ion-text>\\n            <ion-text>\\n              <p>has sent you a friend request.</p>\\n            </ion-text>\\n          </ion-label>\\n          <ion-button color=\\\"acceptrequest\\\" fill=\\\"outline\\\"\\n            (click)=\\\"acceptFriendRequest(friendRequest); $event.stopPropagation();\\\">\\n            Accept\\n          </ion-button>\\n        </ion-item>\\n      </ion-list>\\n      <!-- Show friend requests sent. -->\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"requestsSent && requestsSent.length > 0\\\">\\n        <ion-item *ngFor=\\\"let requestSent of requestsSent\\\" no-lines tappable (click)=\\\"viewUser(requestSent.$key)\\\">\\n          <ion-avatar slot=\\\"start\\\">\\n            <img src=\\\"{{requestSent.img}}\\\" onError=\\\"this.src='http://placehold.it/80x80'\\\">\\n          </ion-avatar>\\n          <ion-label>\\n            <ion-text>\\n              <h2>{{requestSent.name}}</h2>\\n            </ion-text>\\n            <ion-text>\\n              <p>friend request sent.</p>\\n            </ion-text>\\n          </ion-label>\\n          <ion-button slot=\\\"end\\\" fill=\\\"outline\\\" color=\\\"cancelrequest\\\"\\n            (click)=\\\"cancelFriendRequest(requestSent); $event.stopPropagation();\\\">\\n            Cancel\\n          </ion-button>\\n        </ion-item>\\n      </ion-list>\\n    </div>\\n    <div *ngSwitchCase=\\\"'search'\\\">\\n      <!-- No other users to send friend request right now. -->\\n      <div class=\\\"empty-list\\\" *ngIf=\\\"accounts && (accounts.length == 0 || (accounts.length == excludedIds.length))\\\">\\n        <h1>\\n          <ion-icon name=\\\"md-search\\\"></ion-icon>\\n        </h1>\\n        <p>We can't find new users right now</p>\\n      </div>\\n      <!-- Show other users excluding yourself, and friends with the help of searchFilter pipe. -->\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"accounts && accounts.length > 0\\\">\\n        <ion-searchbar *ngIf=\\\"accounts.length != excludedIds.length\\\" [(ngModel)]=\\\"searchUser\\\" placeholder=\\\"Search User\\\">\\n        </ion-searchbar>\\n        <ion-item *ngFor=\\\"let account of accounts | searchFilter: [excludedIds, searchUser]\\\" no-lines tappable\\n          (click)=\\\"viewUser(account.$key)\\\">\\n          <div slot=\\\"end\\\">\\n            <ion-button color=\\\"sendrequest\\\" fill=\\\"outline\\\"\\n              (click)=\\\"sendFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 0\\\">\\n              add\\n            </ion-button>\\n            <ion-button color=\\\"cancelrequest\\\" fill=\\\"outline\\\"\\n              (click)=\\\"cancelFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 1\\\">\\n              <!-- <ion-icon name=\\\"md-close-circle\\\" class=\\\"danger\\\"></ion-icon> -->\\n              cancel\\n            </ion-button>\\n            <ion-button color=\\\"acceptrequest\\\" fill=\\\"outline\\\"\\n              (click)=\\\"acceptFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 2\\\">\\n              <!-- <ion-icon name=\\\"md-checkmark-circle\\\" class=\\\"success\\\"></ion-icon> -->\\n              accept\\n            </ion-button>\\n          </div>\\n          <ion-avatar slot=\\\"start\\\">\\n            <img src=\\\"{{account.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\n          </ion-avatar>\\n          <ion-label>\\n            <ion-text>\\n              <h2>{{account.name}}</h2>\\n            </ion-text>\\n            <ion-text>\\n              <p>@{{account.username}}</p>\\n            </ion-text>\\n          </ion-label>\\n        </ion-item>\\n      </ion-list>\\n    </div>\\n  </div>\\n</ion-content>\";","import { Component, OnInit } from '@angular/core';\nimport { DataService } from '../services/data.service';\nimport { LoadingService } from '../services/loading.service';\nimport { AlertController } from '@ionic/angular';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { Router } from '@angular/router';\nimport { FirebaseService } from '../services/firebase.service';\nimport { take, takeLast } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-friends',\n  templateUrl: './friends.page.html',\n  styleUrls: ['./friends.page.scss'],\n})\nexport class FriendsPage implements OnInit {\n\n  friends: any;\n  friendRequests: any = [];\n  searchFriend: any;\n  tab: any;\n  title: any;\n  requestsSent: any = [];\n  friendRequestCount = 0;\n\n  alert: any;\n  account: any;\n\n  accounts: any = [];\n  excludedIds: any = [];\n  searchUser: any;\n\n  // FriendsPage\n  // This is the page where the user can search, view, and initiate a chat with their friends.\n  constructor(\n    private dataProvider: DataService,\n    private loadingProvider: LoadingService,\n    public alertCtrl: AlertController,\n    public firebaseProvider: FirebaseService,\n    private afAuth: AngularFireAuth,\n    private router: Router\n  ) { }\n\n  ngOnInit() { }\n\n  ionViewDidEnter() {\n    this.tab = 'friends';\n    this.title = 'Friends';\n    this.searchFriend = '';\n\n    if (this.afAuth.currentUser != null) {\n      this.dataProvider.getRequests(this.dataProvider.getCurrentUserId()).snapshotChanges().subscribe((requestsRes: any) => {\n        if (requestsRes.payload != null) {\n        const requests = requestsRes.payload.data();\n        if (requests != null) {\n          if (requests.friendRequests != null && requests.friendRequests !== undefined) {\n            this.friendRequestCount = requests.friendRequests.length;\n          } else { this.friendRequestCount = 0; }\n        } else { this.friendRequestCount = 0; }\n      }\n      });\n    }\n  }\n\n  segmentChanged($event) {\n    if (this.tab === 'friends') {\n      this.title = 'Friends'; this.getFriends();\n    } else if (this.tab === 'requests') {\n      this.title = 'Friend Requests'; this.getFriendRequests();\n    } else if (this.tab === 'search') {\n      this.title = 'Find New Friends'; this.findNewFriends();\n    }\n  }\n  // openFilter() {\n  //   this.findNewFriends();\n  //   let friendModal = this.modalCtrl.create(FriendsFilterPage);\n  //   friendModal.present();\n  //   friendModal.onDidDismiss(data => {\n  //     console.log(data);\n  //     if (data != undefined) {\n  //       this.accounts = this.accounts.filter(acc => {\n  //         if ((acc.age >= data.ageStart) && (acc.age <= data.ageEnd) && acc.location == data.location)\n  //           return true;\n  //         return false;\n  //       })\n  //     }\n  //   });\n\n  // }\n\n  getFriends() {\n    this.loadingProvider.show();\n    this.friends = [];\n    // Get user data on database and get list of friends.\n    this.dataProvider.getCurrentUser().then((u) => {\n      u.snapshotChanges().subscribe((user: any) => {\n        const account = user.payload.data();\n        this.loadingProvider.hide();\n        if (account != null && account.friends != null) {\n          for (let i = 0; i < account.friends.length; i++) {\n            console.log('friends:', account.friends[i]);\n            this.dataProvider.getUser(account.friends[i]).snapshotChanges().subscribe((friend: any) => {\n              if (friend.payload != null) {\n                const friendData = { $key: friend.payload.data().userId, ...friend.payload.data() };\n                this.addOrUpdateFriend(friendData);\n              }\n            });\n          }\n        } else {\n          this.friends = [];\n        }\n    });\n    })\n  }\n\n  // Add or update friend data for real-time sync.\n  addOrUpdateFriend(friend) {\n    if (!this.friends) {\n      this.friends = [friend];\n    } else {\n      var index = -1;\n      for (let i = 0; i < this.friends.length; i++) {\n        if (this.friends[i].$key === friend.$key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.friends[index] = friend;\n      } else {\n        this.friends.push(friend);\n      }\n    }\n  }\n\n  // Proceed to userInfo page.\n  viewUser(userId) {\n    this.router.navigateByUrl('/userinfo/' + userId);\n  }\n\n  // Proceed to chat page.\n  message(userId) {\n    this.router.navigateByUrl('/message/' + userId);\n  }\n\n\n  // Manageing Friend Requests\n\n  getFriendRequests() {\n    this.friendRequests = [];\n    this.requestsSent = [];\n\n    this.loadingProvider.show();\n    // Get user info\n    this.dataProvider.getCurrentUser().then((u) => {\n      u.snapshotChanges().subscribe((accountRes: any) => {\n        this.account = accountRes.payload.data();\n        // Get friendRequests and requestsSent of the user.\n        this.dataProvider.getRequests(this.account.userId).snapshotChanges().subscribe((requestsRes: any) => {\n          // friendRequests.\n          let requests = requestsRes.payload.data();\n          if (requests != null) {\n            if (requests.friendRequests != null && requests.friendRequests !== undefined) {\n              this.friendRequests = [];\n              this.friendRequestCount = requests.friendRequests.length;\n              requests.friendRequests.forEach((userId) => {\n                this.dataProvider.getUser(userId).snapshotChanges().subscribe((sender: any) => {\n                  sender = { $key: sender.payload.data().userId, ...sender.payload.data() };\n                  this.addOrUpdateFriendRequest(sender);\n                });\n              });\n            } else {\n              this.friendRequests = [];\n            }\n            // requestsSent.\n            if (requests.requestsSent != null && requests.requestsSent != undefined) {\n              this.requestsSent = [];\n              requests.requestsSent.forEach((userId) => {\n                this.dataProvider.getUser(userId).snapshotChanges().subscribe((receiver: any) => {\n                  receiver = { $key: receiver.payload.data().userId, ...receiver.payload.data() };\n                  this.addOrUpdateRequestSent(receiver);\n                });\n              });\n            } else {\n              this.requestsSent = [];\n            }\n          }\n          this.loadingProvider.hide();\n        });\n  \n    });\n    })\n  }\n\n\n\n  // Add or update friend request only if not yet friends.\n  addOrUpdateFriendRequest(sender) {\n    if (!this.friendRequests) {\n      this.friendRequests = [sender];\n    } else {\n      var index = -1;\n      for (var i = 0; i < this.friendRequests.length; i++) {\n        if (this.friendRequests[i].$key === sender.$key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        if (!this.isFriends(sender.$key)) {\n          this.friendRequests[index] = sender;\n        }\n      } else {\n        if (!this.isFriends(sender.$key)) {\n          this.friendRequests.push(sender);\n        }\n      }\n    }\n  }\n\n  // Add or update requests sent only if the user is not yet a friend.\n  addOrUpdateRequestSent(receiver) {\n    if (!this.requestsSent) {\n      this.requestsSent = [receiver];\n    } else {\n      var index = -1;\n      for (var j = 0; j < this.requestsSent.length; j++) {\n        if (this.requestsSent[j].$key == receiver.$key) {\n          index = j;\n        }\n      }\n      if (index > -1) {\n        if (!this.isFriends(receiver.$key)) {\n          this.requestsSent[index] = receiver;\n        }\n      } else {\n        if (!this.isFriends(receiver.$key)) {\n          this.requestsSent.push(receiver);\n        }\n      }\n    }\n  }\n\n\n  findNewFriends() {\n    this.requestsSent = [];\n    this.friendRequests = [];\n    // Initialize\n    this.loadingProvider.show();\n    this.searchUser = '';\n    // Get all users.\n    this.dataProvider.getUsers().snapshotChanges().subscribe((accounts: any) => {\n      // TODO : why is this being called twice??????????????\n      this.loadingProvider.hide();\n      // applying Filters\n      const acc = accounts.filter((c) => {\n        if (c.key == null && c.key === undefined && c.payload.doc.data() == null) { return false; }\n        if (c.payload.doc.data().name === ''\n            || c.payload.doc.data().name === ' '\n            || c.payload.doc.data().name === undefined) {\n              return false;\n        }\n\n        if (c.payload.doc.data().publicVisibility === false) { return false; }\n        return true;\n      });\n\n      this.accounts = acc.map(c => {\n        return { $key: c.payload.doc.data().userId, ...c.payload.doc.data() }\n      });\n\n      this.dataProvider.getCurrentUser().then((u) => {\n        u.snapshotChanges().subscribe((accountRes: any) => {\n          const account = accountRes.payload.data();\n          // Add own userId as exludedIds.\n          this.excludedIds = [];\n          if (this.excludedIds.indexOf(account.userId) === -1) {\n            this.excludedIds.push(account.userId);\n          }\n          // Get friends which will be filtered out from the list using searchFilter pipe pipes/search.ts.\n          if (account != null) {\n            if (account.friends != null) {\n              account.friends.forEach(friend => {\n                if (this.excludedIds.indexOf(friend) === -1) {\n                  this.excludedIds.push(friend);\n                }\n              });\n            }\n          }\n          // Get requests of the currentUser.\n          this.dataProvider.getRequests(account.userId).get().subscribe((requests: any) => {\n            if (requests.payload != null) {\n              this.requestsSent = requests.payload.data().requestsSent;\n              this.friendRequests = requests.payload.data().friendRequests;\n            }\n          });\n      });\n      })\n    });\n  }\n\n  // Send friend request.\n  sendFriendRequest(user) {\n    this.alert = this.alertCtrl.create({\n      header: 'Send Friend Request',\n      message: 'Do you want to send friend request to <b>' + user.name + '</b>?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Send',\n          handler: () => {\n            this.firebaseProvider.sendFriendRequest(user.$key);\n          }\n        }\n      ]\n    }).then(r => r.present());\n  }\n\n  // Accept Friend Request.\n  acceptFriendRequest(user) {\n    this.alert = this.alertCtrl.create({\n      header: 'Confirm Friend Request',\n      message: 'Do you want to accept <b>' + user.name + '</b> as your friend?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Reject Request',\n          handler: () => {\n            this.firebaseProvider.deleteFriendRequest(user.$key);\n            this.getFriendRequests();\n          }\n        },\n        {\n          text: 'Accept Request',\n          handler: () => {\n            this.firebaseProvider.acceptFriendRequest(user.$key);\n            this.getFriendRequests();\n          }\n        }\n      ]\n    }).then(r => r.present());\n  }\n\n  // Cancel Friend Request sent.\n  cancelFriendRequest(user) {\n    this.alert = this.alertCtrl.create({\n      header: 'Friend Request Pending',\n      message: 'Do you want to delete your friend request to <b>' + user.name + '</b>?',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => { }\n        },\n        {\n          text: 'Delete',\n          handler: () => {\n            this.firebaseProvider.cancelFriendRequest(user.$key);\n            this.getFriendRequests();\n          }\n        }\n      ]\n    }).then(r => r.present());\n  }\n\n  // Checks if user is already friends with this user.\n  isFriends(userId) {\n    if (this.account.friends) {\n      if (this.account.friends.indexOf(userId) == -1) {\n        return false;\n      } else {\n        return true;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  // Get the status of the user in relation to the logged in user.\n  getStatus(user) {\n    // Returns:\n    // 0 when user can be requested as friend.\n    // 1 when a friend request was already sent to this user.\n    // 2 when this user has a pending friend request.\n    if (this.requestsSent) {\n      for (let i = 0; i < this.requestsSent.length; i++) {\n        if (this.requestsSent[i] === user.$key) {\n          return 1;\n        }\n      }\n    }\n    if (this.friendRequests) {\n      for (let j = 0; j < this.friendRequests.length; j++) {\n        if (this.friendRequests[j] === user.$key) {\n          return 2;\n        }\n      }\n    }\n    return 0;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FriendsPage } from './friends.page';\nimport { SharedModule } from '../services/share.module';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FriendsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [\n    FriendsPage\n  ]\n})\nexport class FriendsPageModule {}\n","export default \":host {\\n  --page-margin: var(--app-narrow-margin);\\n  --page-border-radius: var(--app-fair-radius);\\n  --page-segment-background: var(--app-background);\\n  --page-segment-indicator-height: 2px;\\n}\\n\\n.user-friends-segment {\\n  --background: var(--page-segment-background);\\n  position: sticky;\\n  top: 0;\\n  z-index: 8;\\n}\\n\\n.user-friends-segment ion-segment-button {\\n  --padding-end: var(--page-margin);\\n  --padding-start: var(--page-margin);\\n  --color: rgba(var(--ion-color-dark-rgb), 0.4);\\n  --indicator-color: var(--ion-color-dark);\\n  text-transform: capitalize;\\n  min-height: calc((var(--page-margin) * 3) - var(--page-segment-indicator-height));\\n}\\n\\nion-searchbar.friends-searchbar {\\n  padding: calc(var(--page-margin) * 1.5) var(--page-margin);\\n}\\n\\n.friends-list {\\n  padding: 0px var(--page-margin);\\n  margin-bottom: calc(var(--page-margin) * 3);\\n}\\n\\n.empty-list-message {\\n  margin: calc(var(--page-margin) * 3);\\n  color: rgba(var(--ion-color-dark-rgb), 0.4);\\n  text-align: center;\\n}\\n\\nion-item.friend-item {\\n  --inner-padding-start: 0px;\\n  --inner-padding-end: 0px;\\n  --padding-start: 0px;\\n  --padding-end: 0px;\\n  --padding-bottom: var(--page-margin);\\n  --inner-padding-bottom: var(--page-margin);\\n}\\n\\nion-item.friend-item:last-child {\\n  --border-style: none;\\n  --padding-bottom: 0px;\\n  --inner-padding-bottom: 0px;\\n}\\n\\nion-item.friend-item .user-details-section {\\n  --ion-grid-column-padding: 0px;\\n  width: 100%;\\n  align-items: center;\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper {\\n  padding-left: var(--page-margin);\\n  padding-right: calc(var(--page-margin) / 2);\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper .user-info:not(:last-child) {\\n  margin-bottom: calc(var(--page-margin) / 2);\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper .user-info .user-name {\\n  margin: 0px;\\n  margin-bottom: 4px;\\n  font-size: 16px;\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper .user-info .user-job {\\n  margin: 0px;\\n  color: rgba(var(--ion-color-dark-rgb), 0.4);\\n  font-size: 14px;\\n}\\n\\nion-item.friend-item .user-details-section .user-actions-wrapper {\\n  font-size: 14px;\\n  max-width: 10ex;\\n  max-width: 10ch;\\n}\\n\\nion-item.friend-item .user-details-section .user-actions-wrapper .user-action {\\n  margin: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZnJpZW5kcy9mcmllbmRzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLHVDQUFBO0VBQ0EsNENBQUE7RUFDQSxnREFBQTtFQUNBLG9DQUFBO0FBREo7O0FBS0U7RUFDRSw0Q0FBQTtFQUNBLGdCQUFBO0VBQ0EsTUFBQTtFQUNBLFVBQUE7QUFGSjs7QUFJSTtFQUNFLGlDQUFBO0VBQ0EsbUNBQUE7RUFDQSw2Q0FBQTtFQUNBLHdDQUFBO0VBRUEsMEJBQUE7RUFDQSxpRkFBQTtBQUhOOztBQU9FO0VBQ0UsMERBQUE7QUFKSjs7QUFPRTtFQUNFLCtCQUFBO0VBQ0EsMkNBQUE7QUFKSjs7QUFPRTtFQUNFLG9DQUFBO0VBQ0EsMkNBQUE7RUFDQSxrQkFBQTtBQUpKOztBQU9FO0VBQ0UsMEJBQUE7RUFDQSx3QkFBQTtFQUNBLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSxvQ0FBQTtFQUNBLDBDQUFBO0FBSko7O0FBTUk7RUFDRSxvQkFBQTtFQUNBLHFCQUFBO0VBQ0EsMkJBQUE7QUFKTjs7QUFPSTtFQUNFLDhCQUFBO0VBRUEsV0FBQTtFQUNBLG1CQUFBO0FBTk47O0FBUU07RUFDRSxnQ0FBQTtFQUNBLDJDQUFBO0VBQ0EsYUFBQTtFQUNBLHNCQUFBO0VBQ0EsdUJBQUE7QUFOUjs7QUFTVTtFQUNFLDJDQUFBO0FBUFo7O0FBVVU7RUFDRSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0FBUlo7O0FBV1U7RUFDRSxXQUFBO0VBQ0EsMkNBQUE7RUFDQSxlQUFBO0FBVFo7O0FBY007RUFDRSxlQUFBO0VBS0EsZUFBQTtFQUNBLGVBQUE7QUFoQlI7O0FBa0JRO0VBQ0UsV0FBQTtBQWhCViIsImZpbGUiOiJzcmMvYXBwL2ZyaWVuZHMvZnJpZW5kcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDdXN0b20gdmFyaWFibGVzXG4vLyBOb3RlOiAgVGhlc2Ugb25lcyB3ZXJlIGFkZGVkIGJ5IHVzIGFuZCBoYXZlIG5vdGhpbmcgdG8gZG8gd2l0aCBJb25pYyBDU1MgQ3VzdG9tIFByb3BlcnRpZXNcbjpob3N0IHtcbiAgICAtLXBhZ2UtbWFyZ2luOiB2YXIoLS1hcHAtbmFycm93LW1hcmdpbik7XG4gICAgLS1wYWdlLWJvcmRlci1yYWRpdXM6IHZhcigtLWFwcC1mYWlyLXJhZGl1cyk7XG4gICAgLS1wYWdlLXNlZ21lbnQtYmFja2dyb3VuZDogdmFyKC0tYXBwLWJhY2tncm91bmQpO1xuICAgIC0tcGFnZS1zZWdtZW50LWluZGljYXRvci1oZWlnaHQ6IDJweDtcbiAgfVxuICBcbiAgLy8gTm90ZTogIEFsbCB0aGUgQ1NTIHZhcmlhYmxlcyBkZWZpbmVkIGJlbG93IGFyZSBvdmVycmlkZXMgb2YgSW9uaWMgZWxlbWVudHMgQ1NTIEN1c3RvbSBQcm9wZXJ0aWVzXG4gIC51c2VyLWZyaWVuZHMtc2VnbWVudCB7XG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLXNlZ21lbnQtYmFja2dyb3VuZCk7XG4gICAgcG9zaXRpb246IHN0aWNreTtcbiAgICB0b3A6IDA7XG4gICAgei1pbmRleDogODtcbiAgXG4gICAgaW9uLXNlZ21lbnQtYnV0dG9uIHtcbiAgICAgIC0tcGFkZGluZy1lbmQ6IHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgICAgIC0tcGFkZGluZy1zdGFydDogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICAgICAgLS1jb2xvcjogcmdiYSh2YXIoLS1pb24tY29sb3ItZGFyay1yZ2IpLCAwLjQpO1xuICAgICAgLS1pbmRpY2F0b3ItY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcbiAgXG4gICAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICAgIG1pbi1oZWlnaHQ6IGNhbGMoKHZhcigtLXBhZ2UtbWFyZ2luKSAqIDMpIC0gdmFyKC0tcGFnZS1zZWdtZW50LWluZGljYXRvci1oZWlnaHQpKTtcbiAgICB9XG4gIH1cbiAgXG4gIGlvbi1zZWFyY2hiYXIuZnJpZW5kcy1zZWFyY2hiYXIge1xuICAgIHBhZGRpbmc6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pICogMS41KSB2YXIoLS1wYWdlLW1hcmdpbik7XG4gIH1cbiAgXG4gIC5mcmllbmRzLWxpc3Qge1xuICAgIHBhZGRpbmc6IDBweCB2YXIoLS1wYWdlLW1hcmdpbik7XG4gICAgbWFyZ2luLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgKiAzKTtcbiAgfVxuICBcbiAgLmVtcHR5LWxpc3QtbWVzc2FnZSB7XG4gICAgbWFyZ2luOiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAqIDMpO1xuICAgIGNvbG9yOiByZ2JhKHZhcigtLWlvbi1jb2xvci1kYXJrLXJnYiksIDAuNCk7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG4gIFxuICBpb24taXRlbS5mcmllbmQtaXRlbSB7XG4gICAgLS1pbm5lci1wYWRkaW5nLXN0YXJ0OiAwcHg7XG4gICAgLS1pbm5lci1wYWRkaW5nLWVuZDogMHB4O1xuICAgIC0tcGFkZGluZy1zdGFydDogMHB4O1xuICAgIC0tcGFkZGluZy1lbmQ6IDBweDtcbiAgICAtLXBhZGRpbmctYm90dG9tOiB2YXIoLS1wYWdlLW1hcmdpbik7XG4gICAgLS1pbm5lci1wYWRkaW5nLWJvdHRvbTogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICBcbiAgICAmOmxhc3QtY2hpbGQge1xuICAgICAgLS1ib3JkZXItc3R5bGU6IG5vbmU7XG4gICAgICAtLXBhZGRpbmctYm90dG9tOiAwcHg7XG4gICAgICAtLWlubmVyLXBhZGRpbmctYm90dG9tOiAwcHg7XG4gICAgfVxuICBcbiAgICAudXNlci1kZXRhaWxzLXNlY3Rpb24ge1xuICAgICAgLS1pb24tZ3JpZC1jb2x1bW4tcGFkZGluZzogMHB4O1xuICBcbiAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgXG4gICAgICAudXNlci1kYXRhLXdyYXBwZXIge1xuICAgICAgICBwYWRkaW5nLWxlZnQ6IHZhcigtLXBhZ2UtbWFyZ2luKTtcbiAgICAgICAgcGFkZGluZy1yaWdodDogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIFxuICAgICAgICAudXNlci1pbmZvIHtcbiAgICAgICAgICAmOm5vdCg6bGFzdC1jaGlsZCkge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKTtcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIC51c2VyLW5hbWUge1xuICAgICAgICAgICAgbWFyZ2luOiAwcHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICAudXNlci1qb2Ige1xuICAgICAgICAgICAgbWFyZ2luOiAwcHg7XG4gICAgICAgICAgICBjb2xvcjogcmdiYSh2YXIoLS1pb24tY29sb3ItZGFyay1yZ2IpLCAwLjQpO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIC51c2VyLWFjdGlvbnMtd3JhcHBlciB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBhbHdheXMgaGF2ZSBzcGFjZSBmb3IgMTAgY2hhcmFjdGVyc1xuICAgICAgICAvLyBBcyBjaCAod2lkdGggb2YgdGhlIGNoYXJhY3RlciAnMCcpIHVuaXQgaXMgbm90IDEwMCUgc3VwcG9ydGVkLCB3ZSB3aWxsIHVzZSBleCAoaGVpZ2h0IG9mIHRoZSAneCcgY2hhcmFjdGVyKSBhcyBhIGZhbGxiYWNrXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly93d3cucXVpcmtzbW9kZS5vcmcvY3NzL3VuaXRzLXZhbHVlcy9cbiAgICAgICAgbWF4LXdpZHRoOiAxMGV4OyAvLyBUaGUgJ3gnIGNoYXJhY3RlciBpcyBzZW1pLXNxdWFyZSBjaGFyXG4gICAgICAgIG1heC13aWR0aDogMTBjaDsgLy8gY2ggaXMgdGhlIG9ubHkgZm9udCB1bml0IGJhc2VkIG9uIHRoZSB3aWR0aCBvZiBjaGFyYWN0ZXJzXG4gIFxuICAgICAgICAudXNlci1hY3Rpb24ge1xuICAgICAgICAgIG1hcmdpbjogMHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gICJdfQ== */\";"]}