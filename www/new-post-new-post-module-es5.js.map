{"version":3,"sources":["webpack:///src/app/new-post/new-post.page.ts","webpack:///src/app/new-post/new-post.module.ts","webpack:///src/app/new-post/new-post.page.scss","webpack:///src/app/new-post/new-post.page.html","webpack:///src/app/validators/checkbox-checked.validator.ts"],"names":["NewPostPage","route","router","dataProvider","imageProvider","loadingProvider","camera","actionSheet","firestore","ngZone","step","userNotifications","userPosts","postMediaImgs","postMediaVideo","validations","title","type","message","tags","postTags","groupId","snapshot","params","id","group","name","postForm","compose","required","tagsSelected","ionViewDidEnter","addOrUpdateUserGroup","groups","index","i","length","key","push","addTagControls","forEach","o","control","controls","ngOnInit","getCurrentUser","then","u","snapshotChanges","subscribe","value","user","payload","data","addedByUser","addedByKey","userId","addedByUsername","username","addedByImg","img","post","date","groupName","totalReactionCount","totalReviewCount","postMedia","collection","ref","where","FieldPath","documentId","get","g","getGroup","groupTags","element","val","isChecked","submitPostForm","show","console","log","Date","addPost","success","postId","posts","undefined","update","getUser","hide","navigateByUrl","selectGroup","attach","create","header","buttons","text","icon","cssClass","handler","getImages","url","run","concat","uploadPostVideo","role","r","present","removeMedia","media","splice","filter","x","selector","template","routes","path","component","NewPostPageModule","imports","forChild","declarations","CheckboxCheckedValidator","min","validator","formArray","totalSelected","map","reduce","prev","next"],"mappings":"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","file":"new-post-new-post-module-es5.js","sourcesContent":["import { Component, OnInit, NgZone } from '@angular/core';\nimport { ActionSheetController, IonSlides } from '@ionic/angular';\nimport { FormArray, FormGroup, Validators, FormControl } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DataService } from '../services/data.service';\nimport { ImageService } from '../services/image.service';\nimport { LoadingService } from '../services/loading.service';\nimport { CheckboxCheckedValidator } from '../validators/checkbox-checked.validator';\nimport { Camera } from '@ionic-native/camera/ngx';\nimport * as firebase from 'firebase/app';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n\n@Component({\n  selector: 'app-new-post',\n  templateUrl: './new-post.page.html',\n  styleUrls: ['./new-post.page.scss'],\n})\nexport class NewPostPage implements OnInit {\n  // @ViewChild('slideWithNav', { static: false }) slideWithNav: IonSlides;\n\n  private postForm: FormGroup;\n  private post: any;\n  private postId: any;\n  private groupId: any;\n  private group: any;\n  private postTags: any;\n  private title: any;\n  private addedByUser: any;\n  private user: any;\n  private step: any = 1;\n  groups: any;\n  userNotifications: any = [];\n  userPosts: any = [];\n  private postMediaImgs: any = [];\n  private postMediaVideo: any = [];\n \n  validations = {\n    title: [\n      { type: 'minlength', message: 'Title should be atleast 5 characters long' },\n      { type: 'maxlength', message: 'Title cannot be more than 20 characters' },\n      { type: 'required', message: 'Title is a required field, atleast 5 characters' }\n    ],\n    message: [\n      { type: 'minlength', message: 'Title should be atleast 10 characters long' },\n      { type: 'maxlength', message: 'Title cannot be more than 100 characters' },\n      { type: 'required', message: 'Message is a required field, atleast 10 characters' }\n    ],\n    tags: [\n      { type: 'required', message: 'Please select at least one tag.' }\n    ]\n    };\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    public dataProvider: DataService,\n    public imageProvider: ImageService,\n    public loadingProvider: LoadingService,\n    public camera: Camera,\n    public actionSheet: ActionSheetController,\n    public firestore: AngularFirestore,\n    private ngZone: NgZone \n  ) {\n    this.postMediaImgs = [];\n    this.postMediaVideo = [];\n    this.postTags = [];\n    this.groupId = this.route.snapshot.params.id;\n    this.group = {name: ''}\n    if (this.groupId === 'undefined') {\n      this.step = 1;\n    } else {\n      this.step = 2;\n    }\n\n    this.postForm = new FormGroup(\n      {\n        title: new FormControl('', Validators.compose([\n            // Validators.minLength(5),\n            // Validators.maxLength(20),\n            Validators.required\n          ])),\n        message: new FormControl('', Validators.compose([\n          // Validators.minLength(10),\n          // Validators.maxLength(100),\n          Validators.required\n        ])),\n         tags: new FormArray([], CheckboxCheckedValidator.tagsSelected(1))\n    });\n   }\n\n  ionViewDidEnter() { }\n\n  addOrUpdateUserGroup(group) {\n    if (!this.groups) {\n      this.groups = [group];\n    } else {\n      let index = -1;\n      for (let i = 0; i < this.groups.length; i++) {\n        if (this.groups[i].key == group.key) {\n          index = i;\n        }\n      }\n      if (index > -1) {\n        this.groups[index] = group;\n      } else {\n        this.groups.push(group);\n      }\n    }\n  }\n\n  addTagControls() {\n    this.postTags.forEach((o, i) => {\n      const control = new FormControl(i === 0); // if first item set to true, else false\n      (this.postForm.controls.tags as FormArray).push(control);\n    });\n  }\n\n  ngOnInit() {\n    this.dataProvider.getCurrentUser().then((u) => {\n      u.snapshotChanges().subscribe((value: any) => {\n        this.user = value.payload.data();\n  \n        this.addedByUser = {\n        addedByKey: value.payload.data().userId,\n        addedByUsername: value.payload.data().username,\n        addedByImg: value.payload.data().img\n      };\n  \n        this.userNotifications = value.payload.data().userNotifications;\n        this.userPosts = value.payload.data().userPosts;\n        this.post = {\n            addedByUser: this.addedByUser,\n            date: '',\n            title: '',\n            postTags: [],\n            groupId: '',\n            groupName: '',\n            type: 'general',\n            data: {},\n            totalReactionCount: 0,\n            totalReviewCount: 0,\n            postMedia: []\n          };\n  \n        if (this.step === 1) {\n            this.title = 'Select a group ...';\n                // Get User Groups List\n            if (this.user.groups) {\n              this.firestore.collection('groups').ref\n              .where(firebase.default.firestore.FieldPath.documentId(), 'in', this.user.groups)\n              .get().then((group: any) => {\n                this.groups = [];\n                group.forEach(g => {\n                  let group: any;\n                  group = g.data();\n                  group.key = g.id;\n                  this.addOrUpdateUserGroup(group);\n                });\n              });\n              }\n            } else {\n              this.title = 'Create a Post in';\n  \n              this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group) => {\n                this.group = group.payload.data();\n                this.group.groupTags.forEach((element: any) => {\n                  this.postTags.push({val: element, isChecked: false});\n                });\n                this.addTagControls();\n              });\n            }\n        });\n    })\n  }\n\n   submitPostForm() {\n    this.loadingProvider.show();\n    console.log('this.group', this.group);\n    // Add post info and date.\n    this.post.date = new Date();\n    this.post.title = this.postForm.value.title;\n    this.post.data.message = this.postForm.value.message;\n    this.post.postTags = [];\n    this.post.postTags = this.postTags;\n    this.post.groupId = this.groupId;\n    this.post.groupName = this.group.name;\n\n  // Add post to database.\n      this.dataProvider.addPost(this.post).then((success) => {\n      const postId = success.id;\n      this.postId = postId;\n\n      // Update group data on the database.\n      if (this.group.posts === undefined) {\n        this.group.posts = [];\n      }\n      this.group.posts.push(this.postId);\n      this.dataProvider.getGroup(this.groupId).update({\n        posts: this.group.posts\n      });\n\n      // Update user notifications.\n      if (!this.userNotifications) {\n        this.userNotifications = [this.postId];\n      } else {\n        this.userNotifications.push(this.postId);\n      }\n      this.dataProvider.getUser(this.addedByUser.addedByKey).update({\n        userNotifications: this.userNotifications\n      });\n\n      // Update user activity.\n      if (!this.userPosts) {\n        this.userPosts = [this.postId];\n      } else {\n        this.userPosts.push(this.postId);\n      }\n      this.dataProvider.getUser(this.addedByUser.addedByKey).update({\n        userPosts: this.userPosts\n      });\n    }).then(() => {\n      // Back.\n      this.loadingProvider.hide();\n      this.router.navigateByUrl('app/tabs/tab1');\n    });;\n\n    \n   }\n\n   selectGroup(groupId) {\n    this.groupId = groupId;\n    this.step = 2;\n    this.title = 'General';\n\n    this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group) => {\n      this.group = group.payload.data();\n      this.group.groupTags.forEach((element: any) => {\n        this.postTags.push({val: element, isChecked: false});\n      });\n      this.addTagControls();\n\n  });\n\n   }\n\n   attach() {\n    this.actionSheet.create({\n      header: 'Attach images',\n     buttons: [{\n        text: 'Photo Library',\n        icon: 'images-outline',\n        cssClass: 'actionicon',\n        handler: () => {\n          this.imageProvider.getImages().then((url) => {\n            this.ngZone.run(() => {\n            this.postMediaImgs = [];\n            this.postMediaVideo = [];\n            url.forEach(element => {\n              this.postMediaImgs = this.postMediaImgs.concat(element);              \n            });\n          });\n          });\n        }\n      },\n      {\n        text: 'Video',\n        icon: 'videocam-outline',\n        cssClass: 'actionicon',\n        handler: () => {\n          this.imageProvider.uploadPostVideo().then(url => {\n            this.postMediaVideo = [];\n            this.postMediaImgs = [];\n            this.ngZone.run(() => {\n            this.postMediaVideo = this.postMediaVideo.concat(url);\n            console.log(url);\n          });\n          });\n        }\n      }\n        ,  {\n        text: 'Cancel',\n        role: 'cancel',\n        handler: () => {\n          console.log('cancelled');\n        }\n      }]\n    }).then(r => r.present());\n  }\n\n  removeMedia(media) {\n    this.postMediaImgs.splice();\n    this.postMediaImgs = this.postMediaImgs.filter(x => x !== media);\n    console.log('this.postMedia:', this.postMediaImgs);\n    // this.imageProvider.deletePostPhoto(media);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { SharedModule } from '../services/share.module';\nimport { NewPostPage } from './new-post.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewPostPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SharedModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [NewPostPage]\n})\nexport class NewPostPageModule {}\n","export default \":host {\\n  --page-margin: var(--app-narrow-margin);\\n}\\n\\n.forms-validations-content .validations-form {\\n  margin-bottom: calc(var(--page-margin) * 2);\\n}\\n\\n.forms-validations-content .validations-form .inputs-list {\\n  padding: var(--page-margin) var(--page-margin) calc(var(--page-margin) * 2);\\n}\\n\\n.forms-validations-content .validations-form .inputs-list .header {\\n  font-size: 14px;\\n}\\n\\n.forms-validations-content .validations-form .inputs-list .error-container .error-message {\\n  margin: calc(var(--page-margin) / 2) 0px;\\n  display: flex;\\n  align-items: center;\\n  color: var(--ion-color-danger);\\n  font-size: 14px;\\n}\\n\\n.forms-validations-content .validations-form .inputs-list .error-container .error-message ion-icon {\\n  padding-inline-end: calc(var(--page-margin) / 2);\\n  flex-shrink: 0;\\n}\\n\\n.forms-validations-content .validations-form .submit-btn {\\n  margin: var(--page-margin);\\n}\\n\\n.forms-validations-content .tags {\\n  padding-right: 5px;\\n  padding-bottom: 5px;\\n}\\n\\n.forms-validations-content .tags .item-rating {\\n  background-color: rgba(var(--page-color-rgb), 0.35);\\n  color: var(--ion-color-lightest);\\n  border-radius: var(--app-narrow-radius);\\n  padding-top: calc(var(--page-margin) / 3);\\n  padding-bottom: calc(var(--page-margin) / 3);\\n  padding-left: calc(var(--page-margin) / 2);\\n  padding-right: calc(var(--page-margin) / 2);\\n  font-size: 12px;\\n  font-weight: 600;\\n  width: 100%;\\n  display: block;\\n  text-align: center;\\n}\\n\\n.forms-validations-content .tags .item-rating[ratingBase=\\\"0\\\"] {\\n  background-color: #bbb2b2;\\n}\\n\\n.forms-validations-content .tags .item-rating[ratingBase=\\\"1\\\"] {\\n  background-color: #e0c77c;\\n}\\n\\n.forms-validations-content .tags ion-checkbox {\\n  margin: 0px;\\n  width: 50px;\\n  align-content: center;\\n  --border-width: 0px;\\n  --color-checked: transparent;\\n  margin-left: 9px;\\n  margin-top: -20px;\\n  display: block;\\n  opacity: 0;\\n}\\n\\n.uploads {\\n  margin: 5px;\\n}\\n\\n.uploads .img-wrap {\\n  position: relative;\\n  display: inline-block;\\n  font-size: 0;\\n  padding: 5px;\\n}\\n\\n.uploads .img-wrap .close {\\n  position: absolute;\\n  top: -2px;\\n  right: -7px;\\n  z-index: 100;\\n  background-color: #FFF;\\n  padding: 5px 2px 2px;\\n  color: #000;\\n  cursor: pointer;\\n  text-align: center;\\n  font-size: 22px;\\n  line-height: 10px;\\n  border-radius: 50%;\\n}\\n\\n.uploads .img-wrap:hover .close {\\n  opacity: 1;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbmV3LXBvc3QvbmV3LXBvc3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUNBQUE7QUFDRjs7QUFHRztFQUNDLDJDQUFBO0FBQUo7O0FBRUk7RUFDRSwyRUFBQTtBQUFOOztBQUVNO0VBQ0UsZUFBQTtBQUFSOztBQUdRO0VBQ0Usd0NBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtFQUNBLGVBQUE7QUFEVjs7QUFHVTtFQUNFLGdEQUFBO0VBQ0EsY0FBQTtBQURaOztBQU9JO0VBQ0UsMEJBQUE7QUFMTjs7QUFTRTtFQUNFLGtCQUFBO0VBQ0EsbUJBQUE7QUFQSjs7QUFRRTtFQUVFLG1EQUFBO0VBQ1EsZ0NBQUE7RUFDQSx1Q0FBQTtFQUNBLHlDQUFBO0VBQ0EsNENBQUE7RUFDQSwwQ0FBQTtFQUNBLDJDQUFBO0VBQ0EsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtBQVBaOztBQVFZO0VBQ0UseUJBQUE7QUFOZDs7QUFRWTtFQUNFLHlCQUFBO0FBTmQ7O0FBU0U7RUFDRSxXQUFBO0VBQ0EsV0FBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSw0QkFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxjQUFBO0VBQ0EsVUFBQTtBQVBKOztBQWFBO0VBQ0UsV0FBQTtBQVZGOztBQVdBO0VBQ0Usa0JBQUE7RUFDQSxxQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FBVEY7O0FBV0E7RUFDRSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLHNCQUFBO0VBQ0Esb0JBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFURjs7QUFXQTtFQUNFLFVBQUE7QUFURiIsImZpbGUiOiJzcmMvYXBwL25ldy1wb3N0L25ldy1wb3N0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgLS1wYWdlLW1hcmdpbjogdmFyKC0tYXBwLW5hcnJvdy1tYXJnaW4pO1xufVxuXG4uZm9ybXMtdmFsaWRhdGlvbnMtY29udGVudCB7XG4gICAudmFsaWRhdGlvbnMtZm9ybSB7XG4gICAgbWFyZ2luLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgKiAyKTtcblxuICAgIC5pbnB1dHMtbGlzdCB7XG4gICAgICBwYWRkaW5nOiB2YXIoLS1wYWdlLW1hcmdpbikgdmFyKC0tcGFnZS1tYXJnaW4pIGNhbGModmFyKC0tcGFnZS1tYXJnaW4pICogMik7XG5cbiAgICAgIC5oZWFkZXIge1xuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICB9XG4gICAgICAuZXJyb3ItY29udGFpbmVyIHtcbiAgICAgICAgLmVycm9yLW1lc3NhZ2Uge1xuICAgICAgICAgIG1hcmdpbjogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKSAwcHg7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG5cbiAgICAgICAgICBpb24taWNvbiB7XG4gICAgICAgICAgICBwYWRkaW5nLWlubGluZS1lbmQ6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XG4gICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC5zdWJtaXQtYnRuIHtcbiAgICAgIG1hcmdpbjogdmFyKC0tcGFnZS1tYXJnaW4pO1xuICAgIH1cbiAgfVxuXG4gIC50YWdzIHtcbiAgICBwYWRkaW5nLXJpZ2h0OiA1cHg7XG4gICAgcGFkZGluZy1ib3R0b206IDVweDtcbiAgLml0ZW0tcmF0aW5nIHtcbiAgICAvLyBEZWZhdWx0IGJhY2tncm91bmRcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLXBhZ2UtY29sb3ItcmdiKSwgLjM1KTtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHRlc3QpO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYXBwLW5hcnJvdy1yYWRpdXMpO1xuICAgICAgICAgICAgcGFkZGluZy10b3A6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMyk7XG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAzKTtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKTtcbiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICZbcmF0aW5nQmFzZT1cIjBcIl0ge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmJiMmIyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJltyYXRpbmdCYXNlPVwiMVwiXSB7XG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGM3N2M7XG4gICAgICAgICAgICB9XG4gIH1cbiAgaW9uLWNoZWNrYm94IHtcbiAgICBtYXJnaW46IDBweDtcbiAgICB3aWR0aDogNTBweDtcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgLS1ib3JkZXItd2lkdGg6IDBweDtcbiAgICAtLWNvbG9yLWNoZWNrZWQ6IHRyYW5zcGFyZW50O1xuICAgIG1hcmdpbi1sZWZ0OiA5cHg7XG4gICAgbWFyZ2luLXRvcDogLTIwcHg7XG4gICAgZGlzcGxheTpibG9jaztcbiAgICBvcGFjaXR5OiAwO1xuICB9XG4gIFxufVxufVxuXG4udXBsb2FkcyB7XG4gIG1hcmdpbjogNXB4O1xuLmltZy13cmFwIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGZvbnQtc2l6ZTogMDtcbiAgcGFkZGluZzogNXB4O1xufVxuLmltZy13cmFwIC5jbG9zZSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAtMnB4O1xuICByaWdodDogLTdweDtcbiAgei1pbmRleDogMTAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZGO1xuICBwYWRkaW5nOiA1cHggMnB4IDJweDtcbiAgY29sb3I6ICMwMDA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDIycHg7XG4gIGxpbmUtaGVpZ2h0OiAxMHB4O1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG59XG4uaW1nLXdyYXA6aG92ZXIgLmNsb3NlIHtcbiAgb3BhY2l0eTogMTtcbn1cbn1cblxuIl19 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{title}}</ion-title>\\n    <ion-buttons *ngIf=\\\"step==2\\\" slot=\\\"end\\\">\\n      <ion-button color=\\\"secondary\\\" class=\\\"ion-text-capitalize\\\" [disabled]=\\\"!postForm.valid\\\" (click)=\\\"submitPostForm()\\\">Post</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>  \\n\\n<ion-content class=\\\"forms-validations-content\\\">\\n  <div *ngIf=\\\"step==1\\\"> \\n    <div *ngIf=\\\"groups && groups.length > 0\\\">\\n      <ion-list>\\n        <ion-item text-wrap *ngFor=\\\"let group of groups\\\" (click)=\\\"selectGroup(group.key)\\\">\\n          <ion-thumbnail slot=\\\"start\\\">\\n            <img src=\\\"{{group.img}}\\\" onError=\\\"this.src='./assets/images/default-group.png'\\\">\\n          </ion-thumbnail>\\n          <ion-label>\\n              <b>{{group.name}}</b><br/>\\n              {{group.description}}\\n          </ion-label>\\n        </ion-item>\\n      </ion-list>\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"step==2\\\">\\n  <form class=\\\"validations-form\\\" [formGroup]=\\\"postForm\\\" (ngSubmit)=\\\"submitPostForm()\\\">\\n    <ion-list class=\\\"inputs-list\\\" lines=\\\"full\\\">\\n      <ion-list-header class=\\\"header\\\">\\n        posting in &nbsp;<ion-label><b>{{group.name}}</b></ion-label>\\n      </ion-list-header>\\n      <ion-item class=\\\"input-item\\\">\\n        <ion-input type=\\\"text\\\" formControlName=\\\"title\\\" placeholder=\\\"Subject\\\"></ion-input>\\n      </ion-item>\\n      <ion-item class=\\\"input-item\\\">\\n        <ion-textarea rows=\\\"6\\\"  formControlName=\\\"message\\\" clearInput placeholder=\\\"Message\\\"></ion-textarea>\\n      </ion-item>\\n      <ion-list class=\\\"inputs-list\\\" lines=\\\"full\\\">\\n        <ion-list-header>\\n          <ion-label class=\\\"header-title\\\">Select relevant tags</ion-label>\\n        </ion-list-header>\\n        <div class=\\\"reviews-wrapper\\\">\\n        <ion-row>\\n          <div class=\\\"tags\\\" formArrayName=\\\"tags\\\" *ngFor=\\\"let entry of postForm.controls.tags.controls; let i = index\\\">\\n            <ion-label *ngIf=\\\"postTags[i] === undefined || !postTags[i].isChecked\\\" class=\\\"item-rating\\\" [attr.ratingBase]=\\\"0\\\">{{postTags[i].val}}</ion-label>\\n            <ion-label *ngIf=\\\"postTags[i] !== undefined && postTags[i].isChecked\\\" class=\\\"item-rating\\\" [attr.ratingBase]=\\\"1\\\">{{postTags[i].val}}</ion-label>  \\n            <ion-checkbox slot=\\\"start\\\" [formControlName]=\\\"i\\\" [(ngModel)]=\\\"postTags[i].isChecked\\\"></ion-checkbox>\\n          </div>\\n        </ion-row>\\n\\n        <div class=\\\"error-container\\\">\\n          <ng-container *ngFor=\\\"let validation of validations.tags\\\">\\n            <div class=\\\"error-message\\\" *ngIf=\\\"postForm.get('tags').hasError(validation.type) && (postForm.get('tags').dirty || postForm.get('tags').touched)\\\">\\n              <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\n              <span>{{ validation.message }}</span>\\n            </div>\\n          </ng-container>\\n        </div>\\n        </div>\\n      </ion-list>\\n\\n    <!-- <ion-button class=\\\"submit-btn\\\" type=\\\"submit\\\" expand=\\\"block\\\" fill=\\\"outline\\\" [disabled]=\\\"!postForm.valid\\\" >Submit</ion-button> -->\\n    </ion-list>\\n  </form>\\n</div>\\n</ion-content>\\n<ion-footer *ngIf=\\\"step==2\\\">\\n  <ion-toolbar>\\n    <ion-row lines=\\\"none\\\" class=\\\"uploads item-text-wrap\\\" *ngIf=\\\"postMediaImgs.length > 0 || postMediaVideo.length > 0\\\">\\n      <div class=\\\"img-wrap\\\" *ngFor=\\\"let media of postMediaImgs\\\">\\n          <ion-thumbnail slot=\\\"start\\\">\\n            <span class=\\\"close\\\" (click)=\\\"removeMedia(media)\\\">&times;</span>\\n            <!-- <ion-img [src]=\\\"media\\\"> -->\\n              <ion-img [src]=\\\"media\\\">\\n              </ion-img>\\n          </ion-thumbnail>\\n        </div>\\n        <div class=\\\"img-wrap\\\" *ngFor=\\\"let media of postMediaVideo\\\">\\n          <ion-thumbnail slot=\\\"start\\\">\\n            <span class=\\\"close\\\" (click)=\\\"removeMedia(media)\\\">&times;</span>\\n            <!-- <ion-img [src]=\\\"media\\\"> -->\\n              <ion-img [src]=\\\"media\\\">\\n              </ion-img>\\n          </ion-thumbnail>\\n        </div>\\n    </ion-row>\\n    <ion-item lines=\\\"none\\\">\\n      <ion-button class=\\\"ion-text-capitalize\\\" fill=\\\"clear\\\" (click)=\\\"attach()\\\">\\n        <ion-icon class=\\\"ion-padding-end\\\" size=\\\"large\\\" name=\\\"camera-outline\\\"></ion-icon>Add photo or video\\n      </ion-button>\\n    </ion-item>\\n  </ion-toolbar>\\n</ion-footer>\\n\";","import { ValidatorFn, FormArray } from '@angular/forms';\n\nexport class CheckboxCheckedValidator {\n\n  static tagsSelected(min) {\n    const validator: ValidatorFn = (formArray: FormArray) => {\n      const totalSelected = formArray.controls\n        .map(control => control.value)\n        .reduce((prev, next) => next ? prev + next : prev, 0);\n      return totalSelected >= min ? null : { required: true };\n    };\n\n    return validator;\n  }\n}\n"]}