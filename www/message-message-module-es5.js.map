{"version":3,"sources":["src/app/message/message.page.html","src/app/message/message.module.ts","src/app/message/message.page.scss","src/app/message/message.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title (click)=\\\"viewUser(userId)\\\">{{title}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [scrollEvents]=\\\"true\\\" #content>\\r\\n  <div class=\\\"messages\\\" #contentArea>\\r\\n    <p class=\\\"center\\\" *ngIf=\\\"startIndex > 0\\\"><span tappable (click)=\\\"loadPreviousMessages()\\\">Load previous\\r\\n        messages</span></p>\\r\\n    <div *ngFor=\\\"let message of messagesToShow\\\">\\r\\n      <div *ngIf=\\\"isSender(message)\\\" class=\\\"chatbox right sender\\\">\\r\\n        <div *ngIf=\\\"message.type == 'text'\\\">\\r\\n          <p style=\\\"margin:0\\\">{{message.message}}</p>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"message.type == 'location'\\\" [innerHtml]=\\\"message.message\\\"></div>\\r\\n        <div *ngIf=\\\"message.type == 'contact'\\\" [innerHtml]=\\\"message.message\\\"></div>\\r\\n        <div *ngIf=\\\"message.type == 'image'\\\">\\r\\n          <img tappable (click)=\\\"enlargeImage(message.message)\\\" src=\\\"{{message.message}}\\\" />\\r\\n        </div>\\r\\n        <div *ngIf=\\\"message.type == 'video'\\\">\\r\\n          <video controls width=\\\"100%\\\">\\r\\n            <source src=\\\"{{message.message}}\\\" type=\\\"video/mp4\\\">\\r\\n          </video>\\r\\n        </div>\\r\\n        <span>{{message.date | DateFormat}}</span>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"!isSender(message)\\\" class=\\\"chatbox left\\\">\\r\\n        <div *ngIf=\\\"message.type == 'text'\\\">\\r\\n          <p style=\\\"margin:0\\\">{{message.message}}</p>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"message.type == 'location'\\\" [innerHtml]=\\\"message.message\\\"></div>\\r\\n        <div *ngIf=\\\"message.type == 'contact'\\\" [innerHtml]=\\\"message.message\\\"></div>\\r\\n        <div *ngIf=\\\"message.type == 'image'\\\">\\r\\n          <img tappable (click)=\\\"enlargeImage(message.message)\\\" src=\\\"{{message.message}}\\\" />\\r\\n        </div>\\r\\n        <div *ngIf=\\\"message.type == 'video'\\\">\\r\\n          <video controls width=\\\"100%\\\">\\r\\n            <source src=\\\"{{message.message}}\\\" type=\\\"video/mp4\\\">\\r\\n          </video>\\r\\n        </div>\\r\\n        <span>{{message.date | DateFormat}}</span>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer>\\r\\n  <ion-toolbar>\\r\\n    <ion-item class=\\\"bottom_bar\\\">\\r\\n      <ion-textarea style=\\\"margin:0\\\" rows=\\\"0\\\" placeholder=\\\"Type your message\\\" [(ngModel)]=\\\"message\\\">\\r\\n      </ion-textarea>\\r\\n      <ion-buttons slot=\\\"end\\\" style=\\\"margin-left:4px;\\\">\\r\\n        <ion-button fill=\\\"clear\\\" (click)=\\\"attach()\\\">\\r\\n          <ion-icon name=\\\"attach\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n        <ion-button color=\\\"primary\\\" fill=\\\"clear\\\" (click)=\\\"send('text')\\\" [disabled]=\\\"!message\\\">\\r\\n          send\\r\\n        </ion-button>\\r\\n      </ion-buttons>\\r\\n    </ion-item>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MessagePage } from './message.page';\r\nimport { SharedModule } from '../services/share.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: MessagePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [MessagePage]\r\n})\r\nexport class MessagePageModule {}\r\n","export default \"ion-textarea {\\n  font-size: 12px;\\n  resize: both;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWVzc2FnZS9DOlxcVXNlcnNcXHJvaGlzZXRoaVxcRG9jdW1lbnRzXFxpb25pY1xcZmlyZWNoYXQ0X3YyL3NyY1xcYXBwXFxtZXNzYWdlXFxtZXNzYWdlLnBhZ2Uuc2NzcyIsInNyYy9hcHAvbWVzc2FnZS9tZXNzYWdlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGVBQUE7RUFDQSxZQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9tZXNzYWdlL21lc3NhZ2UucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLXRleHRhcmVhe1xyXG4gICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgcmVzaXplOiBib3RoO1xyXG59IiwiaW9uLXRleHRhcmVhIHtcbiAgZm9udC1zaXplOiAxMnB4O1xuICByZXNpemU6IGJvdGg7XG59Il19 */\"","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport * as firebase from 'firebase';\r\nimport { DataService } from '../services/data.service';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\nimport { ActionSheetController, AlertController, ModalController, IonContent } from '@ionic/angular';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { ImageService } from '../services/image.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Contacts } from '@ionic-native/contacts/ngx';\r\nimport { Keyboard } from '@ionic-native/keyboard/ngx';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { ImagemodalPage } from '../imagemodal/imagemodal.page';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\n\r\n@Component({\r\n  selector: 'app-message',\r\n  templateUrl: './message.page.html',\r\n  styleUrls: ['./message.page.scss'],\r\n})\r\nexport class MessagePage implements OnInit {\r\n\r\n  @ViewChild(IonContent, null) contentArea: IonContent;\r\n\r\n  userId: any;\r\n  title: any;\r\n  message: any;\r\n  conversationId: any;\r\n  messages: any;\r\n  updateDateTime: any;\r\n  messagesToShow: any;\r\n  startIndex: any = -1;\r\n  // Set number of messages to show.\r\n  numberOfMessages = 10;\r\n  loggedInUserId: any;\r\n\r\n  // MessagePage\r\n  // This is the page where the user can chat with a friend.\r\n  constructor(\r\n    // public navCtrl: NavController,\r\n    // public navParams: NavParams,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    public dataProvider: DataService,\r\n    public firestore: AngularFirestore,\r\n    public loadingProvider: LoadingService,\r\n    public alertCtrl: AlertController,\r\n    public imageProvider: ImageService,\r\n    public modalCtrl: ModalController,\r\n    public camera: Camera,\r\n    public keyboard: Keyboard,\r\n    public actionSheet: ActionSheetController,\r\n    public contacts: Contacts,\r\n    public geolocation: Geolocation\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.scrollBottom();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    \r\n\r\n    this.userId = this.route.snapshot.params.id;\r\n    this.loggedInUserId = firebase.auth().currentUser.uid;\r\n    console.log(this.userId);\r\n\r\n    // Get friend details.\r\n    this.dataProvider.getUser(this.userId).snapshotChanges().subscribe((user: any) => {\r\n      this.title = user.payload.data().name;\r\n    });\r\n\r\n    // Get conversationInfo with friend.\r\n    // tslint:disable-next-line: max-line-length\r\n    this.firestore.doc('/accounts/' + this.loggedInUserId + '/conversations/' + this.userId).snapshotChanges().subscribe((conversation: any) => {\r\n      if (conversation.payload.exists()) {\r\n        // User already have conversation with this friend, get conversation\r\n        this.conversationId = conversation.payload.data().conversationId;\r\n\r\n        // Get conversation\r\n        this.dataProvider.getConversationMessages(this.conversationId).snapshotChanges().subscribe((messagesRes: any) => {\r\n\r\n          let messages = messagesRes.payload.data();\r\n          console.log(messages);\r\n          if (messages == null)\r\n            messages = [];\r\n          if (this.messages) {\r\n            // Just append newly added messages to the bottom of the view.\r\n            if (messages.length > this.messages.length) {\r\n              let message = messages[messages.length - 1];\r\n\r\n              this.dataProvider.getUser(message.sender).snapshotChanges().subscribe((user: any) => {\r\n                message.avatar = user.payload.data().img;\r\n              });\r\n              this.messages.push(message);\r\n              this.messagesToShow.push(message);\r\n            }\r\n          } else {\r\n            // Get all messages, this will be used as reference object for messagesToShow.\r\n            this.messages = [];\r\n            messages.forEach((message) => {\r\n              this.dataProvider.getUser(message.sender).snapshotChanges().subscribe((user: any) => {\r\n                message.avatar = user.payload.data().img;\r\n              });\r\n              this.messages.push(message);\r\n            });\r\n            // Load messages in relation to numOfMessages.\r\n            if (this.startIndex == -1) {\r\n              // Get initial index for numberOfMessages to show.\r\n              if ((this.messages.length - this.numberOfMessages) > 0) {\r\n                this.startIndex = this.messages.length - this.numberOfMessages;\r\n              } else {\r\n                this.startIndex = 0;\r\n              }\r\n            }\r\n            if (!this.messagesToShow) {\r\n              this.messagesToShow = [];\r\n            }\r\n            // Set messagesToShow\r\n            for (var i = this.startIndex; i < this.messages.length; i++) {\r\n              this.messagesToShow.push(this.messages[i]);\r\n            }\r\n            this.loadingProvider.hide();\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    // Update messages' date time elapsed every minute based on Moment.js.\r\n    var that = this;\r\n    if (!that.updateDateTime) {\r\n      that.updateDateTime = setInterval(function () {\r\n        if (that.messages) {\r\n          that.messages.forEach((message) => {\r\n            let date = message.date;\r\n            message.date = new Date(date);\r\n          });\r\n        }\r\n      }, 60000);\r\n    }\r\n\r\n    // this.scrollBottom();\r\n  }\r\n  // Load previous messages in relation to numberOfMessages.\r\n  loadPreviousMessages() {\r\n    var that = this;\r\n    // Show loading.\r\n    this.loadingProvider.show();\r\n    setTimeout(function () {\r\n      // Set startIndex to load more messages.\r\n      if ((that.startIndex - that.numberOfMessages) > -1) {\r\n        that.startIndex -= that.numberOfMessages;\r\n      } else {\r\n        that.startIndex = 0;\r\n      }\r\n      // Refresh our messages list.\r\n      that.messages = null;\r\n      that.messagesToShow = null;\r\n\r\n      that.scrollTop();\r\n\r\n      // Populate list again.\r\n      that.ionViewDidEnter();\r\n    }, 1000);\r\n  }\r\n\r\n  // Update messagesRead when user lefts this page.\r\n  ionViewWillLeave() {\r\n    this.setMessagesRead();\r\n  }\r\n\r\n  // Check if currentPage is active, then update user's messagesRead.\r\n  setMessagesRead() {\r\n    firebase.database().ref('/conversations/' + this.conversationId + '/messages').once('value', snap => {\r\n      console.log(snap.val());\r\n\r\n      if (snap.val() != null) {\r\n        this.firestore.doc('/accounts/' + this.loggedInUserId + '/conversations/' + this.userId).update({\r\n          messagesRead: snap.val().length\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  scrollBottom() {\r\n    console.log(\"Calling Sb\")\r\n    setTimeout(() => {\r\n      if (this.contentArea.scrollToBottom) {\r\n        this.contentArea.scrollToBottom();\r\n      }\r\n    }, 500);\r\n    this.setMessagesRead();\r\n  }\r\n\r\n  scrollTop() {\r\n    console.log(\"Calling St\")\r\n    setTimeout(() => {\r\n      if (this.contentArea.scrollToTop) {\r\n        this.contentArea.scrollToTop();\r\n      }\r\n    }, 500);\r\n  }\r\n\r\n\r\n  // Check if the user is the sender of the message.\r\n  isSender(message) {\r\n    if (message.sender == this.loggedInUserId) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\n  // Send message, if there's no conversation yet, create a new conversation.\r\n  send(type) {\r\n    if (this.message) {\r\n      // User entered a text on messagebox\r\n      if (this.conversationId) {\r\n        let messages = JSON.parse(JSON.stringify(this.messages));\r\n        messages.push({\r\n          date: new Date().toString(),\r\n          sender: this.loggedInUserId,\r\n          type: type,\r\n          message: this.message\r\n        });\r\n\r\n        // Update conversation on database.\r\n        this.dataProvider.getConversation(this.conversationId).update({\r\n          messages: messages\r\n        });\r\n        // Clear messagebox.\r\n        this.message = '';\r\n        this.scrollBottom();\r\n      } else {\r\n        console.log(\"else\")\r\n        // New Conversation with friend.\r\n        var messages = [];\r\n        messages.push({\r\n          date: new Date().toString(),\r\n          sender: this.loggedInUserId,\r\n          type: type,\r\n          message: this.message\r\n        });\r\n        var users = [];\r\n        users.push(this.loggedInUserId);\r\n        users.push(this.userId);\r\n        // Add conversation.\r\n        this.firestore.collection('conversations').add({\r\n          dateCreated: new Date().toString(),\r\n          messages: messages,\r\n          users: users\r\n        }).then((success) => {\r\n          let conversationId = success.id;\r\n          this.message = '';\r\n          // Add conversation reference to the users.\r\n          this.firestore.doc('/accounts/' + this.loggedInUserId + '/conversations/' + this.userId).update({\r\n            conversationId: conversationId,\r\n            messagesRead: 1\r\n          });\r\n          this.firestore.doc('/accounts/' + this.userId + '/conversations/' + this.loggedInUserId).update({\r\n            conversationId: conversationId,\r\n            messagesRead: 0\r\n          });\r\n        });\r\n        this.scrollBottom();\r\n      }\r\n    }\r\n  }\r\n\r\n  viewUser(userId) {\r\n    this.router.navigateByUrl('userinfo/' + userId);\r\n  }\r\n\r\n\r\n  attach() {\r\n    this.actionSheet.create({\r\n      header: 'Choose attachments',\r\n      buttons: [{\r\n        text: 'Camera',\r\n        handler: () => {\r\n          this.imageProvider.uploadPhotoMessage(this.conversationId, this.camera.PictureSourceType.CAMERA).then((url) => {\r\n            this.message = url;\r\n            this.send(\"image\");\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Photo Library',\r\n        handler: () => {\r\n          this.imageProvider.uploadPhotoMessage(this.conversationId, this.camera.PictureSourceType.PHOTOLIBRARY).then((url) => {\r\n            this.message = url;\r\n            this.send(\"image\");\r\n          });\r\n        }\r\n      },\r\n      {\r\n        text: 'Video',\r\n        handler: () => {\r\n          this.imageProvider.uploadVideoMessage(this.conversationId).then(url => {\r\n            this.message = url;\r\n            this.send(\"video\");\r\n          });\r\n        }\r\n      }\r\n        , {\r\n        text: 'Location',\r\n        handler: () => {\r\n          this.geolocation.getCurrentPosition({\r\n            timeout: 5000\r\n          }).then(res => {\r\n            let locationMessage = \"Location:<br> lat:\" + res.coords.latitude + \"<br> lng:\" + res.coords.longitude;\r\n            let mapUrl = \"<a href='https://www.google.com/maps/search/\" + res.coords.latitude + \",\" + res.coords.longitude + \"'>View on Map</a>\";\r\n\r\n            let confirm = this.alertCtrl.create({\r\n              header: 'Your Location',\r\n              message: locationMessage,\r\n              buttons: [{\r\n                text: 'cancel',\r\n                handler: () => {\r\n                  console.log(\"canceled\");\r\n                }\r\n              }, {\r\n                text: 'Share',\r\n                handler: () => {\r\n                  this.message = locationMessage + \"<br>\" + mapUrl;\r\n                  this.send(\"location\");\r\n                }\r\n              }]\r\n            }).then(r => r.present());\r\n          }, locationErr => {\r\n            console.log(\"Location Error\" + JSON.stringify(locationErr));\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Contact',\r\n        handler: () => {\r\n          this.contacts.pickContact().then(data => {\r\n            let name;\r\n            if (data.displayName !== null) name = data.displayName;\r\n            else name = data.name.givenName + \" \" + data.name.familyName;\r\n            this.message = \"<b>Name:</b> \" + name + \"<br><b>Mobile:</b> <a href='tel:\" + data.phoneNumbers[0].value + \"'>\" + data.phoneNumbers[0].value + \"</a>\";\r\n            this.send(\"contact\");\r\n          }, err => {\r\n            console.log(err);\r\n          })\r\n        }\r\n      }, {\r\n        text: 'cancel',\r\n        role: 'cancel',\r\n        handler: () => {\r\n          console.log(\"cancelled\");\r\n        }\r\n      }]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Enlarge image messages.\r\n  enlargeImage(img) {\r\n    this.modalCtrl.create({\r\n      component: ImagemodalPage,\r\n      componentProps: {\r\n        img: img\r\n      }\r\n    }).then(res => {\r\n      res.present();\r\n    })\r\n    // let imageModal = this.modalCtrl.create(ImageModalPage, { img: img });\r\n    // imageModal.present();\r\n  }\r\n\r\n\r\n}\r\n"],"sourceRoot":"webpack:///","file":"message-message-module-es5.js"}