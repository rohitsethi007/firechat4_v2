{"version":3,"sources":["./src/app/friends/friends.page.html","./src/app/friends/friends.module.ts","./src/app/friends/friends.page.scss","./src/app/friends/friends.page.ts"],"names":[],"mappings":"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","file":"friends-friends-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title>{{title}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header> \\r\\n\\r\\n<ion-content>\\r\\n  <ion-segment color=\\\"primary\\\" [(ngModel)]=\\\"tab\\\" (ionChange)=\\\"segmentChanged($event)\\\">\\r\\n    <ion-segment-button value=\\\"friends\\\">\\r\\n      FRIENDS\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"requests\\\">\\r\\n      REQUESTS\\r\\n      <span *ngIf=\\\"friendRequestCount != 0\\\">({{friendRequestCount}})</span>\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"search\\\">\\r\\n      FIND NEW\\r\\n    </ion-segment-button>\\r\\n  </ion-segment>\\r\\n  <div [ngSwitch]=\\\"tab\\\">\\r\\n    <div *ngSwitchCase=\\\"'friends'\\\">\\r\\n      <!-- No friends to show -->\\r\\n      <div class=\\\"empty-list\\\" *ngIf=\\\"friends && friends.length == 0\\\">\\r\\n        <h1>\\r\\n          <ion-icon name=\\\"contacts\\\"></ion-icon>\\r\\n        </h1>\\r\\n        <p>You don't have new friend yet</p>\\r\\n      </div>\\r\\n      <!-- Show list of friends -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"friends && friends.length > 0\\\">\\r\\n        <!-- <ion-searchbar [(ngModel)]=\\\"searchFriend\\\" placeholder=\\\"Search for friend or username\\\" showCancelButton=\\\"true\\\" cancelButtonText=\\\"Done\\\"></ion-searchbar> -->\\r\\n        <ion-item *ngFor=\\\"let friend of friends | friendFilter:searchFriend\\\"\\r\\n          (click)=\\\"message(friend.$key); $event.stopPropagation();\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{friend.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{friend.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>{{friend.description}}</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n          <ion-note slot=\\\"end\\\" *ngIf=\\\"friend.online == true\\\">online</ion-note>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n\\r\\n\\r\\n\\r\\n    <div *ngSwitchCase=\\\"'requests'\\\">\\r\\n      <!-- No friend requests sent or received. -->\\r\\n      <div class=\\\"empty-list\\\"\\r\\n        *ngIf=\\\"(friendRequests && friendRequests.length == 0) && (requestsSent && requestsSent.length == 0)\\\">\\r\\n        <h1>\\r\\n          <ion-icon name=\\\"md-filing\\\"></ion-icon>\\r\\n        </h1>\\r\\n        <p>No New Requests</p>\\r\\n      </div>\\r\\n      <!-- Show friend requests received. -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"friendRequests && friendRequests.length > 0\\\">\\r\\n        <ion-item *ngFor=\\\"let friendRequest of friendRequests\\\" (click)=\\\"viewUser(friendRequest.$key)\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{friendRequest.img}}\\\" onError=\\\"this.src='http://placehold.it/80x80'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{friendRequest.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>has sent you a friend request.</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n          <ion-button color=\\\"acceptrequest\\\" fill=\\\"outline\\\"\\r\\n            (click)=\\\"acceptFriendRequest(friendRequest); $event.stopPropagation();\\\">\\r\\n            Accept\\r\\n          </ion-button>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n      <!-- Show friend requests sent. -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"requestsSent && requestsSent.length > 0\\\">\\r\\n        <ion-item *ngFor=\\\"let requestSent of requestsSent\\\" no-lines tappable (click)=\\\"viewUser(requestSent.$key)\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{requestSent.img}}\\\" onError=\\\"this.src='http://placehold.it/80x80'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{requestSent.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>friend request sent.</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n          <ion-button slot=\\\"end\\\" fill=\\\"outline\\\" color=\\\"cancelrequest\\\"\\r\\n            (click)=\\\"cancelFriendRequest(requestSent); $event.stopPropagation();\\\">\\r\\n            Cancel\\r\\n          </ion-button>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n\\r\\n    <div *ngSwitchCase=\\\"'search'\\\">\\r\\n      <!-- No other users to send friend request right now. -->\\r\\n      <div class=\\\"empty-list\\\" *ngIf=\\\"accounts && (accounts.length == 0 || (accounts.length == excludedIds.length))\\\">\\r\\n        <h1>\\r\\n          <ion-icon name=\\\"md-search\\\"></ion-icon>\\r\\n        </h1>\\r\\n        <p>We can't find new users right now</p>\\r\\n      </div>\\r\\n      <!-- Show other users excluding yourself, and friends with the help of searchFilter pipe. -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"accounts && accounts.length > 0\\\">\\r\\n        <ion-searchbar *ngIf=\\\"accounts.length != excludedIds.length\\\" [(ngModel)]=\\\"searchUser\\\" placeholder=\\\"Search User\\\">\\r\\n        </ion-searchbar>\\r\\n        <ion-item *ngFor=\\\"let account of accounts | searchFilter: [excludedIds, searchUser]\\\" no-lines tappable\\r\\n          (click)=\\\"viewUser(account.$key)\\\">\\r\\n          <div slot=\\\"end\\\">\\r\\n            <ion-button color=\\\"sendrequest\\\" fill=\\\"outline\\\"\\r\\n              (click)=\\\"sendFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 0\\\">\\r\\n              add\\r\\n            </ion-button>\\r\\n            <ion-button color=\\\"cancelrequest\\\" fill=\\\"outline\\\"\\r\\n              (click)=\\\"cancelFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 1\\\">\\r\\n              <!-- <ion-icon name=\\\"md-close-circle\\\" class=\\\"danger\\\"></ion-icon> -->\\r\\n              cancel\\r\\n            </ion-button>\\r\\n            <ion-button color=\\\"acceptrequest\\\" fill=\\\"outline\\\"\\r\\n              (click)=\\\"acceptFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 2\\\">\\r\\n              <!-- <ion-icon name=\\\"md-checkmark-circle\\\" class=\\\"success\\\"></ion-icon> -->\\r\\n              accept\\r\\n            </ion-button>\\r\\n          </div>\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{account.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{account.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>@{{account.username}}</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FriendsPage } from './friends.page';\r\nimport { SharedModule } from '../services/share.module';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FriendsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [\r\n    FriendsPage\r\n  ]\r\n})\r\nexport class FriendsPageModule {}\r\n","export default \"input {\\n  border: 1px solid #eee !important;\\n  background: #eee !important;\\n}\\n\\n.searchbar-search-icon {\\n  display: none !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZnJpZW5kcy9DOlxcVXNlcnNcXHJvaGlzZXRoaVxcRG9jdW1lbnRzXFxpb25pY1xcZmlyZWNoYXQ0X3YyL3NyY1xcYXBwXFxmcmllbmRzXFxmcmllbmRzLnBhZ2Uuc2NzcyIsInNyYy9hcHAvZnJpZW5kcy9mcmllbmRzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlDQUFBO0VBQ0EsMkJBQUE7QUNDSjs7QURDQTtFQUNJLHdCQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC9mcmllbmRzL2ZyaWVuZHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW5wdXR7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlICFpbXBvcnRhbnQ7XHJcbiAgICBiYWNrZ3JvdW5kOiAjZWVlICFpbXBvcnRhbnQ7XHJcbn1cclxuLnNlYXJjaGJhci1zZWFyY2gtaWNvbntcclxuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxufSIsImlucHV0IHtcbiAgYm9yZGVyOiAxcHggc29saWQgI2VlZSAhaW1wb3J0YW50O1xuICBiYWNrZ3JvdW5kOiAjZWVlICFpbXBvcnRhbnQ7XG59XG5cbi5zZWFyY2hiYXItc2VhcmNoLWljb24ge1xuICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { DataService } from '../services/data.service';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Router } from '@angular/router';\r\nimport { FirebaseService } from '../services/firebase.service';\r\n\r\n@Component({\r\n  selector: 'app-friends',\r\n  templateUrl: './friends.page.html',\r\n  styleUrls: ['./friends.page.scss'],\r\n})\r\nexport class FriendsPage implements OnInit {\r\n\r\n  friends: any;\r\n  friendRequests: any = [];\r\n  searchFriend: any;\r\n  tab: any;\r\n  title: any;\r\n  requestsSent: any = [];\r\n  friendRequestCount = 0;\r\n\r\n  alert: any;\r\n  account: any;\r\n\r\n  accounts: any = [];\r\n  excludedIds: any = [];\r\n  searchUser: any;\r\n\r\n  // FriendsPage\r\n  // This is the page where the user can search, view, and initiate a chat with their friends.\r\n  constructor(\r\n    private dataProvider: DataService,\r\n    private loadingProvider: LoadingService,\r\n    public alertCtrl: AlertController,\r\n    public firebaseProvider: FirebaseService,\r\n    private afAuth: AngularFireAuth,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.tab = \"friends\";\r\n    this.title = \"Friends\";\r\n\r\n    this.searchFriend = '';\r\n    if (this.afAuth.auth.currentUser != null) {\r\n      this.dataProvider.getRequests(this.afAuth.auth.currentUser.uid).snapshotChanges().subscribe((requestsRes: any) => {\r\n        let requests = requestsRes.payload.val();\r\n        console.log(requests);\r\n        if (requests != null) {\r\n          if (requests.friendRequests != null && requests.friendRequests != undefined)\r\n            this.friendRequestCount = requests.friendRequests.length;\r\n          else this.friendRequestCount = 0\r\n        }\r\n        else this.friendRequestCount = 0;\r\n        console.log(this.friendRequestCount);\r\n      });\r\n      this.getFriends();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  segmentChanged($event) {\r\n    if (this.tab == 'friends') {\r\n      this.title = \"Friends\"; this.getFriends();\r\n    }\r\n    else if (this.tab == 'requests') {\r\n      this.title = \"Friend Requests\"; this.getFriendRequests();\r\n    }\r\n    else if (this.tab == 'search') {\r\n      this.title = \"Find New Friends\"; this.findNewFriends();\r\n    }\r\n  }\r\n  // openFilter() {\r\n  //   this.findNewFriends();\r\n  //   let friendModal = this.modalCtrl.create(FriendsFilterPage);\r\n  //   friendModal.present();\r\n  //   friendModal.onDidDismiss(data => {\r\n  //     console.log(data);\r\n  //     if (data != undefined) {\r\n  //       this.accounts = this.accounts.filter(acc => {\r\n  //         if ((acc.age >= data.ageStart) && (acc.age <= data.ageEnd) && acc.location == data.location)\r\n  //           return true;\r\n  //         return false;\r\n  //       })\r\n  //     }\r\n  //   });\r\n\r\n  // }\r\n  getFriends() {\r\n    this.loadingProvider.show();\r\n    this.friends = [];\r\n    // Get user data on database and get list of friends.\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((account: any) => {\r\n      console.log(account);\r\n      this.loadingProvider.hide();\r\n      if (account.payload.val() != null && account.payload.val().friends != null) {\r\n        for (var i = 0; i < account.payload.val().friends.length; i++) {\r\n          this.dataProvider.getUser(account.payload.val().friends[i]).snapshotChanges().subscribe((friend) => {\r\n            if (friend.key != null) {\r\n              let friendData = { $key: friend.key, ...friend.payload.val() };\r\n              this.addOrUpdateFriend(friendData);\r\n            }\r\n          });\r\n        }\r\n      } else {\r\n        this.friends = [];\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  // Add or update friend data for real-time sync.\r\n  addOrUpdateFriend(friend) {\r\n    console.log(friend)\r\n    if (!this.friends) {\r\n      this.friends = [friend];\r\n    } else {\r\n      var index = -1;\r\n      for (var i = 0; i < this.friends.length; i++) {\r\n        if (this.friends[i].$key == friend.$key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.friends[index] = friend;\r\n      } else {\r\n        this.friends.push(friend);\r\n      }\r\n    }\r\n    console.log(this.friends);\r\n  }\r\n\r\n  // Proceed to userInfo page.\r\n  viewUser(userId) {\r\n    console.log(userId);\r\n    this.router.navigateByUrl('/userinfo/' + userId);\r\n  }\r\n\r\n  // Proceed to chat page.\r\n  message(userId) {\r\n    this.router.navigateByUrl('/message/' + userId);\r\n  }\r\n\r\n\r\n  // Manageing Friend Requests\r\n\r\n  getFriendRequests() {\r\n    this.friendRequests = [];\r\n    this.requestsSent = [];\r\n\r\n    this.loadingProvider.show();\r\n    // Get user info\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((account) => {\r\n      this.account = account.payload.val();\r\n      console.log(this.account);\r\n      // Get friendRequests and requestsSent of the user.\r\n      this.dataProvider.getRequests(this.account.userId).snapshotChanges().subscribe((requestsRes: any) => {\r\n        // friendRequests.\r\n        let requests = requestsRes.payload.val();\r\n        if (requests != null) {\r\n          if (requests.friendRequests != null && requests.friendRequests != undefined) {\r\n            this.friendRequests = [];\r\n            this.friendRequestCount = requests.friendRequests.length;\r\n            requests.friendRequests.forEach((userId) => {\r\n              this.dataProvider.getUser(userId).snapshotChanges().subscribe((sender: any) => {\r\n                sender = { $key: sender.key, ...sender.payload.val() };\r\n                this.addOrUpdateFriendRequest(sender);\r\n              });\r\n            });\r\n          } else {\r\n            this.friendRequests = [];\r\n          }\r\n          // requestsSent.\r\n          if (requests.requestsSent != null && requests.requestsSent != undefined) {\r\n            this.requestsSent = [];\r\n            requests.requestsSent.forEach((userId) => {\r\n              this.dataProvider.getUser(userId).snapshotChanges().subscribe((receiver: any) => {\r\n                receiver = { $key: receiver.key, ...receiver.payload.val() };\r\n                this.addOrUpdateRequestSent(receiver);\r\n              });\r\n            });\r\n          } else {\r\n            this.requestsSent = [];\r\n          }\r\n        }\r\n        this.loadingProvider.hide();\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n\r\n  // Add or update friend request only if not yet friends.\r\n  addOrUpdateFriendRequest(sender) {\r\n    if (!this.friendRequests) {\r\n      this.friendRequests = [sender];\r\n    } else {\r\n      var index = -1;\r\n      for (var i = 0; i < this.friendRequests.length; i++) {\r\n        if (this.friendRequests[i].$key == sender.$key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        if (!this.isFriends(sender.$key))\r\n          this.friendRequests[index] = sender;\r\n      } else {\r\n        if (!this.isFriends(sender.$key))\r\n          this.friendRequests.push(sender);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add or update requests sent only if the user is not yet a friend.\r\n  addOrUpdateRequestSent(receiver) {\r\n    if (!this.requestsSent) {\r\n      this.requestsSent = [receiver];\r\n    } else {\r\n      var index = -1;\r\n      for (var j = 0; j < this.requestsSent.length; j++) {\r\n        if (this.requestsSent[j].$key == receiver.$key) {\r\n          index = j;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        if (!this.isFriends(receiver.$key))\r\n          this.requestsSent[index] = receiver;\r\n      } else {\r\n        if (!this.isFriends(receiver.$key))\r\n          this.requestsSent.push(receiver);\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  findNewFriends() {\r\n    this.requestsSent = [];\r\n    this.friendRequests = [];\r\n    // Initialize\r\n    this.loadingProvider.show();\r\n    this.searchUser = '';\r\n    // Get all users.\r\n    this.dataProvider.getUsers().snapshotChanges().subscribe((accounts: any) => {\r\n      this.loadingProvider.hide();\r\n\r\n      // applying Filters\r\n\r\n      let acc = accounts.filter((c) => {\r\n        if (c.key == null && c.key == undefined && c.payload.val() == null) return false;\r\n        if (c.payload.val().name == '' || c.payload.val().name == ' ' || c.payload.val().name == undefined) return false;\r\n        if (c.payload.val().publicVisibility == false) return false;\r\n        return true;\r\n      });\r\n\r\n      this.accounts = acc.map(c => {\r\n        return { $key: c.key, ...c.payload.val() }\r\n      })\r\n\r\n\r\n      this.dataProvider.getCurrentUser().snapshotChanges().subscribe((account: any) => {\r\n        // Add own userId as exludedIds.\r\n        // console.log(account.payload.val());\r\n        this.excludedIds = [];\r\n        this.account = account.payload.val();\r\n        if (this.excludedIds.indexOf(account.key) == -1) {\r\n          this.excludedIds.push(account.key);\r\n        }\r\n        // Get friends which will be filtered out from the list using searchFilter pipe pipes/search.ts.\r\n        if (account.payload.val() != null) {\r\n          // console.log(account.payload.val().friends);\r\n          if (account.payload.val().friends != null) {\r\n            account.payload.val().friends.forEach(friend => {\r\n              if (this.excludedIds.indexOf(friend) == -1) {\r\n                this.excludedIds.push(friend);\r\n              }\r\n            });\r\n          }\r\n        }\r\n        // Get requests of the currentUser.\r\n        this.dataProvider.getRequests(account.key).snapshotChanges().subscribe((requests: any) => {\r\n          if (requests.payload.val() != null) {\r\n            this.requestsSent = requests.payload.val().requestsSent;\r\n            this.friendRequests = requests.payload.val().friendRequests;\r\n          }\r\n        });\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  // Send friend request.\r\n  sendFriendRequest(user) {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Send Friend Request',\r\n      message: 'Do you want to send friend request to <b>' + user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Send',\r\n          handler: () => {\r\n            this.firebaseProvider.sendFriendRequest(user.$key);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Accept Friend Request.\r\n  acceptFriendRequest(user) {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Confirm Friend Request',\r\n      message: 'Do you want to accept <b>' + user.name + '</b> as your friend?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Reject Request',\r\n          handler: () => {\r\n            this.firebaseProvider.deleteFriendRequest(user.$key);\r\n            this.getFriendRequests();\r\n          }\r\n        },\r\n        {\r\n          text: 'Accept Request',\r\n          handler: () => {\r\n            this.firebaseProvider.acceptFriendRequest(user.$key);\r\n            this.getFriendRequests();\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Cancel Friend Request sent.\r\n  cancelFriendRequest(user) {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Friend Request Pending',\r\n      message: 'Do you want to delete your friend request to <b>' + user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Delete',\r\n          handler: () => {\r\n            this.firebaseProvider.cancelFriendRequest(user.$key);\r\n            this.getFriendRequests();\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Checks if user is already friends with this user.\r\n  isFriends(userId) {\r\n    if (this.account.friends) {\r\n      if (this.account.friends.indexOf(userId) == -1) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Get the status of the user in relation to the logged in user.\r\n  getStatus(user) {\r\n    // Returns:\r\n    // 0 when user can be requested as friend.\r\n    // 1 when a friend request was already sent to this user.\r\n    // 2 when this user has a pending friend request.\r\n    if (this.requestsSent) {\r\n      for (var i = 0; i < this.requestsSent.length; i++) {\r\n        if (this.requestsSent[i] == user.$key) {\r\n          return 1;\r\n        }\r\n      }\r\n    }\r\n    if (this.friendRequests) {\r\n      for (var j = 0; j < this.friendRequests.length; j++) {\r\n        if (this.friendRequests[j] == user.$key) {\r\n          return 2;\r\n        }\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}