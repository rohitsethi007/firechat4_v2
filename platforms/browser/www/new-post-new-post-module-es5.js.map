{"version":3,"sources":["webpack:///src/app/new-post/new-post.page.ts","webpack:///src/app/new-post/new-post.module.ts","webpack:///src/app/new-post/new-post.page.scss","webpack:///src/app/new-post/new-post.page.html","webpack:///src/app/validators/checkbox-checked.validator.ts"],"names":["NewPostPage","route","router","dataProvider","imageProvider","loadingProvider","camera","actionSheet","firestore","step","userNotifications","userPosts","postMedia","validations","title","type","message","tags","postTags","groupId","snapshot","params","id","group","name","postForm","compose","required","tagsSelected","groups","index","i","length","key","push","forEach","o","control","controls","getCurrentUser","snapshotChanges","subscribe","value","user","payload","data","addedByUser","addedByKey","userId","addedByUsername","username","addedByImg","img","post","date","groupName","totalReactionCount","totalReviewCount","collection","ref","where","FieldPath","documentId","get","then","g","addOrUpdateUserGroup","getGroup","groupTags","element","val","isChecked","addTagControls","show","console","log","Date","addPost","success","postId","posts","undefined","update","getUser","hide","navigateByUrl","create","header","buttons","text","handler","uploadPostPhoto","PictureSourceType","CAMERA","url","getImages","concat","uploadPostVideo","role","r","present","media","splice","filter","x","deletePostPhoto","selector","template","routes","path","component","NewPostPageModule","imports","forChild","declarations","CheckboxCheckedValidator","min","validator","formArray","totalSelected","map","reduce","prev","next"],"mappings":"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","file":"new-post-new-post-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActionSheetController, IonSlides } from '@ionic/angular';\r\nimport { FormArray, FormGroup, Validators, FormControl } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { DataService } from '../services/data.service';\r\nimport { ImageService } from '../services/image.service';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { CheckboxCheckedValidator } from '../validators/checkbox-checked.validator';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\nimport * as firebase from 'firebase/app';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\n\r\n@Component({\r\n  selector: 'app-new-post',\r\n  templateUrl: './new-post.page.html',\r\n  styleUrls: ['./new-post.page.scss'],\r\n})\r\nexport class NewPostPage implements OnInit {\r\n  // @ViewChild('slideWithNav', { static: false }) slideWithNav: IonSlides;\r\n\r\n  private postForm: FormGroup;\r\n  private post: any;\r\n  private postId: any;\r\n  private groupId: any;\r\n  private group: any;\r\n  private postTags: any;\r\n  private title: any;\r\n  private addedByUser: any;\r\n  private user: any;\r\n  private step: any = 1;\r\n  groups: any;\r\n  userNotifications: any = [];\r\n  userPosts: any = [];\r\n  private postMedia: any = [];\r\n \r\n  validations = {\r\n    title: [\r\n      { type: 'minlength', message: 'Title should be atleast 5 characters long' },\r\n      { type: 'maxlength', message: 'Title cannot be more than 20 characters' },\r\n      { type: 'required', message: 'Title is a required field, atleast 5 characters' }\r\n    ],\r\n    message: [\r\n      { type: 'minlength', message: 'Title should be atleast 10 characters long' },\r\n      { type: 'maxlength', message: 'Title cannot be more than 100 characters' },\r\n      { type: 'required', message: 'Message is a required field, atleast 10 characters' }\r\n    ],\r\n    tags: [\r\n      { type: 'required', message: 'Please select at least one tag.' }\r\n    ]\r\n    };\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public dataProvider: DataService,\r\n    public imageProvider: ImageService,\r\n    public loadingProvider: LoadingService,\r\n    public camera: Camera,\r\n    public actionSheet: ActionSheetController,\r\n    public firestore: AngularFirestore\r\n  ) {\r\n    this.postMedia = [];\r\n    this.postTags = [];\r\n    this.groupId = this.route.snapshot.params.id;\r\n    this.group = {name: ''}\r\n    if (this.groupId === 'undefined') {\r\n      this.step = 1;\r\n    } else {\r\n      this.step = 2;\r\n    }\r\n\r\n    this.postForm = new FormGroup(\r\n      {\r\n        title: new FormControl('', Validators.compose([\r\n            // Validators.minLength(5),\r\n            // Validators.maxLength(20),\r\n            Validators.required\r\n          ])),\r\n        message: new FormControl('', Validators.compose([\r\n          // Validators.minLength(10),\r\n          // Validators.maxLength(100),\r\n          Validators.required\r\n        ])),\r\n         tags: new FormArray([], CheckboxCheckedValidator.tagsSelected(1))\r\n    });\r\n   }\r\n\r\n  ionViewDidEnter() { }\r\n\r\n  addOrUpdateUserGroup(group) {\r\n    if (!this.groups) {\r\n      this.groups = [group];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.groups.length; i++) {\r\n        if (this.groups[i].key == group.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.groups[index] = group;\r\n      } else {\r\n        this.groups.push(group);\r\n      }\r\n    }\r\n  }\r\n\r\n  addTagControls() {\r\n    this.postTags.forEach((o, i) => {\r\n      const control = new FormControl(i === 0); // if first item set to true, else false\r\n      (this.postForm.controls.tags as FormArray).push(control);\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((value: any) => {\r\n      this.user = value.payload.data();\r\n\r\n      this.addedByUser = {\r\n      addedByKey: value.payload.data().userId,\r\n      addedByUsername: value.payload.data().username,\r\n      addedByImg: value.payload.data().img\r\n    };\r\n\r\n      this.userNotifications = value.payload.data().userNotifications;\r\n      this.userPosts = value.payload.data().userPosts;\r\n      this.post = {\r\n          addedByUser: this.addedByUser,\r\n          date: '',\r\n          title: '',\r\n          postTags: [],\r\n          groupId: '',\r\n          groupName: '',\r\n          type: 'general',\r\n          data: {},\r\n          totalReactionCount: 0,\r\n          totalReviewCount: 0,\r\n          postMedia: []\r\n        };\r\n\r\n      if (this.step === 1) {\r\n          this.title = 'Select a group ...';\r\n              // Get User Groups List\r\n          if (this.user.groups) {\r\n            this.firestore.collection('groups').ref\r\n            .where(firebase.firestore.FieldPath.documentId(), 'in', this.user.groups)\r\n            .get().then((group: any) => {\r\n              this.groups = [];\r\n              group.forEach(g => {\r\n                let group: any;\r\n                group = g.data();\r\n                group.key = g.id;\r\n                this.addOrUpdateUserGroup(group);\r\n              });\r\n            });\r\n            }\r\n          } else {\r\n            this.title = 'Create a Post in';\r\n\r\n            this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group) => {\r\n              this.group = group.payload.data();\r\n              this.group.groupTags.forEach((element: any) => {\r\n                this.postTags.push({val: element, isChecked: false});\r\n              });\r\n              this.addTagControls();\r\n            });\r\n          }\r\n      });\r\n  }\r\n\r\n   submitPostForm() {\r\n    this.loadingProvider.show();\r\n    console.log('this.group', this.group);\r\n    // Add post info and date.\r\n    this.post.date = new Date();\r\n    this.post.title = this.postForm.value.title;\r\n    this.post.postTags = [];\r\n    this.post.postTags = this.postTags;\r\n    this.post.groupId = this.groupId;\r\n    this.post.groupName = this.group.name;\r\n    this.post.postMedia = this.postMedia;\r\n    // get specific data for type post\r\n    this.post.data = {\r\n        message: this.postForm.value.message\r\n      };\r\n\r\n\r\n    // Add post to database.\r\n    this.dataProvider.addPost(this.post).then((success) => {\r\n        const postId = success.id;\r\n        this.postId = postId;\r\n\r\n        // Update group data on the database.\r\n        if (this.group.posts === undefined) {\r\n          this.group.posts = [];\r\n        }\r\n        this.group.posts.push(this.postId);\r\n        this.dataProvider.getGroup(this.groupId).update({\r\n          posts: this.group.posts\r\n        });\r\n\r\n        // Update user notifications.\r\n        if (!this.userNotifications) {\r\n          this.userNotifications = [this.postId];\r\n        } else {\r\n          this.userNotifications.push(this.postId);\r\n        }\r\n        this.dataProvider.getUser(this.addedByUser.addedByKey).update({\r\n          userNotifications: this.userNotifications\r\n        });\r\n\r\n        // Update user activity.\r\n        if (!this.userPosts) {\r\n          this.userPosts = [this.postId];\r\n        } else {\r\n          this.userPosts.push(this.postId);\r\n        }\r\n        this.dataProvider.getUser(this.addedByUser.addedByKey).update({\r\n          userPosts: this.userPosts\r\n        });\r\n      }).then(() => {\r\n        // Back.\r\n        this.loadingProvider.hide();\r\n        this.router.navigateByUrl('tabs/tab1');\r\n      });;\r\n\r\n   }\r\n\r\n   selectGroup(groupId) {\r\n    this.groupId = groupId;\r\n    this.step = 2;\r\n    this.title = 'General';\r\n\r\n    this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group) => {\r\n      this.group = group.payload.data();\r\n      this.group.groupTags.forEach((element: any) => {\r\n        this.postTags.push({val: element, isChecked: false});\r\n      });\r\n      this.addTagControls();\r\n\r\n  });\r\n\r\n   }\r\n\r\n   attach() {\r\n    this.actionSheet.create({\r\n      header: 'Attach images',\r\n      buttons: [{\r\n        text: 'Camera',\r\n        handler: () => {\r\n          this.imageProvider.uploadPostPhoto(this.camera.PictureSourceType.CAMERA).then((url) => {\r\n            this.postMedia.push(url);\r\n            console.log(url);\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Photo Library',\r\n        handler: () => {\r\n          this.imageProvider.getImages().then((url) => {\r\n            this.postMedia = this.postMedia.concat(url);\r\n            console.log(url);\r\n          });\r\n        }\r\n      },\r\n      {\r\n        text: 'Video',\r\n        handler: () => {\r\n          this.imageProvider.uploadPostVideo().then(url => {\r\n            this.postMedia(url);\r\n            console.log(url);\r\n          });\r\n        }\r\n      }\r\n        ,  {\r\n        text: 'Cancel',\r\n        role: 'cancel',\r\n        handler: () => {\r\n          console.log('cancelled');\r\n        }\r\n      }]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  removeMedia(media) {\r\n    this.postMedia.splice();\r\n    this.postMedia = this.postMedia.filter(x => x !== media);\r\n    console.log('this.postMedia:', this.postMedia);\r\n    this.imageProvider.deletePostPhoto(media);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SharedModule } from '../services/share.module';\r\nimport { NewPostPage } from './new-post.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NewPostPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [NewPostPage]\r\n})\r\nexport class NewPostPageModule {}\r\n","export default \":host {\\n  --page-margin: var(--app-narrow-margin);\\n}\\n\\n.forms-validations-content .validations-form {\\n  margin-bottom: calc(var(--page-margin) * 2);\\n}\\n\\n.forms-validations-content .validations-form .inputs-list {\\n  padding: var(--page-margin) var(--page-margin) calc(var(--page-margin) * 2);\\n}\\n\\n.forms-validations-content .validations-form .inputs-list .header {\\n  font-size: 14px;\\n}\\n\\n.forms-validations-content .validations-form .inputs-list .error-container .error-message {\\n  margin: calc(var(--page-margin) / 2) 0px;\\n  display: flex;\\n  align-items: center;\\n  color: var(--ion-color-danger);\\n  font-size: 14px;\\n}\\n\\n.forms-validations-content .validations-form .inputs-list .error-container .error-message ion-icon {\\n  -webkit-padding-end: calc(var(--page-margin) / 2);\\n          padding-inline-end: calc(var(--page-margin) / 2);\\n  flex-shrink: 0;\\n}\\n\\n.forms-validations-content .validations-form .submit-btn {\\n  margin: var(--page-margin);\\n}\\n\\n.forms-validations-content .tags {\\n  padding-right: 5px;\\n  padding-bottom: 5px;\\n}\\n\\n.forms-validations-content .tags .item-rating {\\n  background-color: rgba(var(--page-color-rgb), 0.35);\\n  color: var(--ion-color-lightest);\\n  border-radius: var(--app-narrow-radius);\\n  padding-top: calc(var(--page-margin) / 3);\\n  padding-bottom: calc(var(--page-margin) / 3);\\n  padding-left: calc(var(--page-margin) / 2);\\n  padding-right: calc(var(--page-margin) / 2);\\n  font-size: 12px;\\n  font-weight: 600;\\n  width: 100%;\\n  display: block;\\n  text-align: center;\\n}\\n\\n.forms-validations-content .tags .item-rating[ratingBase=\\\"0\\\"] {\\n  background-color: #bbb2b2;\\n}\\n\\n.forms-validations-content .tags .item-rating[ratingBase=\\\"1\\\"] {\\n  background-color: #e0c77c;\\n}\\n\\n.forms-validations-content .tags ion-checkbox {\\n  margin: 0px;\\n  width: 50px;\\n  align-content: center;\\n  --border-width: 0px;\\n  --color-checked: transparent;\\n  margin-left: 9px;\\n  margin-top: -20px;\\n  display: block;\\n  opacity: 0;\\n}\\n\\n.uploads {\\n  margin: 5px;\\n}\\n\\n.uploads .img-wrap {\\n  position: relative;\\n  display: inline-block;\\n  font-size: 0;\\n  padding: 5px;\\n}\\n\\n.uploads .img-wrap .close {\\n  position: absolute;\\n  top: -2px;\\n  right: -7px;\\n  z-index: 100;\\n  background-color: #FFF;\\n  padding: 5px 2px 2px;\\n  color: #000;\\n  cursor: pointer;\\n  text-align: center;\\n  font-size: 22px;\\n  line-height: 10px;\\n  border-radius: 50%;\\n}\\n\\n.uploads .img-wrap:hover .close {\\n  opacity: 1;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbmV3LXBvc3QvbmV3LXBvc3QucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsdUNBQUE7QUFDRjs7QUFHRztFQUNDLDJDQUFBO0FBQUo7O0FBRUk7RUFDRSwyRUFBQTtBQUFOOztBQUVNO0VBQ0UsZUFBQTtBQUFSOztBQUdRO0VBQ0Usd0NBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtFQUNBLGVBQUE7QUFEVjs7QUFHVTtFQUNFLGlEQUFBO1VBQUEsZ0RBQUE7RUFDQSxjQUFBO0FBRFo7O0FBT0k7RUFDRSwwQkFBQTtBQUxOOztBQVNFO0VBQ0Usa0JBQUE7RUFDQSxtQkFBQTtBQVBKOztBQVFFO0VBRUUsbURBQUE7RUFDUSxnQ0FBQTtFQUNBLHVDQUFBO0VBQ0EseUNBQUE7RUFDQSw0Q0FBQTtFQUNBLDBDQUFBO0VBQ0EsMkNBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0FBUFo7O0FBUVk7RUFDRSx5QkFBQTtBQU5kOztBQVFZO0VBQ0UseUJBQUE7QUFOZDs7QUFTRTtFQUNFLFdBQUE7RUFDQSxXQUFBO0VBQ0EscUJBQUE7RUFDQSxtQkFBQTtFQUNBLDRCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGNBQUE7RUFDQSxVQUFBO0FBUEo7O0FBYUE7RUFDRSxXQUFBO0FBVkY7O0FBV0E7RUFDRSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7QUFURjs7QUFXQTtFQUNFLGtCQUFBO0VBQ0EsU0FBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0Esc0JBQUE7RUFDQSxvQkFBQTtFQUNBLFdBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtBQVRGOztBQVdBO0VBQ0UsVUFBQTtBQVRGIiwiZmlsZSI6InNyYy9hcHAvbmV3LXBvc3QvbmV3LXBvc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIC0tcGFnZS1tYXJnaW46IHZhcigtLWFwcC1uYXJyb3ctbWFyZ2luKTtcclxufVxyXG5cclxuLmZvcm1zLXZhbGlkYXRpb25zLWNvbnRlbnQge1xyXG4gICAudmFsaWRhdGlvbnMtZm9ybSB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAqIDIpO1xyXG5cclxuICAgIC5pbnB1dHMtbGlzdCB7XHJcbiAgICAgIHBhZGRpbmc6IHZhcigtLXBhZ2UtbWFyZ2luKSB2YXIoLS1wYWdlLW1hcmdpbikgY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgKiAyKTtcclxuXHJcbiAgICAgIC5oZWFkZXIge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgICAgfVxyXG4gICAgICAuZXJyb3ItY29udGFpbmVyIHtcclxuICAgICAgICAuZXJyb3ItbWVzc2FnZSB7XHJcbiAgICAgICAgICBtYXJnaW46IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMikgMHB4O1xyXG4gICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcik7XHJcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcblxyXG4gICAgICAgICAgaW9uLWljb24ge1xyXG4gICAgICAgICAgICBwYWRkaW5nLWlubGluZS1lbmQ6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XHJcbiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLnN1Ym1pdC1idG4ge1xyXG4gICAgICBtYXJnaW46IHZhcigtLXBhZ2UtbWFyZ2luKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC50YWdzIHtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDVweDtcclxuICAgIHBhZGRpbmctYm90dG9tOiA1cHg7XHJcbiAgLml0ZW0tcmF0aW5nIHtcclxuICAgIC8vIERlZmF1bHQgYmFja2dyb3VuZFxyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1wYWdlLWNvbG9yLXJnYiksIC4zNSk7XHJcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItbGlnaHRlc3QpO1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1hcHAtbmFycm93LXJhZGl1cyk7XHJcbiAgICAgICAgICAgIHBhZGRpbmctdG9wOiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDMpO1xyXG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAzKTtcclxuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDIpO1xyXG4gICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDIpO1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAmW3JhdGluZ0Jhc2U9XCIwXCJdIHtcclxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYmJiMmIyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICZbcmF0aW5nQmFzZT1cIjFcIl0ge1xyXG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlMGM3N2M7XHJcbiAgICAgICAgICAgIH1cclxuICB9XHJcbiAgaW9uLWNoZWNrYm94IHtcclxuICAgIG1hcmdpbjogMHB4O1xyXG4gICAgd2lkdGg6IDUwcHg7XHJcbiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XHJcbiAgICAtLWJvcmRlci13aWR0aDogMHB4O1xyXG4gICAgLS1jb2xvci1jaGVja2VkOiB0cmFuc3BhcmVudDtcclxuICAgIG1hcmdpbi1sZWZ0OiA5cHg7XHJcbiAgICBtYXJnaW4tdG9wOiAtMjBweDtcclxuICAgIGRpc3BsYXk6YmxvY2s7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gIH1cclxuICBcclxufVxyXG59XHJcblxyXG4udXBsb2FkcyB7XHJcbiAgbWFyZ2luOiA1cHg7XHJcbi5pbWctd3JhcCB7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICBmb250LXNpemU6IDA7XHJcbiAgcGFkZGluZzogNXB4O1xyXG59XHJcbi5pbWctd3JhcCAuY2xvc2Uge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IC0ycHg7XHJcbiAgcmlnaHQ6IC03cHg7XHJcbiAgei1pbmRleDogMTAwO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNGRkY7XHJcbiAgcGFkZGluZzogNXB4IDJweCAycHg7XHJcbiAgY29sb3I6ICMwMDA7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBmb250LXNpemU6IDIycHg7XHJcbiAgbGluZS1oZWlnaHQ6IDEwcHg7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG59XHJcbi5pbWctd3JhcDpob3ZlciAuY2xvc2Uge1xyXG4gIG9wYWNpdHk6IDE7XHJcbn1cclxufVxyXG5cclxuIl19 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{title}}</ion-title>\\r\\n    <ion-buttons *ngIf=\\\"step==2\\\" slot=\\\"end\\\">\\r\\n      <ion-button color=\\\"secondary\\\" class=\\\"ion-text-capitalize\\\" [disabled]=\\\"!postForm.valid\\\" (click)=\\\"submitPostForm()\\\">Post</ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>  \\r\\n\\r\\n<ion-content class=\\\"forms-validations-content\\\">\\r\\n  <div *ngIf=\\\"step==1\\\"> \\r\\n    <div *ngIf=\\\"groups && groups.length > 0\\\">\\r\\n      <ion-list>\\r\\n        <ion-item text-wrap *ngFor=\\\"let group of groups\\\" (click)=\\\"selectGroup(group.$key)\\\">\\r\\n          <ion-thumbnail slot=\\\"start\\\">\\r\\n            <img src=\\\"{{group.img}}\\\" onError=\\\"this.src='./assets/images/default-group.png'\\\">\\r\\n          </ion-thumbnail>\\r\\n          <ion-label>\\r\\n              <b>{{group.name}}</b><br/>\\r\\n              {{group.description}}\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"step==2\\\">\\r\\n  <form class=\\\"validations-form\\\" [formGroup]=\\\"postForm\\\" (ngSubmit)=\\\"submitPostForm()\\\">\\r\\n    <ion-list class=\\\"inputs-list\\\" lines=\\\"full\\\">\\r\\n      <ion-list-header class=\\\"header\\\">\\r\\n        posting in &nbsp;<ion-label><b>{{group.name}}</b></ion-label>\\r\\n      </ion-list-header>\\r\\n      <ion-item class=\\\"input-item\\\">\\r\\n        <ion-input type=\\\"text\\\" formControlName=\\\"title\\\" placeholder=\\\"Subject\\\"></ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item class=\\\"input-item\\\">\\r\\n        <ion-textarea rows=\\\"6\\\"  formControlName=\\\"message\\\" clearInput placeholder=\\\"Message\\\"></ion-textarea>\\r\\n      </ion-item>\\r\\n      <ion-list class=\\\"inputs-list\\\" lines=\\\"full\\\">\\r\\n        <ion-list-header>\\r\\n          <ion-label class=\\\"header-title\\\">Select relevant tags</ion-label>\\r\\n        </ion-list-header>\\r\\n        <div class=\\\"reviews-wrapper\\\">\\r\\n        <ion-row>\\r\\n          <div class=\\\"tags\\\" formArrayName=\\\"tags\\\" *ngFor=\\\"let entry of postForm.controls.tags.controls; let i = index\\\">\\r\\n            <ion-label *ngIf=\\\"postTags[i] === undefined || !postTags[i].isChecked\\\" class=\\\"item-rating\\\" [attr.ratingBase]=\\\"0\\\">{{postTags[i].val}}</ion-label>\\r\\n            <ion-label *ngIf=\\\"postTags[i] !== undefined && postTags[i].isChecked\\\" class=\\\"item-rating\\\" [attr.ratingBase]=\\\"1\\\">{{postTags[i].val}}</ion-label>  \\r\\n            <ion-checkbox slot=\\\"start\\\" [formControlName]=\\\"i\\\" [(ngModel)]=\\\"postTags[i].isChecked\\\"></ion-checkbox>\\r\\n          </div>\\r\\n        </ion-row>\\r\\n\\r\\n        <div class=\\\"error-container\\\">\\r\\n          <ng-container *ngFor=\\\"let validation of validations.tags\\\">\\r\\n            <div class=\\\"error-message\\\" *ngIf=\\\"postForm.get('tags').hasError(validation.type) && (postForm.get('tags').dirty || postForm.get('tags').touched)\\\">\\r\\n              <ion-icon name=\\\"information-circle-outline\\\"></ion-icon>\\r\\n              <span>{{ validation.message }}</span>\\r\\n            </div>\\r\\n          </ng-container>\\r\\n        </div>\\r\\n        </div>\\r\\n      </ion-list>\\r\\n\\r\\n    <!-- <ion-button class=\\\"submit-btn\\\" type=\\\"submit\\\" expand=\\\"block\\\" fill=\\\"outline\\\" [disabled]=\\\"!postForm.valid\\\" >Submit</ion-button> -->\\r\\n    </ion-list>\\r\\n  </form>\\r\\n</div>\\r\\n</ion-content>\\r\\n<ion-footer *ngIf=\\\"step==2\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-row lines=\\\"none\\\" class=\\\"uploads item-text-wrap\\\" *ngIf=\\\"reviewMedia && reviewMedia.length > 0\\\">\\r\\n      <div class=\\\"img-wrap\\\" *ngFor=\\\"let media of reviewMedia\\\">\\r\\n          <ion-thumbnail slot=\\\"start\\\">\\r\\n            <span class=\\\"close\\\" (click)=\\\"removeMedia(media)\\\">&times;</span>\\r\\n            <ion-img [src]=\\\"media\\\">\\r\\n            </ion-img>\\r\\n          </ion-thumbnail>\\r\\n        </div>\\r\\n    </ion-row>\\r\\n    <ion-item lines=\\\"none\\\">\\r\\n      <ion-button class=\\\"ion-text-capitalize\\\" fill=\\\"clear\\\" (click)=\\\"attach()\\\">\\r\\n        <ion-icon class=\\\"ion-padding-end\\\" size=\\\"large\\\" name=\\\"camera-outline\\\"></ion-icon>Add photo or video\\r\\n      </ion-button>\\r\\n    </ion-item>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\\r\\n\";","import { ValidatorFn, FormArray } from '@angular/forms';\n\nexport class CheckboxCheckedValidator {\n\n  static tagsSelected(min) {\n    const validator: ValidatorFn = (formArray: FormArray) => {\n      const totalSelected = formArray.controls\n        .map(control => control.value)\n        .reduce((prev, next) => next ? prev + next : prev, 0);\n      return totalSelected >= min ? null : { required: true };\n    };\n\n    return validator;\n  }\n}\n"]}