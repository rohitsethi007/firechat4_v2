{"version":3,"sources":["webpack:///src/app/friends/friends.page.html","webpack:///src/app/friends/friends.page.ts","webpack:///src/app/friends/friends.module.ts","webpack:///src/app/friends/friends.page.scss"],"names":["FriendsPage","dataProvider","loadingProvider","alertCtrl","firebaseProvider","afAuth","router","friendRequests","requestsSent","friendRequestCount","accounts","excludedIds","tab","title","searchFriend","auth","currentUser","getRequests","getCurrentUserId","snapshotChanges","subscribe","requestsRes","payload","requests","data","undefined","length","$event","getFriends","getFriendRequests","findNewFriends","show","friends","getCurrentUser","user","account","hide","i","console","log","getUser","friend","friendData","$key","userId","addOrUpdateFriend","index","push","navigateByUrl","accountRes","forEach","sender","addOrUpdateFriendRequest","receiver","addOrUpdateRequestSent","isFriends","j","searchUser","getUsers","acc","filter","c","key","doc","name","publicVisibility","map","indexOf","get","alert","create","header","message","buttons","text","handler","sendFriendRequest","then","r","present","deleteFriendRequest","acceptFriendRequest","cancelFriendRequest","selector","template","routes","path","component","FriendsPageModule","imports","forChild","declarations"],"mappings":"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","file":"friends-friends-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"secondary\\\">\\r\\n    <ion-title>{{title}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n  <ion-segment color=\\\"secondary\\\" [(ngModel)]=\\\"tab\\\" (ionChange)=\\\"segmentChanged($event)\\\">\\r\\n    <ion-segment-button value=\\\"friends\\\">\\r\\n      FRIENDS\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"requests\\\">\\r\\n      REQUESTS\\r\\n      <span *ngIf=\\\"friendRequestCount != 0\\\">({{friendRequestCount}})</span>\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"search\\\">\\r\\n      FIND NEW\\r\\n    </ion-segment-button>\\r\\n  </ion-segment>\\r\\n</ion-header> \\r\\n\\r\\n<ion-content>\\r\\n  <div [ngSwitch]=\\\"tab\\\">\\r\\n    <div *ngSwitchCase=\\\"'friends'\\\">\\r\\n      <!-- No friends to show -->\\r\\n      <div class=\\\"empty-list\\\" *ngIf=\\\"friends && friends.length == 0\\\">\\r\\n        <h1>\\r\\n          <ion-icon name=\\\"contacts\\\"></ion-icon>\\r\\n        </h1>\\r\\n        <p>You don't have new friend yet</p>\\r\\n      </div>\\r\\n      <!-- Show list of friends -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"friends && friends.length > 0\\\">\\r\\n        <!-- <ion-searchbar [(ngModel)]=\\\"searchFriend\\\" placeholder=\\\"Search for friend or username\\\" showCancelButton=\\\"true\\\" cancelButtonText=\\\"Done\\\"></ion-searchbar> -->\\r\\n        <ion-item *ngFor=\\\"let friend of friends | friendFilter:searchFriend\\\"\\r\\n          (click)=\\\"message(friend.$key); $event.stopPropagation();\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{friend.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{friend.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>{{friend.description}}</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n          <ion-note slot=\\\"end\\\" *ngIf=\\\"friend.online == true\\\">online</ion-note>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n    <div *ngSwitchCase=\\\"'requests'\\\">\\r\\n      <!-- No friend requests sent or received. -->\\r\\n      <div class=\\\"empty-list\\\"\\r\\n        *ngIf=\\\"(friendRequests && friendRequests.length == 0) && (requestsSent && requestsSent.length == 0)\\\">\\r\\n        <h1>\\r\\n          <ion-icon name=\\\"md-filing\\\"></ion-icon>\\r\\n        </h1>\\r\\n        <p>No New Requests</p>\\r\\n      </div>\\r\\n      <!-- Show friend requests received. -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"friendRequests && friendRequests.length > 0\\\">\\r\\n        <ion-item *ngFor=\\\"let friendRequest of friendRequests\\\" (click)=\\\"viewUser(friendRequest.$key)\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{friendRequest.img}}\\\" onError=\\\"this.src='http://placehold.it/80x80'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{friendRequest.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>has sent you a friend request.</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n          <ion-button color=\\\"acceptrequest\\\" fill=\\\"outline\\\"\\r\\n            (click)=\\\"acceptFriendRequest(friendRequest); $event.stopPropagation();\\\">\\r\\n            Accept\\r\\n          </ion-button>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n      <!-- Show friend requests sent. -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"requestsSent && requestsSent.length > 0\\\">\\r\\n        <ion-item *ngFor=\\\"let requestSent of requestsSent\\\" no-lines tappable (click)=\\\"viewUser(requestSent.$key)\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{requestSent.img}}\\\" onError=\\\"this.src='http://placehold.it/80x80'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{requestSent.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>friend request sent.</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n          <ion-button slot=\\\"end\\\" fill=\\\"outline\\\" color=\\\"cancelrequest\\\"\\r\\n            (click)=\\\"cancelFriendRequest(requestSent); $event.stopPropagation();\\\">\\r\\n            Cancel\\r\\n          </ion-button>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n    <div *ngSwitchCase=\\\"'search'\\\">\\r\\n      <!-- No other users to send friend request right now. -->\\r\\n      <div class=\\\"empty-list\\\" *ngIf=\\\"accounts && (accounts.length == 0 || (accounts.length == excludedIds.length))\\\">\\r\\n        <h1>\\r\\n          <ion-icon name=\\\"md-search\\\"></ion-icon>\\r\\n        </h1>\\r\\n        <p>We can't find new users right now</p>\\r\\n      </div>\\r\\n      <!-- Show other users excluding yourself, and friends with the help of searchFilter pipe. -->\\r\\n      <ion-list lines=\\\"none\\\" *ngIf=\\\"accounts && accounts.length > 0\\\">\\r\\n        <ion-searchbar *ngIf=\\\"accounts.length != excludedIds.length\\\" [(ngModel)]=\\\"searchUser\\\" placeholder=\\\"Search User\\\">\\r\\n        </ion-searchbar>\\r\\n        <ion-item *ngFor=\\\"let account of accounts | searchFilter: [excludedIds, searchUser]\\\" no-lines tappable\\r\\n          (click)=\\\"viewUser(account.$key)\\\">\\r\\n          <div slot=\\\"end\\\">\\r\\n            <ion-button color=\\\"sendrequest\\\" fill=\\\"outline\\\"\\r\\n              (click)=\\\"sendFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 0\\\">\\r\\n              add\\r\\n            </ion-button>\\r\\n            <ion-button color=\\\"cancelrequest\\\" fill=\\\"outline\\\"\\r\\n              (click)=\\\"cancelFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 1\\\">\\r\\n              <!-- <ion-icon name=\\\"md-close-circle\\\" class=\\\"danger\\\"></ion-icon> -->\\r\\n              cancel\\r\\n            </ion-button>\\r\\n            <ion-button color=\\\"acceptrequest\\\" fill=\\\"outline\\\"\\r\\n              (click)=\\\"acceptFriendRequest(account); $event.stopPropagation();\\\" *ngIf=\\\"getStatus(account) == 2\\\">\\r\\n              <!-- <ion-icon name=\\\"md-checkmark-circle\\\" class=\\\"success\\\"></ion-icon> -->\\r\\n              accept\\r\\n            </ion-button>\\r\\n          </div>\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <img src=\\\"{{account.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\r\\n          </ion-avatar>\\r\\n          <ion-label>\\r\\n            <ion-text>\\r\\n              <h2>{{account.name}}</h2>\\r\\n            </ion-text>\\r\\n            <ion-text>\\r\\n              <p>@{{account.username}}</p>\\r\\n            </ion-text>\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\";","import { Component, OnInit } from '@angular/core';\r\nimport { DataService } from '../services/data.service';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { AlertController } from '@ionic/angular';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { Router } from '@angular/router';\r\nimport { FirebaseService } from '../services/firebase.service';\r\nimport { take, takeLast } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-friends',\r\n  templateUrl: './friends.page.html',\r\n  styleUrls: ['./friends.page.scss'],\r\n})\r\nexport class FriendsPage implements OnInit {\r\n\r\n  friends: any;\r\n  friendRequests: any = [];\r\n  searchFriend: any;\r\n  tab: any;\r\n  title: any;\r\n  requestsSent: any = [];\r\n  friendRequestCount = 0;\r\n\r\n  alert: any;\r\n  account: any;\r\n\r\n  accounts: any = [];\r\n  excludedIds: any = [];\r\n  searchUser: any;\r\n\r\n  // FriendsPage\r\n  // This is the page where the user can search, view, and initiate a chat with their friends.\r\n  constructor(\r\n    private dataProvider: DataService,\r\n    private loadingProvider: LoadingService,\r\n    public alertCtrl: AlertController,\r\n    public firebaseProvider: FirebaseService,\r\n    private afAuth: AngularFireAuth,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() { }\r\n\r\n  ionViewDidEnter() {\r\n    this.tab = 'friends';\r\n    this.title = 'Friends';\r\n    this.searchFriend = '';\r\n\r\n    if (this.afAuth.auth.currentUser != null) {\r\n      this.dataProvider.getRequests(this.dataProvider.getCurrentUserId()).snapshotChanges().subscribe((requestsRes: any) => {\r\n        if (requestsRes.payload != null) {\r\n        const requests = requestsRes.payload.data();\r\n        if (requests != null) {\r\n          if (requests.friendRequests != null && requests.friendRequests !== undefined) {\r\n            this.friendRequestCount = requests.friendRequests.length;\r\n          } else { this.friendRequestCount = 0; }\r\n        } else { this.friendRequestCount = 0; }\r\n      }\r\n      });\r\n    }\r\n  }\r\n\r\n  segmentChanged($event) {\r\n    if (this.tab === 'friends') {\r\n      this.title = 'Friends'; this.getFriends();\r\n    } else if (this.tab === 'requests') {\r\n      this.title = 'Friend Requests'; this.getFriendRequests();\r\n    } else if (this.tab === 'search') {\r\n      this.title = 'Find New Friends'; this.findNewFriends();\r\n    }\r\n  }\r\n  // openFilter() {\r\n  //   this.findNewFriends();\r\n  //   let friendModal = this.modalCtrl.create(FriendsFilterPage);\r\n  //   friendModal.present();\r\n  //   friendModal.onDidDismiss(data => {\r\n  //     console.log(data);\r\n  //     if (data != undefined) {\r\n  //       this.accounts = this.accounts.filter(acc => {\r\n  //         if ((acc.age >= data.ageStart) && (acc.age <= data.ageEnd) && acc.location == data.location)\r\n  //           return true;\r\n  //         return false;\r\n  //       })\r\n  //     }\r\n  //   });\r\n\r\n  // }\r\n\r\n  getFriends() {\r\n    this.loadingProvider.show();\r\n    this.friends = [];\r\n    // Get user data on database and get list of friends.\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((user: any) => {\r\n      const account = user.payload.data();\r\n      this.loadingProvider.hide();\r\n      if (account != null && account.friends != null) {\r\n        for (let i = 0; i < account.friends.length; i++) {\r\n          console.log('friends:', account.friends[i]);\r\n          this.dataProvider.getUser(account.friends[i]).snapshotChanges().subscribe((friend: any) => {\r\n            if (friend.payload != null) {\r\n              const friendData = { $key: friend.payload.data().userId, ...friend.payload.data() };\r\n              this.addOrUpdateFriend(friendData);\r\n            }\r\n          });\r\n        }\r\n      } else {\r\n        this.friends = [];\r\n      }\r\n  });\r\n  }\r\n\r\n  // Add or update friend data for real-time sync.\r\n  addOrUpdateFriend(friend) {\r\n    if (!this.friends) {\r\n      this.friends = [friend];\r\n    } else {\r\n      var index = -1;\r\n      for (let i = 0; i < this.friends.length; i++) {\r\n        if (this.friends[i].$key === friend.$key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.friends[index] = friend;\r\n      } else {\r\n        this.friends.push(friend);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Proceed to userInfo page.\r\n  viewUser(userId) {\r\n    this.router.navigateByUrl('/userinfo/' + userId);\r\n  }\r\n\r\n  // Proceed to chat page.\r\n  message(userId) {\r\n    this.router.navigateByUrl('/message/' + userId);\r\n  }\r\n\r\n\r\n  // Manageing Friend Requests\r\n\r\n  getFriendRequests() {\r\n    this.friendRequests = [];\r\n    this.requestsSent = [];\r\n\r\n    this.loadingProvider.show();\r\n    // Get user info\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((accountRes: any) => {\r\n      this.account = accountRes.payload.data();\r\n      // Get friendRequests and requestsSent of the user.\r\n      this.dataProvider.getRequests(this.account.userId).snapshotChanges().subscribe((requestsRes: any) => {\r\n        // friendRequests.\r\n        let requests = requestsRes.payload.data();\r\n        if (requests != null) {\r\n          if (requests.friendRequests != null && requests.friendRequests !== undefined) {\r\n            this.friendRequests = [];\r\n            this.friendRequestCount = requests.friendRequests.length;\r\n            requests.friendRequests.forEach((userId) => {\r\n              this.dataProvider.getUser(userId).snapshotChanges().subscribe((sender: any) => {\r\n                sender = { $key: sender.payload.data().userId, ...sender.payload.data() };\r\n                this.addOrUpdateFriendRequest(sender);\r\n              });\r\n            });\r\n          } else {\r\n            this.friendRequests = [];\r\n          }\r\n          // requestsSent.\r\n          if (requests.requestsSent != null && requests.requestsSent != undefined) {\r\n            this.requestsSent = [];\r\n            requests.requestsSent.forEach((userId) => {\r\n              this.dataProvider.getUser(userId).snapshotChanges().subscribe((receiver: any) => {\r\n                receiver = { $key: receiver.payload.data().userId, ...receiver.payload.data() };\r\n                this.addOrUpdateRequestSent(receiver);\r\n              });\r\n            });\r\n          } else {\r\n            this.requestsSent = [];\r\n          }\r\n        }\r\n        this.loadingProvider.hide();\r\n      });\r\n\r\n  });\r\n  }\r\n\r\n\r\n\r\n  // Add or update friend request only if not yet friends.\r\n  addOrUpdateFriendRequest(sender) {\r\n    if (!this.friendRequests) {\r\n      this.friendRequests = [sender];\r\n    } else {\r\n      var index = -1;\r\n      for (var i = 0; i < this.friendRequests.length; i++) {\r\n        if (this.friendRequests[i].$key === sender.$key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        if (!this.isFriends(sender.$key)) {\r\n          this.friendRequests[index] = sender;\r\n        }\r\n      } else {\r\n        if (!this.isFriends(sender.$key)) {\r\n          this.friendRequests.push(sender);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add or update requests sent only if the user is not yet a friend.\r\n  addOrUpdateRequestSent(receiver) {\r\n    if (!this.requestsSent) {\r\n      this.requestsSent = [receiver];\r\n    } else {\r\n      var index = -1;\r\n      for (var j = 0; j < this.requestsSent.length; j++) {\r\n        if (this.requestsSent[j].$key == receiver.$key) {\r\n          index = j;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        if (!this.isFriends(receiver.$key)) {\r\n          this.requestsSent[index] = receiver;\r\n        }\r\n      } else {\r\n        if (!this.isFriends(receiver.$key)) {\r\n          this.requestsSent.push(receiver);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  findNewFriends() {\r\n    this.requestsSent = [];\r\n    this.friendRequests = [];\r\n    // Initialize\r\n    this.loadingProvider.show();\r\n    this.searchUser = '';\r\n    // Get all users.\r\n    this.dataProvider.getUsers().snapshotChanges().subscribe((accounts: any) => {\r\n      // TODO : why is this being called twice??????????????\r\n      this.loadingProvider.hide();\r\n      // applying Filters\r\n      const acc = accounts.filter((c) => {\r\n        if (c.key == null && c.key === undefined && c.payload.doc.data() == null) { return false; }\r\n        if (c.payload.doc.data().name === ''\r\n            || c.payload.doc.data().name === ' '\r\n            || c.payload.doc.data().name === undefined) {\r\n              return false;\r\n        }\r\n\r\n        if (c.payload.doc.data().publicVisibility === false) { return false; }\r\n        return true;\r\n      });\r\n\r\n      this.accounts = acc.map(c => {\r\n        return { $key: c.payload.doc.data().userId, ...c.payload.doc.data() }\r\n      });\r\n\r\n      this.dataProvider.getCurrentUser().snapshotChanges().subscribe((accountRes: any) => {\r\n        const account = accountRes.payload.data();\r\n        // Add own userId as exludedIds.\r\n        this.excludedIds = [];\r\n        if (this.excludedIds.indexOf(account.userId) === -1) {\r\n          this.excludedIds.push(account.userId);\r\n        }\r\n        // Get friends which will be filtered out from the list using searchFilter pipe pipes/search.ts.\r\n        if (account != null) {\r\n          if (account.friends != null) {\r\n            account.friends.forEach(friend => {\r\n              if (this.excludedIds.indexOf(friend) === -1) {\r\n                this.excludedIds.push(friend);\r\n              }\r\n            });\r\n          }\r\n        }\r\n        // Get requests of the currentUser.\r\n        this.dataProvider.getRequests(account.userId).get().subscribe((requests: any) => {\r\n          if (requests.payload != null) {\r\n            this.requestsSent = requests.payload.data().requestsSent;\r\n            this.friendRequests = requests.payload.data().friendRequests;\r\n          }\r\n        });\r\n    });\r\n    });\r\n  }\r\n\r\n  // Send friend request.\r\n  sendFriendRequest(user) {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Send Friend Request',\r\n      message: 'Do you want to send friend request to <b>' + user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Send',\r\n          handler: () => {\r\n            this.firebaseProvider.sendFriendRequest(user.$key);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Accept Friend Request.\r\n  acceptFriendRequest(user) {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Confirm Friend Request',\r\n      message: 'Do you want to accept <b>' + user.name + '</b> as your friend?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Reject Request',\r\n          handler: () => {\r\n            this.firebaseProvider.deleteFriendRequest(user.$key);\r\n            this.getFriendRequests();\r\n          }\r\n        },\r\n        {\r\n          text: 'Accept Request',\r\n          handler: () => {\r\n            this.firebaseProvider.acceptFriendRequest(user.$key);\r\n            this.getFriendRequests();\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Cancel Friend Request sent.\r\n  cancelFriendRequest(user) {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Friend Request Pending',\r\n      message: 'Do you want to delete your friend request to <b>' + user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Delete',\r\n          handler: () => {\r\n            this.firebaseProvider.cancelFriendRequest(user.$key);\r\n            this.getFriendRequests();\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Checks if user is already friends with this user.\r\n  isFriends(userId) {\r\n    if (this.account.friends) {\r\n      if (this.account.friends.indexOf(userId) == -1) {\r\n        return false;\r\n      } else {\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Get the status of the user in relation to the logged in user.\r\n  getStatus(user) {\r\n    // Returns:\r\n    // 0 when user can be requested as friend.\r\n    // 1 when a friend request was already sent to this user.\r\n    // 2 when this user has a pending friend request.\r\n    if (this.requestsSent) {\r\n      for (let i = 0; i < this.requestsSent.length; i++) {\r\n        if (this.requestsSent[i] === user.$key) {\r\n          return 1;\r\n        }\r\n      }\r\n    }\r\n    if (this.friendRequests) {\r\n      for (let j = 0; j < this.friendRequests.length; j++) {\r\n        if (this.friendRequests[j] === user.$key) {\r\n          return 2;\r\n        }\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FriendsPage } from './friends.page';\r\nimport { SharedModule } from '../services/share.module';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FriendsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [\r\n    FriendsPage\r\n  ]\r\n})\r\nexport class FriendsPageModule {}\r\n","export default \":host {\\n  --page-margin: var(--app-narrow-margin);\\n  --page-border-radius: var(--app-fair-radius);\\n  --page-segment-background: var(--app-background);\\n  --page-segment-indicator-height: 2px;\\n}\\n\\n.user-friends-segment {\\n  --background: var(--page-segment-background);\\n  position: -webkit-sticky;\\n  position: sticky;\\n  top: 0;\\n  z-index: 8;\\n}\\n\\n.user-friends-segment ion-segment-button {\\n  --padding-end: var(--page-margin);\\n  --padding-start: var(--page-margin);\\n  --color: rgba(var(--ion-color-dark-rgb), 0.4);\\n  --indicator-color: var(--ion-color-dark);\\n  text-transform: capitalize;\\n  min-height: calc((var(--page-margin) * 3) - var(--page-segment-indicator-height));\\n}\\n\\nion-searchbar.friends-searchbar {\\n  padding: calc(var(--page-margin) * 1.5) var(--page-margin);\\n}\\n\\n.friends-list {\\n  padding: 0px var(--page-margin);\\n  margin-bottom: calc(var(--page-margin) * 3);\\n}\\n\\n.empty-list-message {\\n  margin: calc(var(--page-margin) * 3);\\n  color: rgba(var(--ion-color-dark-rgb), 0.4);\\n  text-align: center;\\n}\\n\\nion-item.friend-item {\\n  --inner-padding-start: 0px;\\n  --inner-padding-end: 0px;\\n  --padding-start: 0px;\\n  --padding-end: 0px;\\n  --padding-bottom: var(--page-margin);\\n  --inner-padding-bottom: var(--page-margin);\\n}\\n\\nion-item.friend-item:last-child {\\n  --border-style: none;\\n  --padding-bottom: 0px;\\n  --inner-padding-bottom: 0px;\\n}\\n\\nion-item.friend-item .user-details-section {\\n  --ion-grid-column-padding: 0px;\\n  width: 100%;\\n  align-items: center;\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper {\\n  padding-left: var(--page-margin);\\n  padding-right: calc(var(--page-margin) / 2);\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper .user-info:not(:last-child) {\\n  margin-bottom: calc(var(--page-margin) / 2);\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper .user-info .user-name {\\n  margin: 0px;\\n  margin-bottom: 4px;\\n  font-size: 16px;\\n}\\n\\nion-item.friend-item .user-details-section .user-data-wrapper .user-info .user-job {\\n  margin: 0px;\\n  color: rgba(var(--ion-color-dark-rgb), 0.4);\\n  font-size: 14px;\\n}\\n\\nion-item.friend-item .user-details-section .user-actions-wrapper {\\n  font-size: 14px;\\n  max-width: 10ex;\\n  max-width: 10ch;\\n}\\n\\nion-item.friend-item .user-details-section .user-actions-wrapper .user-action {\\n  margin: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZnJpZW5kcy9mcmllbmRzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLHVDQUFBO0VBQ0EsNENBQUE7RUFDQSxnREFBQTtFQUNBLG9DQUFBO0FBREo7O0FBS0U7RUFDRSw0Q0FBQTtFQUNBLHdCQUFBO0VBQUEsZ0JBQUE7RUFDQSxNQUFBO0VBQ0EsVUFBQTtBQUZKOztBQUlJO0VBQ0UsaUNBQUE7RUFDQSxtQ0FBQTtFQUNBLDZDQUFBO0VBQ0Esd0NBQUE7RUFFQSwwQkFBQTtFQUNBLGlGQUFBO0FBSE47O0FBT0U7RUFDRSwwREFBQTtBQUpKOztBQU9FO0VBQ0UsK0JBQUE7RUFDQSwyQ0FBQTtBQUpKOztBQU9FO0VBQ0Usb0NBQUE7RUFDQSwyQ0FBQTtFQUNBLGtCQUFBO0FBSko7O0FBT0U7RUFDRSwwQkFBQTtFQUNBLHdCQUFBO0VBQ0Esb0JBQUE7RUFDQSxrQkFBQTtFQUNBLG9DQUFBO0VBQ0EsMENBQUE7QUFKSjs7QUFNSTtFQUNFLG9CQUFBO0VBQ0EscUJBQUE7RUFDQSwyQkFBQTtBQUpOOztBQU9JO0VBQ0UsOEJBQUE7RUFFQSxXQUFBO0VBQ0EsbUJBQUE7QUFOTjs7QUFRTTtFQUNFLGdDQUFBO0VBQ0EsMkNBQUE7RUFDQSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSx1QkFBQTtBQU5SOztBQVNVO0VBQ0UsMkNBQUE7QUFQWjs7QUFVVTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7QUFSWjs7QUFXVTtFQUNFLFdBQUE7RUFDQSwyQ0FBQTtFQUNBLGVBQUE7QUFUWjs7QUFjTTtFQUNFLGVBQUE7RUFLQSxlQUFBO0VBQ0EsZUFBQTtBQWhCUjs7QUFrQlE7RUFDRSxXQUFBO0FBaEJWIiwiZmlsZSI6InNyYy9hcHAvZnJpZW5kcy9mcmllbmRzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEN1c3RvbSB2YXJpYWJsZXNcclxuLy8gTm90ZTogIFRoZXNlIG9uZXMgd2VyZSBhZGRlZCBieSB1cyBhbmQgaGF2ZSBub3RoaW5nIHRvIGRvIHdpdGggSW9uaWMgQ1NTIEN1c3RvbSBQcm9wZXJ0aWVzXHJcbjpob3N0IHtcclxuICAgIC0tcGFnZS1tYXJnaW46IHZhcigtLWFwcC1uYXJyb3ctbWFyZ2luKTtcclxuICAgIC0tcGFnZS1ib3JkZXItcmFkaXVzOiB2YXIoLS1hcHAtZmFpci1yYWRpdXMpO1xyXG4gICAgLS1wYWdlLXNlZ21lbnQtYmFja2dyb3VuZDogdmFyKC0tYXBwLWJhY2tncm91bmQpO1xyXG4gICAgLS1wYWdlLXNlZ21lbnQtaW5kaWNhdG9yLWhlaWdodDogMnB4O1xyXG4gIH1cclxuICBcclxuICAvLyBOb3RlOiAgQWxsIHRoZSBDU1MgdmFyaWFibGVzIGRlZmluZWQgYmVsb3cgYXJlIG92ZXJyaWRlcyBvZiBJb25pYyBlbGVtZW50cyBDU1MgQ3VzdG9tIFByb3BlcnRpZXNcclxuICAudXNlci1mcmllbmRzLXNlZ21lbnQge1xyXG4gICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1wYWdlLXNlZ21lbnQtYmFja2dyb3VuZCk7XHJcbiAgICBwb3NpdGlvbjogc3RpY2t5O1xyXG4gICAgdG9wOiAwO1xyXG4gICAgei1pbmRleDogODtcclxuICBcclxuICAgIGlvbi1zZWdtZW50LWJ1dHRvbiB7XHJcbiAgICAgIC0tcGFkZGluZy1lbmQ6IHZhcigtLXBhZ2UtbWFyZ2luKTtcclxuICAgICAgLS1wYWRkaW5nLXN0YXJ0OiB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgICAgIC0tY29sb3I6IHJnYmEodmFyKC0taW9uLWNvbG9yLWRhcmstcmdiKSwgMC40KTtcclxuICAgICAgLS1pbmRpY2F0b3ItY29sb3I6IHZhcigtLWlvbi1jb2xvci1kYXJrKTtcclxuICBcclxuICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XHJcbiAgICAgIG1pbi1oZWlnaHQ6IGNhbGMoKHZhcigtLXBhZ2UtbWFyZ2luKSAqIDMpIC0gdmFyKC0tcGFnZS1zZWdtZW50LWluZGljYXRvci1oZWlnaHQpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgaW9uLXNlYXJjaGJhci5mcmllbmRzLXNlYXJjaGJhciB7XHJcbiAgICBwYWRkaW5nOiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAqIDEuNSkgdmFyKC0tcGFnZS1tYXJnaW4pO1xyXG4gIH1cclxuICBcclxuICAuZnJpZW5kcy1saXN0IHtcclxuICAgIHBhZGRpbmc6IDBweCB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgICBtYXJnaW4tYm90dG9tOiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAqIDMpO1xyXG4gIH1cclxuICBcclxuICAuZW1wdHktbGlzdC1tZXNzYWdlIHtcclxuICAgIG1hcmdpbjogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgKiAzKTtcclxuICAgIGNvbG9yOiByZ2JhKHZhcigtLWlvbi1jb2xvci1kYXJrLXJnYiksIDAuNCk7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIGlvbi1pdGVtLmZyaWVuZC1pdGVtIHtcclxuICAgIC0taW5uZXItcGFkZGluZy1zdGFydDogMHB4O1xyXG4gICAgLS1pbm5lci1wYWRkaW5nLWVuZDogMHB4O1xyXG4gICAgLS1wYWRkaW5nLXN0YXJ0OiAwcHg7XHJcbiAgICAtLXBhZGRpbmctZW5kOiAwcHg7XHJcbiAgICAtLXBhZGRpbmctYm90dG9tOiB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgICAtLWlubmVyLXBhZGRpbmctYm90dG9tOiB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgXHJcbiAgICAmOmxhc3QtY2hpbGQge1xyXG4gICAgICAtLWJvcmRlci1zdHlsZTogbm9uZTtcclxuICAgICAgLS1wYWRkaW5nLWJvdHRvbTogMHB4O1xyXG4gICAgICAtLWlubmVyLXBhZGRpbmctYm90dG9tOiAwcHg7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAudXNlci1kZXRhaWxzLXNlY3Rpb24ge1xyXG4gICAgICAtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nOiAwcHg7XHJcbiAgXHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIFxyXG4gICAgICAudXNlci1kYXRhLXdyYXBwZXIge1xyXG4gICAgICAgIHBhZGRpbmctbGVmdDogdmFyKC0tcGFnZS1tYXJnaW4pO1xyXG4gICAgICAgIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIFxyXG4gICAgICAgIC51c2VyLWluZm8ge1xyXG4gICAgICAgICAgJjpub3QoOmxhc3QtY2hpbGQpIHtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAyKTtcclxuICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgIC51c2VyLW5hbWUge1xyXG4gICAgICAgICAgICBtYXJnaW46IDBweDtcclxuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xyXG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgICAudXNlci1qb2Ige1xyXG4gICAgICAgICAgICBtYXJnaW46IDBweDtcclxuICAgICAgICAgICAgY29sb3I6IHJnYmEodmFyKC0taW9uLWNvbG9yLWRhcmstcmdiKSwgMC40KTtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gIFxyXG4gICAgICAudXNlci1hY3Rpb25zLXdyYXBwZXIge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICBcclxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgYWx3YXlzIGhhdmUgc3BhY2UgZm9yIDEwIGNoYXJhY3RlcnNcclxuICAgICAgICAvLyBBcyBjaCAod2lkdGggb2YgdGhlIGNoYXJhY3RlciAnMCcpIHVuaXQgaXMgbm90IDEwMCUgc3VwcG9ydGVkLCB3ZSB3aWxsIHVzZSBleCAoaGVpZ2h0IG9mIHRoZSAneCcgY2hhcmFjdGVyKSBhcyBhIGZhbGxiYWNrXHJcbiAgICAgICAgLy8gU2VlOiBodHRwczovL3d3dy5xdWlya3Ntb2RlLm9yZy9jc3MvdW5pdHMtdmFsdWVzL1xyXG4gICAgICAgIG1heC13aWR0aDogMTBleDsgLy8gVGhlICd4JyBjaGFyYWN0ZXIgaXMgc2VtaS1zcXVhcmUgY2hhclxyXG4gICAgICAgIG1heC13aWR0aDogMTBjaDsgLy8gY2ggaXMgdGhlIG9ubHkgZm9udCB1bml0IGJhc2VkIG9uIHRoZSB3aWR0aCBvZiBjaGFyYWN0ZXJzXHJcbiAgXHJcbiAgICAgICAgLnVzZXItYWN0aW9uIHtcclxuICAgICAgICAgIG1hcmdpbjogMHB4O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICAiXX0= */\";"]}