{"version":3,"sources":["webpack:///src/app/profile/profile.module.ts","webpack:///src/app/profile/profile.page.ts","webpack:///src/app/profile/profile.page.html","webpack:///src/app/profile/profile.page.scss"],"names":["routes","path","component","ProfilePageModule","imports","forChild","declarations","ProfilePage","loginService","dataProvider","loadingProvider","firestore","afAuth","imageProvider","alertCtrl","camera","fcm","firebaseProvider","platform","formBuilder","route","router","modalCtrl","routerOutlet","showOnline","messageMe","isPushEnabled","isBrowser","userPosts","userReactions","userComments","groups","friends","myProfile","submitAttempt","errorMessages","userId","snapshot","params","id","loggedInUserId","getCurrentUserId","myForm","group","name","nameValidator","username","usernameValidator","email","emailValidator","bio","bioValidator","is","getUserData","getUser","snapshotChanges","subscribe","user","account","payload","data","title","collection","ref","where","FieldPath","documentId","get","then","po","loadEachPostData","forEach","f","friend","key","addOrUpdateUserFriend","console","log","foundFriend","some","el","g","addOrUpdateUserGroup","p","post","postTags","filter","x","isChecked","addOrUpdateUserPost","addOrUpdateCommentPost","addOrUpdateReactionPost","index","i","length","push","doc","update","publicVisibility","valid","show","hide","showToast","err","hasPermission","grantPermission","getToken","token","auth","currentUser","uid","pushToken","onTokenRefresh","onMessageReceived","create","header","message","buttons","text","handler","setProfilePhoto","PictureSourceType","PHOTOLIBRARY","CAMERA","r","present","sendPasswordResetEmail","res","success","deleteUserImageFile","logout","error","navigateByUrl","groupId","componentProps","modal","alert","sendFriendRequest","selector","template"],"mappings":"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","file":"profile-profile-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SharedModule } from '../services/share.module';\r\nimport { ComponentsModule } from '../components/components.module';\r\nimport { ProfilePage } from './profile.page';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfilePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ProfilePage]\r\n})\r\nexport class ProfilePageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { LoginService } from '../services/login.service';\r\nimport { DataService } from '../services/data.service';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { AlertController, Platform, ModalController, IonRouterOutlet } from '@ionic/angular';\r\nimport { ImageService } from '../services/image.service';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\nimport { FirebaseX } from '@ionic-native/firebase-x/ngx';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Validator } from 'src/environments/validator';\r\nimport * as firebase from 'firebase/app';\r\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\r\nimport { FirebaseService } from '../services/firebase.service';\r\nimport { UserProfileModalPage } from '../user-profile-modal/user-profile-modal.page';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.page.html',\r\n  styleUrls: ['./profile.page.scss'],\r\n})\r\nexport class ProfilePage implements OnInit {\r\n  title: any;\r\n  userId: any;\r\n  showOnline = false;\r\n  messageMe = false;\r\n  loggedInUserId: any;\r\n  isPushEnabled: any = false;\r\n  user: any;\r\n  isBrowser = true;\r\n  userPosts: any = [];\r\n  userReactions: any = [];\r\n  userComments: any = [];\r\n  groups: any = [];\r\n  friends: any = [];\r\n  myProfile = false;\r\n  myForm: FormGroup;\r\n  submitAttempt = false;\r\n  errorMessages: any = [];\r\n  alert: any;\r\n\r\n  constructor(\r\n    private loginService: LoginService,\r\n    private dataProvider: DataService,\r\n    private loadingProvider: LoadingService,\r\n    private firestore: AngularFirestore,\r\n    private afAuth: AngularFireAuth,\r\n    private imageProvider: ImageService,\r\n    public alertCtrl: AlertController,\r\n    private camera: Camera,\r\n    private fcm: FirebaseX,\r\n    public firebaseProvider: FirebaseService,\r\n    private platform: Platform,\r\n    private formBuilder: FormBuilder,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    public modalCtrl: ModalController,\r\n    private routerOutlet: IonRouterOutlet\r\n  ) {\r\n    this.userId = this.route.snapshot.params.id;\r\n    this.loggedInUserId = this.dataProvider.getCurrentUserId();\r\n    if (this.userId === this.loggedInUserId) {\r\n      this.myProfile = true;\r\n    } else {\r\n      this.myProfile = false;\r\n    }\r\n\r\n    this.errorMessages = Validator.errorMessages;\r\n    this.myForm = this.formBuilder.group({\r\n      name: Validator.nameValidator,\r\n      username: Validator.usernameValidator,\r\n      email: Validator.emailValidator,\r\n      bio: Validator.bioValidator\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.isBrowser = this.platform.is('desktop');\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.getUserData();\r\n  }\r\n\r\n  getUserData() {\r\n    this.dataProvider.getUser(this.userId).snapshotChanges().subscribe((user: any) => {\r\n      let account = user.payload.data();\r\n      if (account != null) {\r\n        this.user = account;\r\n        this.title = this.user.username;\r\n        // get user Posts\r\n        if (this.user.userPosts) {\r\n          this.firestore.collection('posts').ref\r\n          .where(firebase.firestore.FieldPath.documentId(), 'in', this.user.userPosts)\r\n          .get().then((po: any) => {\r\n            this.userPosts = [];\r\n            this.loadEachPostData(po, 'userPosts');\r\n          });\r\n        }\r\n\r\n        // get user Reaction Posts\r\n        if (this.user.userReactions) {\r\n          this.firestore.collection('posts').ref\r\n          .where(firebase.firestore.FieldPath.documentId(), 'in', this.user.userReactions)\r\n          .get().then((po: any) => {\r\n          this.userReactions = [];\r\n          this.loadEachPostData(po, 'userReactions');\r\n          });\r\n        }\r\n\r\n        // get user Posts\r\n        if (this.user.userComments) {\r\n          this.firestore.collection('posts').ref\r\n          .where(firebase.firestore.FieldPath.documentId(), 'in', this.user.userComments)\r\n          .get().then((po: any) => {\r\n          this.userComments = [];\r\n          this.loadEachPostData(po, 'userComments');\r\n          });\r\n        }\r\n\r\n        // Get User Friends list\r\n        if (this.user.friends) {\r\n          this.firestore.collection('accounts').ref\r\n          .where(firebase.firestore.FieldPath.documentId(), 'in', this.user.friends)\r\n          .get().then((user: any) => {\r\n            this.friends = [];\r\n            user.forEach(f => {\r\n              let friend: any;\r\n              friend = f.data();\r\n              friend.key = f.id;\r\n              this.addOrUpdateUserFriend(friend);\r\n            });\r\n\r\n            console.log('this.friends', this.friends);\r\n            // check if logged in user is a friend\r\n            const foundFriend = this.friends.some(el => el.userId === this.loggedInUserId);\r\n            if (foundFriend) {\r\n               this.messageMe = true;\r\n            } else {\r\n              this.messageMe = false;\r\n            }\r\n          });\r\n        }\r\n\r\n        // Get User Groups List\r\n        if (this.user.groups) {\r\n          this.firestore.collection('groups').ref\r\n          .where(firebase.firestore.FieldPath.documentId(), 'in', this.user.groups)\r\n          .get().then((group: any) => {\r\n            this.groups = [];\r\n            group.forEach(g => {\r\n              let group: any;\r\n              group = g.data();\r\n              group.key = g.id;\r\n              this.addOrUpdateUserGroup(group);\r\n            });\r\n          });\r\n          }\r\n      }\r\n    });\r\n  }\r\n\r\n  loadEachPostData(po: any, collection: any) {\r\n    po.forEach(p => {\r\n      let post: any;\r\n      post = p.data();\r\n      post.key = p.id;\r\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\r\n      if (collection === 'userPosts') { this.addOrUpdateUserPost(post); }\r\n      if (collection === 'userComments') { this.addOrUpdateCommentPost(post); }\r\n      if (collection === 'userReactions') { this.addOrUpdateReactionPost(post); }\r\n    });\r\n  }\r\n\r\n  addOrUpdateUserPost(post) {\r\n    if (!this.userPosts) {\r\n      this.userPosts = [post];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.userPosts.length; i++) {\r\n        if (this.userPosts[i].key == post.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.userPosts[index] = post;\r\n      } else {\r\n        this.userPosts.push(post);\r\n      }\r\n    }\r\n  }\r\n\r\n  addOrUpdateUserFriend(friend) {\r\n    if (!this.friends) {\r\n      this.friends = [friend];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.friends.length; i++) {\r\n        if (this.friends[i].key == friend.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.friends[index] = friend;\r\n      } else {\r\n        this.friends.push(friend);\r\n      }\r\n    }\r\n  }\r\n\r\n  addOrUpdateUserGroup(group) {\r\n    if (!this.groups) {\r\n      this.groups = [group];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.groups.length; i++) {\r\n        if (this.groups[i].key == group.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.groups[index] = group;\r\n      } else {\r\n        this.groups.push(group);\r\n      }\r\n    }\r\n  }\r\n\r\n  addOrUpdateReactionPost(post) {\r\n    if (!this.userReactions) {\r\n      this.userReactions = [post];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.userReactions.length; i++) {\r\n        if (this.userReactions[i].key == post.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.userReactions[index] = post;\r\n      } else {\r\n        this.userReactions.push(post);\r\n      }\r\n    }\r\n  }\r\n\r\n  addOrUpdateCommentPost(post) {\r\n    if (!this.userComments) {\r\n      this.userComments = [post];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.userComments.length; i++) {\r\n        if (this.userComments[i].key == post.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.userComments[index] = post;\r\n      } else {\r\n        this.userComments.push(post);\r\n      }\r\n    }\r\n  }\r\n\r\n  changeStatus() {\r\n    this.firestore.doc('accounts/' + this.user.userId).update({ showOnline: this.user.showOnline });\r\n  }\r\n  changeVisibility() {\r\n    this.firestore.doc('accounts/' + this.user.userId).update({ publicVisibility: this.user.publicVisibility });\r\n  }\r\n\r\n  save() {\r\n    this.submitAttempt = true;\r\n    if (this.myForm.valid) {\r\n      this.loadingProvider.show();\r\n      this.firestore.doc('accounts/' + this.user.userId).update(this.user).then(() => {\r\n        this.loadingProvider.hide();\r\n        this.loadingProvider.showToast(\"Updated Successfully\")\r\n      }).catch(err => {\r\n        this.loadingProvider.showToast(\"Something went wrong\");\r\n        this.loadingProvider.hide();\r\n      });\r\n    }\r\n  }\r\n\r\n  changeNotification() {\r\n    if (this.platform.is('desktop')) {\r\n      this.user.isPushEnabled = false;\r\n      this.loadingProvider.showToast(\"Notification only working on mobile device\")\r\n    }\r\n    else {\r\n      console.log(this.user.isPushEnabled);\r\n      if (this.user.isPushEnabled == true) {\r\n        //Registering for push notification\r\n        this.fcm.hasPermission().then(hasPermission => {\r\n          if (!hasPermission) {\r\n            this.fcm.grantPermission().then(data => console.log(data));\r\n          }\r\n          else {\r\n            this.fcm.getToken().then(token => {\r\n              console.log(token);\r\n              this.firestore.doc('/accounts/' + this.afAuth.auth.currentUser.uid).update({ isPushEnabled: true, pushToken: token });\r\n              this.user.isPushEnabled = true;\r\n            }).catch(err => {\r\n              console.log(err);\r\n            });\r\n            this.fcm.onTokenRefresh().subscribe(token => {\r\n              console.log(token);\r\n              this.firestore.doc('/accounts/' + this.afAuth.auth.currentUser.uid).update({ isPushEnabled: true, pushToken: token });\r\n            });\r\n          }\r\n        });\r\n        this.fcm.onMessageReceived().subscribe(data => {\r\n          console.log(data);\r\n        });\r\n      }\r\n      else {\r\n        this.user.isPushEnabled == false;\r\n        this.firestore.doc('/accounts/' + this.afAuth.auth.currentUser.uid).update({ isPushEnabled: false, pushToken: '' });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  setPhoto() {\r\n    this.alertCtrl.create({\r\n      header: 'Set Profile Photo',\r\n      message: 'Do you want to take a photo or choose from your photo gallery?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Choose from Gallery',\r\n          handler: () => {\r\n            // Call imageProvider to process, upload, and update user photo.\r\n            this.imageProvider.setProfilePhoto(this.user, this.camera.PictureSourceType.PHOTOLIBRARY);\r\n          }\r\n        },\r\n        {\r\n          text: 'Take Photo',\r\n          handler: () => {\r\n            // Call imageProvider to process, upload, and update user photo.\r\n            this.imageProvider.setProfilePhoto(this.user, this.camera.PictureSourceType.CAMERA);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  setPassword() {\r\n    this.afAuth.auth.sendPasswordResetEmail(this.afAuth.auth.currentUser.email)\r\n      .then(res => {\r\n        this.loadingProvider.showToast(\"Please Check your inbox\");\r\n      }).catch(err => {\r\n        this.loadingProvider.showToast(err.message);\r\n      })\r\n  }\r\n\r\n  // Delete the user account. After deleting the Firebase user, the userData along with their profile pic uploaded on the storage will be deleted as well.\r\n  // If you added some other info or traces for the account, make sure to account for them when deleting the account.\r\n  deleteAccount() {\r\n    this.alertCtrl.create({\r\n      header: 'Confirm Delete',\r\n      message: 'Are you sure you want to delete your account? This cannot be undone.',\r\n      buttons: [\r\n        { text: 'Cancel' },\r\n        {\r\n          text: 'Delete',\r\n          handler: data => {\r\n            this.loadingProvider.show();\r\n            // Delete Firebase user\r\n            this.afAuth.auth.currentUser.delete()\r\n              .then((success) => {\r\n                // Delete profilePic of user on Firebase storage\r\n                this.imageProvider.deleteUserImageFile(this.user);\r\n                // Delete user data on Database\r\n                this.firestore.doc('/accounts/' + this.user.userId).delete().then(() => {\r\n                  this.loadingProvider.hide();\r\n                  this.loadingProvider.showToast(\"Your Account Deleted Successfully\");\r\n                  this.loginService.logout();\r\n                });\r\n              })\r\n              .catch((error) => {\r\n                this.loadingProvider.hide();\r\n                this.loadingProvider.showToast(\"Something went wrong\");\r\n              });\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  logout() {\r\n    this.loginService.logout();\r\n  }\r\n\r\n  viewPost(post) {\r\n    this.router.navigateByUrl('post/' + post.key);\r\n  }\r\n\r\n  viewUser(userId) {\r\n    this.router.navigateByUrl('profile/' + userId);\r\n  }\r\n\r\n  viewGroup(groupId) {\r\n    this.router.navigateByUrl('group/' + groupId);\r\n  }\r\n\r\n  async editProfile() {\r\n    const modal = await this.modalCtrl.create({\r\n      component: UserProfileModalPage,\r\n      componentProps: {\r\n        user: this.user\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  messageUser() {\r\n    this.router.navigateByUrl('/message/' + this.userId);\r\n  }\r\n\r\n  connectUser() {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Send Friend Request',\r\n      message: 'Do you want to send friend request to <b>' + this.user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Send',\r\n          handler: () => {\r\n            this.firebaseProvider.sendFriendRequest(this.userId);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n}","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{title}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button class=\\\"logout\\\" color=\\\"secondary\\\" (click)=\\\"logout()\\\">\\r\\n        Logout\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"user\\\">\\r\\n    <ion-row> \\r\\n      <div class=\\\"user-info\\\">\\r\\n        <div class=\\\"user-img\\\"> \\r\\n          <img src=\\\"{{user.img}}\\\" tappable (click)=\\\"setPhoto()\\\"\\r\\n          onError=\\\"this.src='./assets/images/default-dp_rect.png'\\\">\\r\\n        </div>\\r\\n        <div>\\r\\n          <ion-item lines=\\\"none\\\">\\r\\n          <ion-text class=\\\"profile-summary-name\\\">{{user.name}}</ion-text>\\r\\n          <ion-button *ngIf=\\\"myProfile\\\" color=\\\"primary\\\" slot=\\\"end\\\" (click)=\\\"editProfile()\\\" class=\\\"profile-edit-button\\\">Edit</ion-button>\\r\\n        </ion-item>\\r\\n        <ion-text class=\\\"profile-component-title ion-padding\\\">@{{user.username}}<span *ngIf=\\\"myProfile\\\"> · {{user.email}}</span></ion-text>\\r\\n      </div>\\r\\n        <br>\\r\\n        <div class=\\\"ion-no-border\\\">\\r\\n          <ion-item class=\\\"toggle-text\\\" lines=\\\"none\\\">\\r\\n            <ion-text>{{user.description}}</ion-text>\\r\\n          </ion-item>\\r\\n        </div>\\r\\n        <ion-row *ngIf=\\\"!myProfile\\\">\\r\\n          <div *ngIf=\\\"!messageMe\\\" class=\\\"ion-padding save\\\">\\r\\n            <ion-button color=\\\"secondary\\\" expand=\\\"block\\\" (click)=\\\"connectUser()\\\">Connect with me</ion-button>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"messageMe\\\" class=\\\"ion-padding save\\\">\\r\\n            <ion-button color=\\\"secondary\\\" expand=\\\"block\\\" (click)=\\\"messageUser()\\\">Message me</ion-button>\\r\\n          </div>\\r\\n        </ion-row>\\r\\n        <br><br>\\r\\n        <ion-item-divider *ngIf=\\\"myProfile\\\" class=\\\"profile-component-title\\\">Other Settings</ion-item-divider>\\r\\n    <ion-list *ngIf=\\\"myProfile\\\" lines=\\\"none\\\">\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"toggle-text\\\">Enable Public Visibility</ion-label>\\r\\n        <ion-toggle  slot=\\\"end\\\" color=\\\"secondary\\\" [(ngModel)]=\\\"user.publicVisibility\\\" (ionChange)=\\\"changeVisibility()\\\"></ion-toggle>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"toggle-text\\\">Show Online</ion-label>\\r\\n        <ion-toggle slot=\\\"end\\\" color=\\\"secondary\\\" [(ngModel)]=\\\"user.showOnline\\\" (ionChange)=\\\"changeStatus()\\\"></ion-toggle>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"toggle-text\\\">Enable Notification</ion-label>\\r\\n        <ion-toggle slot=\\\"end\\\" color=\\\"secondary\\\" [(ngModel)]=\\\"user.isPushEnabled\\\" [disabled]=\\\"isBrowser\\\"\\r\\n          (ionChange)=\\\"changeNotification()\\\">\\r\\n        </ion-toggle>\\r\\n      </ion-item>\\r\\n      <ion-item  routerLink=\\\"/blockedlist\\\">\\r\\n        <ion-label class=\\\"toggle-text\\\">Blocked List</ion-label>\\r\\n        <ion-icon slot=\\\"end\\\" name=\\\"arrow-forward-circle-outline\\\"></ion-icon>\\r\\n      </ion-item>\\r\\n      <ion-item tappable (click)=\\\"setPassword()\\\" *ngIf=\\\"user && user.provider == 'Email'\\\">\\r\\n        Update Password\\r\\n      </ion-item>\\r\\n     </ion-list>\\r\\n     <ion-item-divider class=\\\"profile-component-title\\\">Activity</ion-item-divider>\\r\\n     <ion-list class=\\\"activities\\\" lines=\\\"none\\\" > \\r\\n      <ion-item *ngIf=\\\"userPosts.length == 0\\\" class=\\\"toggle-text\\\">\\r\\n       <ion-label>You have not created or commented on any posts.</ion-label>\\r\\n      </ion-item>\\r\\n      <ion-item class=\\\"toggle-text activities-item\\\"  *ngFor=\\\"let item of userPosts\\\">\\r\\n        New post: <a class=\\\"link\\\" [routerLink]=\\\"['/post', item.key]\\\"> \\\"{{item.title}}\\\"</a>\\r\\n      <ion-text slot=\\\"end\\\" class=\\\"addedByDate\\\">{{item.date.toDate() | date:'mediumDate'}}</ion-text>  \\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"toggle-text activities-item\\\"  *ngFor=\\\"let item of userReactions\\\">\\r\\n      Reacted on: <a class=\\\"link\\\" [routerLink]=\\\"['/post', item.key]\\\"> \\\"{{item.title}}\\\"</a>\\r\\n    <ion-text slot=\\\"end\\\" class=\\\"addedByDate\\\">{{item.date.toDate() | date:'mediumDate'}}</ion-text>  \\r\\n  </ion-item>\\r\\n     </ion-list>\\r\\n     <ion-item-divider class=\\\"profile-component-title\\\">Groups</ion-item-divider>\\r\\n     <ion-list lines=\\\"none\\\">\\r\\n      <ion-item *ngIf=\\\"groups.length == 0\\\" class=\\\"toggle-text\\\">\\r\\n          <ion-label>You have not joined any groups.</ion-label>\\r\\n      </ion-item>\\r\\n        <ion-item text-wrap *ngFor=\\\"let group of groups\\\" (click)=\\\"viewGroup(group.key)\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <ion-img src=\\\"{{group.img}}\\\"></ion-img>\\r\\n          </ion-avatar>\\r\\n          <ion-label class=\\\"toggle-text\\\">\\r\\n              <ion-label class=\\\"ion-no-padding\\\">{{group.name}}<br/>\\r\\n              {{group.description}}</ion-label>\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n    </ion-list>\\r\\n    <ion-item-divider class=\\\"profile-component-title\\\">Connected to:</ion-item-divider>\\r\\n    <ion-list lines=\\\"none\\\">\\r\\n      <ion-list lines=\\\"none\\\">\\r\\n        <ion-item  *ngIf=\\\"friends.length == 0\\\" class=\\\"toggle-text\\\">\\r\\n          <ion-label>You are not connected to any fellow members.</ion-label>\\r\\n        </ion-item>  \\r\\n        <ion-item text-wrap *ngFor=\\\"let friend of friends\\\" (click)=\\\"viewUser(friend.key)\\\">\\r\\n          <ion-avatar slot=\\\"start\\\">\\r\\n            <ion-img src=\\\"{{friend.img}}\\\"></ion-img>\\r\\n          </ion-avatar>\\r\\n          <ion-label class=\\\"toggle-text\\\">\\r\\n              <ion-label class=\\\"ion-no-padding\\\">{{friend.username}}<br/>\\r\\n              {{friend.description}}</ion-label>\\r\\n          </ion-label>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </ion-list>\\r\\n    </div>\\r\\n</ion-row>\\r\\n<ion-row *ngIf=\\\"myProfile\\\">\\r\\n  <div class=\\\"ion-padding save\\\">\\r\\n    <ion-button color=\\\"danger\\\" expand=\\\"block\\\" (click)=\\\"deleteAccount()\\\">Delete Account</ion-button>\\r\\n  </div>\\r\\n</ion-row>\\r\\n</div>\\r\\n</ion-content>\";","export default \":host {\\n  --page-margin: var(--app-narrow-margin);\\n  --page-background: var(--app-background);\\n}\\n\\n.user-info {\\n  width: 100%;\\n}\\n\\n.save {\\n  height: 25px;\\n  width: 100%;\\n  text-transform: initial !important;\\n}\\n\\n.myform {\\n  font-family: \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  font-weight: 400;\\n  font-size: 14px;\\n  line-height: 19px;\\n  -webkit-font-smoothing: subpixel-antialiased;\\n  -moz-osx-font-smoothing: auto;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n.toggle-text {\\n  font-family: \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  font-weight: 400;\\n  font-size: 14px;\\n  line-height: 19px;\\n  -webkit-font-smoothing: subpixel-antialiased;\\n  -moz-osx-font-smoothing: auto;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n.profile-summary-name {\\n  font-family: \\\"HelveticaNeue-Medium\\\", \\\"Helvetica Neue Medium\\\", \\\"Helvetica-Bold\\\", \\\"Roboto-Medium\\\", \\\"Segoe UI Semibold\\\", Arial-Bold, sans-serif;\\n  font-weight: 500;\\n  font-size: 22px;\\n  line-height: 26px;\\n  margin: 4px 0;\\n  display: inline-block;\\n}\\n\\n.profile-component-title {\\n  font-family: \\\"HelveticaNeue-Medium\\\", \\\"Helvetica Neue Medium\\\", Helvetica-Bold, \\\"Roboto-Medium\\\", \\\"Segoe UI Semibold\\\", Arial-Bold, sans-serif;\\n  font-weight: 500;\\n  font-size: 14px;\\n  line-height: 19px;\\n}\\n\\n.addedByDate {\\n  font-style: italic;\\n  font-size: 12px;\\n}\\n\\n.logout {\\n  text-transform: capitalize !important;\\n}\\n\\n.profile-edit-button {\\n  font-family: system-ui, -apple-system, BlinkMacSystemFont, \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  font-weight: 400;\\n  font-size: 12px;\\n  line-height: 16px;\\n}\\n\\n.link {\\n  color: #007B99;\\n  text-decoration: none;\\n}\\n\\n.activities {\\n  padding-bottom: 20px;\\n}\\n\\n.activities .activities-item {\\n  height: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJvZmlsZS9wcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHVDQUFBO0VBQ0Esd0NBQUE7QUFDSjs7QUFFRTtFQUNFLFdBQUE7QUFDSjs7QUFFRTtFQUNFLFlBQUE7RUFDQSxXQUFBO0VBQ0Esa0NBQUE7QUFDSjs7QUFFRTtFQUNFLGtHQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSw0Q0FBQTtFQUNBLDZCQUFBO0VBQ0EsZ0JBQUE7RUFDQSx1QkFBQTtBQUNKOztBQUVFO0VBQ0Usa0dBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLDRDQUFBO0VBQ0EsNkJBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0FBQ0o7O0FBRUU7RUFDRSw0SUFBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLHFCQUFBO0FBQ0o7O0FBRUU7RUFDRSwwSUFBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0FBQ0o7O0FBRUE7RUFDRSxrQkFBQTtFQUNBLGVBQUE7QUFDRjs7QUFFRTtFQUNFLHFDQUFBO0FBQ0o7O0FBRUU7RUFDRSxnSkFBQTtFQUNBLGdCQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0FBQ0o7O0FBRUE7RUFDRSxjQUFBO0VBQ0EscUJBQUE7QUFDRjs7QUFFQTtFQUNFLG9CQUFBO0FBQ0Y7O0FBQUU7RUFDQSxZQUFBO0FBRUYiLCJmaWxlIjoic3JjL2FwcC9wcm9maWxlL3Byb2ZpbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gICAgLS1wYWdlLW1hcmdpbjogdmFyKC0tYXBwLW5hcnJvdy1tYXJnaW4pO1xyXG4gICAgLS1wYWdlLWJhY2tncm91bmQ6IHZhcigtLWFwcC1iYWNrZ3JvdW5kKTtcclxuICB9XHJcblxyXG4gIC51c2VyLWluZm8ge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG5cclxuICAuc2F2ZSB7XHJcbiAgICBoZWlnaHQ6IDI1cHg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHRleHQtdHJhbnNmb3JtOiBpbml0aWFsICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICAubXlmb3JtIHtcclxuICAgIGZvbnQtZmFtaWx5OiBcIkhlbHZldGljYU5ldWVcIiwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBIZWx2ZXRpY2EsIFwiUm9ib3RvXCIsIFwiU2Vnb2UgVUlcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XHJcbiAgICBmb250LXdlaWdodDogNDAwO1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDE5cHg7XHJcbiAgICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBzdWJwaXhlbC1hbnRpYWxpYXNlZDtcclxuICAgIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBhdXRvO1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gIH1cclxuXHJcbiAgLnRvZ2dsZS10ZXh0IHtcclxuICAgIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhTmV1ZScsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgJ1JvYm90bycsICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAxOXB4O1xyXG4gICAgLXdlYmtpdC1mb250LXNtb290aGluZzogc3VicGl4ZWwtYW50aWFsaWFzZWQ7XHJcbiAgICAtbW96LW9zeC1mb250LXNtb290aGluZzogYXV0bztcclxuICAgIG92ZXJmbG93OiBoaWRkZW47IFxyXG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcbiAgfVxyXG5cclxuICAucHJvZmlsZS1zdW1tYXJ5LW5hbWUge1xyXG4gICAgZm9udC1mYW1pbHk6ICdIZWx2ZXRpY2FOZXVlLU1lZGl1bScsICdIZWx2ZXRpY2EgTmV1ZSBNZWRpdW0nLCAnSGVsdmV0aWNhLUJvbGQnLCAnUm9ib3RvLU1lZGl1bScsICdTZWdvZSBVSSBTZW1pYm9sZCcsIEFyaWFsLUJvbGQsIHNhbnMtc2VyaWY7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG4gICAgZm9udC1zaXplOiAyMnB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDI2cHg7XHJcbiAgICBtYXJnaW46IDRweCAwO1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIH1cclxuXHJcbiAgLnByb2ZpbGUtY29tcG9uZW50LXRpdGxlIHtcclxuICAgIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhTmV1ZS1NZWRpdW0nLCAnSGVsdmV0aWNhIE5ldWUgTWVkaXVtJywgSGVsdmV0aWNhLUJvbGQsICdSb2JvdG8tTWVkaXVtJywgJ1NlZ29lIFVJIFNlbWlib2xkJywgQXJpYWwtQm9sZCwgc2Fucy1zZXJpZjtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBsaW5lLWhlaWdodDogMTlweDtcclxufVxyXG5cclxuLmFkZGVkQnlEYXRlIHtcclxuICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgZm9udC1zaXplOiAxMnB4O1xyXG4gIH1cclxuXHJcbiAgLmxvZ291dCB7XHJcbiAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgLnByb2ZpbGUtZWRpdC1idXR0b24ge1xyXG4gICAgZm9udC1mYW1pbHk6IHN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnSGVsdmV0aWNhTmV1ZScsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgJ1JvYm90bycsICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcclxuICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAxNnB4O1xyXG59XHJcblxyXG4ubGluayB7XHJcbiAgY29sb3I6ICMwMDdCOTk7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG59XHJcblxyXG4uYWN0aXZpdGllcyB7XHJcbiAgcGFkZGluZy1ib3R0b206IDIwcHg7XHJcbiAgLmFjdGl2aXRpZXMtaXRlbSB7XHJcbiAgaGVpZ2h0OiAzMHB4O1xyXG4gIH1cclxuXHJcbiAgLmVtcHR5LWxpc3Qge1xyXG4gICAgXHJcbiAgfVxyXG59Il19 */\";"]}