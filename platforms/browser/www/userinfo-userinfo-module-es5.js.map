{"version":3,"sources":["webpack:///src/app/userinfo/userinfo.page.html","webpack:///src/app/userinfo/userinfo.module.ts","webpack:///src/app/userinfo/userinfo.page.scss","webpack:///src/app/userinfo/userinfo.page.ts"],"names":["routes","path","component","UserinfoPageModule","imports","forChild","declarations","UserinfoPage","router","modalCtrl","dataProvider","loadingProvider","alertCtrl","firebaseProvider","route","userId","snapshot","params","id","console","log","show","getUser","snapshotChanges","subscribe","user","$key","key","payload","data","hide","currentUser","uid","friends","getRequests","requests","friendRequests","requestsSent","ref","update","blocked","then","showToast","navigateByUrl","img","alert","create","header","message","name","buttons","text","handler","acceptFriendRequest","r","present","deleteFriendRequest","cancelFriendRequest","sendFriendRequest","indexOf","selector","template"],"mappings":"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","file":"userinfo-userinfo-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title *ngIf=\\\"user\\\">{{user.name}}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"user\\\">\\r\\n    <ion-row padding> \\r\\n    <div class=\\\"user-info\\\">\\r\\n      <div class=\\\"user-img\\\">\\r\\n        <img src=\\\"{{user.img}}\\\">\\r\\n      </div>\\r\\n\\r\\n    <img src=\\\"{{user.img}}\\\" (click)=\\\"enlargeImage(user.img)\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\">\\r\\n    <h4 style=\\\"margin:0\\\">{{user.name}}</h4>\\r\\n    <p style=\\\"color:#aaa;margin:0\\\">@{{user.username}}</p>\\r\\n    <p style=\\\"color:#444\\\">{{user.description}}</p>\\r\\n    <div style=\\\"border-top: 1px solid #ececec; padding: 10px;\\\">\\r\\n      <!-- Show actions based on the status of the user in relation to the current logged in user. -->\\r\\n      <div *ngIf=\\\"friendRequests && friendRequests.indexOf(user.$key) > -1\\\">\\r\\n        <p class=\\\"info\\\">Sent you a friend request.</p>\\r\\n        <ion-button size=\\\"small\\\" (click)=\\\"rejectFriendRequest()\\\">\\r\\n          Decline\\r\\n        </ion-button>\\r\\n        <ion-button size=\\\"small\\\" (click)=\\\"acceptFriendRequest()\\\">\\r\\n          Accept\\r\\n        </ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"requestsSent && requestsSent.indexOf(user.$key) > -1\\\">\\r\\n        <ion-button size=\\\"small\\\" (click)=\\\"cancelFriendRequest()\\\">Cancel\\r\\n          Request</ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"canAdd()\\\">\\r\\n        <ion-button size=\\\"small\\\" (click)=\\\"sendFriendRequest()\\\">Add Friend</ion-button>\\r\\n      </div>\\r\\n      <div *ngIf=\\\"friends && friends.indexOf(user.$key) > -1\\\">\\r\\n        <ion-button size=\\\"small\\\" (click)=\\\"sendMessage()\\\">Start Chat</ion-button>\\r\\n        <ion-button size=\\\"small\\\" (click)=\\\"block()\\\">Block User</ion-button>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n  </div>\\r\\n  </ion-row>\\r\\n  </div>\\r\\n</ion-content>\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { UserinfoPage } from './userinfo.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: UserinfoPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [UserinfoPage]\r\n})\r\nexport class UserinfoPageModule {}\r\n","export default \":host {\\n  --page-margin: var(--app-narrow-margin);\\n  --page-background: var(--app-background);\\n}\\n\\n.user-info {\\n  margin: var(--page-margin) var(--page-margin) var(--page-margin) var(--page-margin);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXNlcmluZm8vdXNlcmluZm8ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksdUNBQUE7RUFDQSx3Q0FBQTtBQUNKOztBQUVBO0VBQ0ksbUZBQUE7QUFDSiIsImZpbGUiOiJzcmMvYXBwL3VzZXJpbmZvL3VzZXJpbmZvLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICAgIC0tcGFnZS1tYXJnaW46IHZhcigtLWFwcC1uYXJyb3ctbWFyZ2luKTtcclxuICAgIC0tcGFnZS1iYWNrZ3JvdW5kOiB2YXIoLS1hcHAtYmFja2dyb3VuZCk7XHJcbiAgfVxyXG5cclxuLnVzZXItaW5mbyB7XHJcbiAgICBtYXJnaW46IHZhcigtLXBhZ2UtbWFyZ2luKSB2YXIoLS1wYWdlLW1hcmdpbikgdmFyKC0tcGFnZS1tYXJnaW4pIHZhcigtLXBhZ2UtbWFyZ2luKTtcclxuICAgIC51c2VyLWltZyB7XHJcbiAgXHJcbiAgICB9XHJcbn0iXX0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { DataService } from '../services/data.service';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { AlertController, ModalController } from '@ionic/angular';\r\nimport { FirebaseService } from '../services/firebase.service';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport * as firebase from 'firebase';\r\n\r\n@Component({\r\n  selector: 'app-userinfo',\r\n  templateUrl: './userinfo.page.html',\r\n  styleUrls: ['./userinfo.page.scss'],\r\n})\r\nexport class UserinfoPage implements OnInit {\r\n\r\n\r\n  user: any;\r\n  userId: any;\r\n  friendRequests: any;\r\n  requestsSent: any;\r\n  friends: any;\r\n  alert: any;\r\n  // UserInfoPage\r\n  // This is the page where the user can view user information, and do appropriate actions based on their relation to the current logged in user.\r\n  constructor(\r\n    // public navCtrl: NavController,\r\n    // public navParams: NavParams,\r\n    private router: Router,\r\n    public modalCtrl: ModalController,\r\n    public dataProvider: DataService,\r\n    public loadingProvider: LoadingService,\r\n    public alertCtrl: AlertController,\r\n    public firebaseProvider: FirebaseService,\r\n    private route: ActivatedRoute\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    // this.userId = this.navParams.get('userId');\r\n    this.userId = this.route.snapshot.params.id;\r\n    console.log(this.userId);\r\n    this.loadingProvider.show();\r\n    // Get user info.\r\n    this.dataProvider.getUser(this.userId).snapshotChanges().subscribe((user: any) => {\r\n      this.user = { $key: user.key, ...user.payload.data() };\r\n      console.log(this.user);\r\n      this.loadingProvider.hide();\r\n    });\r\n    // Get friends of current logged in user.\r\n    this.dataProvider.getUser(firebase.auth().currentUser.uid).snapshotChanges().subscribe((user: any) => {\r\n      if (user.payload.data() != null)\r\n        this.friends = user.payload.data().friends;\r\n    });\r\n    // Get requests of current logged in user.\r\n    this.dataProvider.getRequests(firebase.auth().currentUser.uid).snapshotChanges().subscribe(((requests: any) => {\r\n      console.log(requests.payload.data())\r\n      if (requests.payload.data() != null) {\r\n        this.friendRequests = requests.payload.data().friendRequests;\r\n        this.requestsSent = requests.payload.data().requestsSent;\r\n      }\r\n    }));\r\n  }\r\n\r\n  block() {\r\n    this.loadingProvider.show();\r\n    console.log(\"block function\");\r\n    firebase.database().ref('accounts/' + firebase.auth().currentUser.uid + '/conversations/' + this.userId).update({\r\n      blocked: true\r\n    }).then(() => {\r\n      this.loadingProvider.hide();\r\n      this.loadingProvider.showToast(\"User Blocked\");\r\n      this.router.navigateByUrl('/');\r\n    }).catch(() => {\r\n      this.loadingProvider.hide();\r\n      this.loadingProvider.showToast(\"Something went wrong\");\r\n    });\r\n\r\n  }\r\n\r\n  // Enlarge user's profile image.\r\n  enlargeImage(img) {\r\n    // let imageModal = this.modalCtrl.create(\"ImageModalPage\", { img: img });\r\n    // imageModal.present();\r\n  }\r\n\r\n  // Accept friend request.\r\n  acceptFriendRequest() {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Confirm Friend Request',\r\n      message: 'Do you want to accept <b>' + this.user.name + '</b> as your friend?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Accept',\r\n          handler: () => {\r\n            this.firebaseProvider.acceptFriendRequest(this.userId);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Deny friend request.\r\n  rejectFriendRequest() {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Reject Friend Request',\r\n      message: 'Do you want to reject <b>' + this.user.name + '</b> as your friend?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Reject',\r\n          handler: () => {\r\n            this.firebaseProvider.deleteFriendRequest(this.userId);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Cancel friend request sent.\r\n  cancelFriendRequest() {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Friend Request Pending',\r\n      message: 'Do you want to delete your friend request to <b>' + this.user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Delete',\r\n          handler: () => {\r\n            this.firebaseProvider.cancelFriendRequest(this.userId);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Send friend request.\r\n  sendFriendRequest() {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Send Friend Request',\r\n      message: 'Do you want to send friend request to <b>' + this.user.name + '</b>?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          handler: data => { }\r\n        },\r\n        {\r\n          text: 'Send',\r\n          handler: () => {\r\n            this.firebaseProvider.sendFriendRequest(this.userId);\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  // Open chat with this user.\r\n  sendMessage() {\r\n    this.router.navigateByUrl('/message/' + this.userId);\r\n    // this.navCtrl.push(MessagePage, { userId: this.userId });\r\n  }\r\n\r\n  // Check if user can be added, meaning user is not yet friends nor has sent/received any friend requests.\r\n  canAdd() {\r\n    if (this.friendRequests) {\r\n      if (this.friendRequests.indexOf(this.userId) > -1) {\r\n        return false;\r\n      }\r\n    }\r\n    if (this.requestsSent) {\r\n      if (this.requestsSent.indexOf(this.userId) > -1) {\r\n        return false;\r\n      }\r\n    }\r\n    if (this.friends) {\r\n      if (this.friends.indexOf(this.userId) > -1) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n}\r\n"]}