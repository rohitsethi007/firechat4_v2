{"version":3,"sources":["webpack:///src/app/group/group.page.scss","webpack:///src/app/group/group.module.ts","webpack:///src/app/group/group.page.ts","webpack:///src/app/group/group.page.html"],"names":["routes","path","component","GroupPageModule","imports","forChild","declarations","GroupPage","dataProvider","navCtrl","modalCtrl","firestore","alertCtrl","imageProvider","loadingProvider","camera","keyboard","actionSheet","contacts","geolocation","route","router","popoverCtrl","startIndex","scrollDirection","numberOfMessages","polls","resources","events","loggedInUserIsMember","resourceTags","notifications","toggled","posts","numberOfPosts","maxNoOfPosts","maxNoOfEvents","maxNoOfPolls","maxNoOfResources","loggedInUserId","currentUser","uid","event","emojitext","show","tab","title","searchResource","searchPoll","searchEvent","getCurrentUser","snapshotChanges","subscribe","user","payload","data","getGroupDetailsandPosts","hide","that","setTimeout","messages","messagesToShow","ionViewDidEnter","setMessagesRead","doc","groupId","update","messagesRead","length","keyCode","content","nativeElement","scrollBottom","scrollHeight","scrollTop","message","sender","type","userId","navigateByUrl","JSON","parse","stringify","push","date","Date","toString","getGroup","img","action","create","header","buttons","text","handler","console","log","uploadGroupPhotoMessage","PictureSourceType","CAMERA","then","url","sendPhotoMessage","PHOTOLIBRARY","uploadGroupVideoMessage","sendVideoMessage","getCurrentPosition","timeout","res","locationMessage","coords","latitude","longitude","mapUrl","confirm","send","r","present","locationErr","pickContact","displayName","phoneNumbers","value","err","role","$event","center","x","y","presentPopover","alert","group","members","name","icon","back","myEvent","ev","target","getBoundingClientRect","top","left","componentProps","translucent","popover","snapshot","params","id","subscription","forEach","memberId","getUser","member","key","$key","addUpdateOrRemoveMember","getGroupMessages","messagesRes","undefined","avatar","i","getGroupMembers","memberIdsRes","memberIds","includes","updateDateTime","setInterval","exists","firstDataSetPost","collection","ref","where","orderBy","limit","onSnapshot","po","lastDataSetPost","docs","loadEachPostData","post","p","startDate","endDate","seconds","getTime","showNewIcon","reactions","element","reaction","foundSmiley","find","el","addedByUser","addedByKey","getCurrentUserId","reactionType","some","showSmiley","foundHug","showHug","postTags","filter","isChecked","addOrUpdatePost","indexOf","groupMembers","index","index1","j","splice","getGroupDetailsandMessages","getPolls","getResources","getEvents","firstDataSetPoll","lastDataSetPoll","loadEachPollData","addOrUpdatePoll","poll","resource","firstDataSetResources","lastDataSetResources","loadEachResourceData","foundBookmark","showBookmark","addOrUpdateResource","firstDataSetEvent","lastDataSetEvent","loadEachEventData","foundCheckin","showCheckin","addOrUpdateEvent","openModal","groupTags","dismiss","resourceTagsString","val","replace","totalPollCount","pollTagsString","pollTags","pollOptions","dateCreated","postTagsString","eventTagsString","eventTags","backdropDismiss","mode","cssClass","newPost","newResource","newPoll","newEvent","addPostReaction","totalReactionCount","removePostReaction","postIndex","findIndex","get","account","addedByUsername","username","addedByImg","updatePostReactions","found","values","Object","keys","map","e","modal","createPostOptionButtons","showToast","addReports","cancelButton","reportButton","reportPost","notificationButton","deletePostButton","deletePost","unFollowPost","followPost","disabled","nextDataSetPost","startAfter","complete","nextDataSetPoll","nextDataSetEvent","nextDataSetResources","selector","template"],"mappings":"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","file":"group-group-module-es5.js","sourcesContent":["export default \":host {\\n  --page-margin: var(--app-fair-margin);\\n  --page-background: var(--app-background);\\n  --page-rating-2-color: #aa6c39;\\n  --page-rating-1-color: #bbb2b2;\\n}\\n\\n.tab-title {\\n  size: 9px;\\n}\\n\\nion-segment-button {\\n  background-color: var(--page-background);\\n}\\n\\n.filters-toolbar {\\n  --padding-start: var(--page-margin);\\n  --padding-end: var(--page-margin);\\n  --padding-top: var(--page-margin);\\n  --padding-bottom: var(--page-margin);\\n  --border-style: 10px;\\n}\\n\\n.filters-toolbar .searchbar-row {\\n  --ion-grid-column-padding: 0px;\\n}\\n\\n.filters-toolbar .searchbar-row ion-searchbar.items-searchbar {\\n  padding: 0px;\\n  height: 100%;\\n  contain: content;\\n}\\n\\n.filters-toolbar .searchbar-row .call-to-action-col {\\n  max-width: -webkit-fit-content;\\n  max-width: -moz-fit-content;\\n  max-width: fit-content;\\n  flex-shrink: 0;\\n  flex-grow: 0;\\n  display: flex;\\n  justify-content: flex-end;\\n}\\n\\n.filters-toolbar .searchbar-row .call-to-action-col .filters-btn {\\n  --padding-start: 6px;\\n  --padding-end: 6px;\\n  margin: 0px;\\n  font-size: 15px;\\n  height: initial;\\n}\\n\\n.listing-item {\\n  background-color: var(--page-background);\\n}\\n\\n.icon {\\n  display: inline-block;\\n  vertical-align: middle;\\n}\\n\\n.text {\\n  display: inline-block;\\n  vertical-align: middle;\\n  padding-left: 3px;\\n  text-transform: capitalize !important;\\n}\\n\\n.addedByTitle {\\n  margin-left: 10px;\\n  line-height: 5px;\\n  text-decoration: none;\\n}\\n\\n.addedByDate {\\n  margin-left: 10px;\\n  font-style: italic;\\n}\\n\\n.addedByImg {\\n  width: 50px;\\n  float: left;\\n  vertical-align: middle;\\n}\\n\\n.newIcon {\\n  margin-left: 10px;\\n  height: 40px;\\n  vertical-align: middle;\\n}\\n\\n.message {\\n  font-family: \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  font-weight: 400;\\n  font-size: 14px;\\n  line-height: 19px;\\n  -webkit-font-smoothing: subpixel-antialiased;\\n  -moz-osx-font-smoothing: auto;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n.message .slider {\\n  margin-bottom: 5px;\\n}\\n\\n.message .slider .bgSizeContain {\\n  background-repeat: no-repeat;\\n  background-position: center center;\\n  background-size: 100%;\\n  width: 100%;\\n  height: 200px;\\n  text-shadow: white 0px 0px 2px;\\n  font-size: 16px;\\n  border-radius: 10px;\\n}\\n\\n.message .reactions {\\n  margin-bottom: 0px;\\n  margin-left: -10px;\\n}\\n\\n.message .tags-wrapper {\\n  padding-top: 5px;\\n}\\n\\n.message .tags-wrapper .tags {\\n  padding-right: 5px;\\n}\\n\\n.message .tags-wrapper .tags .item-rating {\\n  background-color: rgba(var(--page-color-rgb), 0.35);\\n  padding-right: 15px;\\n  font-size: 12px;\\n  font-weight: bold;\\n  width: 100%;\\n  display: block;\\n  text-align: center;\\n  color: #aa6c39;\\n}\\n\\n.group-info {\\n  margin: var(--page-margin) var(--page-margin) var(--page-margin) var(--page-margin);\\n}\\n\\n.group-info .group-name {\\n  padding-top: var(--page-margin);\\n  padding-bottom: var(--page-margin);\\n  font-family: \\\"HelveticaNeue\\\", \\\"Helvetica Neue\\\", Helvetica, \\\"Roboto\\\", \\\"Segoe UI\\\", Arial, sans-serif;\\n  text-align: left;\\n  font-weight: bold;\\n  font-size: 19px;\\n}\\n\\n.group-info .group-tags {\\n  padding-bottom: calc(var(--page-margin) / 3);\\n}\\n\\n.group-info .group-tags .tags {\\n  padding-right: 5px;\\n}\\n\\n.group-info .group-tags .tags .item-rating {\\n  background-color: rgba(var(--page-color-rgb), 0.35);\\n  padding-right: calc(var(--page-margin) / 2);\\n  font-size: 14px;\\n  font-weight: bold;\\n  width: 100%;\\n  display: block;\\n  text-align: center;\\n}\\n\\n.group-info .group-tags .tags .item-rating[ratingBase=\\\"0\\\"] {\\n  color: var(--page-rating-1-color);\\n}\\n\\n.group-info .group-tags .tags .item-rating[ratingBase=\\\"1\\\"] {\\n  color: var(--page-rating-2-color);\\n}\\n\\n.group-info .group-member-name {\\n  padding-left: var(--page-margin);\\n}\\n\\n.empty-list {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZ3JvdXAvZ3JvdXAucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UscUNBQUE7RUFDQSx3Q0FBQTtFQUNBLDhCQUFBO0VBQ0EsOEJBQUE7QUFDRjs7QUFDQTtFQUNFLFNBQUE7QUFFRjs7QUFBQTtFQUNFLHdDQUFBO0FBR0Y7O0FBQUE7RUFDRSxtQ0FBQTtFQUNBLGlDQUFBO0VBQ0EsaUNBQUE7RUFDQSxvQ0FBQTtFQUNBLG9CQUFBO0FBR0Y7O0FBREU7RUFDRSw4QkFBQTtBQUdKOztBQURJO0VBQ0UsWUFBQTtFQUVBLFlBQUE7RUFFQSxnQkFBQTtBQUNOOztBQUVJO0VBRUUsOEJBQUE7RUFBQSwyQkFBQTtFQUFBLHNCQUFBO0VBQ0EsY0FBQTtFQUNBLFlBQUE7RUFFQSxhQUFBO0VBQ0EseUJBQUE7QUFGTjs7QUFJTTtFQUNFLG9CQUFBO0VBQ0Esa0JBQUE7RUFFQSxXQUFBO0VBQ0EsZUFBQTtFQUVBLGVBQUE7QUFKUjs7QUFXQTtFQUNBLHdDQUFBO0FBUkE7O0FBV0E7RUFDQSxxQkFBQTtFQUNBLHNCQUFBO0FBUkE7O0FBV0E7RUFDQyxxQkFBQTtFQUNBLHNCQUFBO0VBQ0EsaUJBQUE7RUFDQSxxQ0FBQTtBQVJEOztBQVVBO0VBQ0MsaUJBQUE7RUFDQSxnQkFBQTtFQUNBLHFCQUFBO0FBUEQ7O0FBU0E7RUFDQSxpQkFBQTtFQUNDLGtCQUFBO0FBTkQ7O0FBUUE7RUFDRSxXQUFBO0VBQ0EsV0FBQTtFQUNBLHNCQUFBO0FBTEY7O0FBT0E7RUFDRSxpQkFBQTtFQUNBLFlBQUE7RUFDQSxzQkFBQTtBQUpGOztBQU1BO0VBQ0Usa0dBQUE7RUFDQSxnQkFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLDRDQUFBO0VBQ0EsNkJBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0FBSEY7O0FBS0U7RUFDRSxrQkFBQTtBQUhKOztBQUlJO0VBQ0UsNEJBQUE7RUFDQSxrQ0FBQTtFQUNBLHFCQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSw4QkFBQTtFQUNBLGVBQUE7RUFHQSxtQkFBQTtBQUZOOztBQU1FO0VBQ0Usa0JBQUE7RUFDQSxrQkFBQTtBQUpKOztBQU1FO0VBQ0UsZ0JBQUE7QUFKSjs7QUFNSTtFQUNFLGtCQUFBO0FBSk47O0FBTUk7RUFDRSxtREFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLGNBQUE7QUFKTjs7QUFVQTtFQUNFLG1GQUFBO0FBUEY7O0FBV0U7RUFDRSwrQkFBQTtFQUNBLGtDQUFBO0VBQ0Esa0dBQUE7RUFDQSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtBQVRKOztBQVdFO0VBQ0UsNENBQUE7QUFUSjs7QUFXSTtFQUNFLGtCQUFBO0FBVE47O0FBV0k7RUFFRSxtREFBQTtFQU1RLDJDQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtBQWZkOztBQWdCYztFQUNFLGlDQUFBO0FBZGhCOztBQWdCYztFQUNFLGlDQUFBO0FBZGhCOztBQXFCRTtFQUNFLGdDQUFBO0FBbkJKOztBQXVCQTtFQUNFLGtCQUFBO0FBcEJGIiwiZmlsZSI6InNyYy9hcHAvZ3JvdXAvZ3JvdXAucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xyXG4gIC0tcGFnZS1tYXJnaW46IHZhcigtLWFwcC1mYWlyLW1hcmdpbik7XHJcbiAgLS1wYWdlLWJhY2tncm91bmQ6IHZhcigtLWFwcC1iYWNrZ3JvdW5kKTtcclxuICAtLXBhZ2UtcmF0aW5nLTItY29sb3I6ICNhYTZjMzk7XHJcbiAgLS1wYWdlLXJhdGluZy0xLWNvbG9yOiAjYmJiMmIyO1xyXG59XHJcbi50YWItdGl0bGUge1xyXG4gIHNpemU6IDlweDtcclxufVxyXG5pb24tc2VnbWVudC1idXR0b24ge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhZ2UtYmFja2dyb3VuZCk7XHJcbn1cclxuXHJcbi5maWx0ZXJzLXRvb2xiYXIge1xyXG4gIC0tcGFkZGluZy1zdGFydDogdmFyKC0tcGFnZS1tYXJnaW4pO1xyXG4gIC0tcGFkZGluZy1lbmQ6IHZhcigtLXBhZ2UtbWFyZ2luKTtcclxuICAtLXBhZGRpbmctdG9wOiB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgLS1wYWRkaW5nLWJvdHRvbTogdmFyKC0tcGFnZS1tYXJnaW4pO1xyXG4gIC0tYm9yZGVyLXN0eWxlOiAxMHB4O1xyXG5cclxuICAuc2VhcmNoYmFyLXJvdyB7XHJcbiAgICAtLWlvbi1ncmlkLWNvbHVtbi1wYWRkaW5nOiAwcHg7XHJcblxyXG4gICAgaW9uLXNlYXJjaGJhci5pdGVtcy1zZWFyY2hiYXIge1xyXG4gICAgICBwYWRkaW5nOiAwcHg7XHJcbiAgICAgIC8vIG92ZXJyaWRlIElvbmljIGZpeGVkIGhlaWdodFxyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgIC8vIExlYXJuIG1vcmUgYWJvdXQgQ1NTIGNvbnRhaW4gcHJvcGVydHkgaGVyZTogaHR0cHM6Ly90ZXJtdmFkZXIuZ2l0aHViLmlvL2Nzcy1jb250YWluL1xyXG4gICAgICBjb250YWluOiBjb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC5jYWxsLXRvLWFjdGlvbi1jb2wge1xyXG4gICAgICAvL3BhZGRpbmctaW5saW5lLXN0YXJ0OiB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgICAgIG1heC13aWR0aDogZml0LWNvbnRlbnQ7XHJcbiAgICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgICBmbGV4LWdyb3c6IDA7XHJcblxyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xyXG5cclxuICAgICAgLmZpbHRlcnMtYnRuIHtcclxuICAgICAgICAtLXBhZGRpbmctc3RhcnQ6IDZweDtcclxuICAgICAgICAtLXBhZGRpbmctZW5kOiA2cHg7XHJcblxyXG4gICAgICAgIG1hcmdpbjogMHB4O1xyXG4gICAgICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgICAgICAvLyBvdmVycmlkZSBJb25pYyBmaXhlZCBoZWlnaHRcclxuICAgICAgICBoZWlnaHQ6IGluaXRpYWw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG4ubGlzdGluZy1pdGVtIHtcclxuYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcGFnZS1iYWNrZ3JvdW5kKTtcclxufVxyXG5cclxuLmljb24ge1xyXG5kaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbnZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuXHJcbi50ZXh0e1xyXG4gZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuIHBhZGRpbmctbGVmdDogM3B4O1xyXG4gdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemUgIWltcG9ydGFudDtcclxufVxyXG4uYWRkZWRCeVRpdGxlIHtcclxuIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gbGluZS1oZWlnaHQ6IDVweDtcclxuIHRleHQtZGVjb3JhdGlvbjogbm9uZSBcclxufVxyXG4uYWRkZWRCeURhdGUge1xyXG5tYXJnaW4tbGVmdDogMTBweDtcclxuIGZvbnQtc3R5bGU6IGl0YWxpYztcclxufVxyXG4uYWRkZWRCeUltZyB7XHJcbiAgd2lkdGg6IDUwcHg7XHJcbiAgZmxvYXQ6IGxlZnQ7XHJcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxufVxyXG4ubmV3SWNvbiB7XHJcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbiAgaGVpZ2h0OiA0MHB4O1xyXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbn1cclxuLm1lc3NhZ2Uge1xyXG4gIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhTmV1ZScsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgJ1JvYm90bycsICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gIGZvbnQtd2VpZ2h0OiA0MDA7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAxOXB4O1xyXG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IHN1YnBpeGVsLWFudGlhbGlhc2VkO1xyXG4gIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBhdXRvO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47IFxyXG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG5cclxuICAuc2xpZGVyIHtcclxuICAgIG1hcmdpbi1ib3R0b206IDVweDtcclxuICAgIC5iZ1NpemVDb250YWluIHtcclxuICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcclxuICAgICAgYmFja2dyb3VuZC1zaXplOiAxMDAlO1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgaGVpZ2h0OiAyMDBweDtcclxuICAgICAgdGV4dC1zaGFkb3c6IHdoaXRlIDBweCAwcHggMnB4O1xyXG4gICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgICAgLW1vei1ib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIH1cclxuICB9XHJcblxyXG4gIC5yZWFjdGlvbnMge1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IC0xMHB4O1xyXG4gIH0gXHJcbiAgLnRhZ3Mtd3JhcHBlciB7XHJcbiAgICBwYWRkaW5nLXRvcDogNXB4O1xyXG4gICBcclxuICAgIC50YWdzIHtcclxuICAgICAgcGFkZGluZy1yaWdodDogNXB4O1xyXG5cclxuICAgIC5pdGVtLXJhdGluZyB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tcGFnZS1jb2xvci1yZ2IpLCAuMzUpO1xyXG4gICAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4O1xyXG4gICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgY29sb3I6ICNhYTZjMzk7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4uZ3JvdXAtaW5mbyB7XHJcbiAgbWFyZ2luOiB2YXIoLS1wYWdlLW1hcmdpbikgdmFyKC0tcGFnZS1tYXJnaW4pIHZhcigtLXBhZ2UtbWFyZ2luKSB2YXIoLS1wYWdlLW1hcmdpbik7XHJcbiAgLmdyb3VwLWltZyB7XHJcblxyXG4gIH1cclxuICAuZ3JvdXAtbmFtZSB7XHJcbiAgICBwYWRkaW5nLXRvcDogdmFyKC0tcGFnZS1tYXJnaW4pO1xyXG4gICAgcGFkZGluZy1ib3R0b206IHZhcigtLXBhZ2UtbWFyZ2luKTtcclxuICAgIGZvbnQtZmFtaWx5OiAnSGVsdmV0aWNhTmV1ZScsICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgJ1JvYm90bycsICdTZWdvZSBVSScsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgZm9udC1zaXplOiAxOXB4O1xyXG4gIH1cclxuICAuZ3JvdXAtdGFncyB7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogY2FsYyh2YXIoLS1wYWdlLW1hcmdpbikgLyAzKTtcclxuICAgXHJcbiAgICAudGFncyB7XHJcbiAgICAgIHBhZGRpbmctcmlnaHQ6IDVweDtcclxuXHJcbiAgICAuaXRlbS1yYXRpbmcge1xyXG4gICAgICAvLyBEZWZhdWx0IGJhY2tncm91bmRcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1wYWdlLWNvbG9yLXJnYiksIC4zNSk7XHJcbiAgICAgICAgICAgICAgLy8gY29sb3I6IHZhcigtLWlvbi1jb2xvci1saWdodGVzdCk7XHJcbiAgICAgICAgICAgICAgLy8gYm9yZGVyLXJhZGl1czogdmFyKC0tYXBwLW5hcnJvdy1yYWRpdXMpO1xyXG4gICAgICAgICAgICAgIC8vIHBhZGRpbmctdG9wOiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDEpO1xyXG4gICAgICAgICAgICAgIC8vcGFkZGluZy1ib3R0b206IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMyk7XHJcbiAgICAgICAgICAgICAgLy8gcGFkZGluZy1sZWZ0OiBjYWxjKHZhcigtLXBhZ2UtbWFyZ2luKSAvIDIpO1xyXG4gICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IGNhbGModmFyKC0tcGFnZS1tYXJnaW4pIC8gMik7XHJcbiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAmW3JhdGluZ0Jhc2U9XCIwXCJdIHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wYWdlLXJhdGluZy0xLWNvbG9yKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgJltyYXRpbmdCYXNlPVwiMVwiXSB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tcGFnZS1yYXRpbmctMi1jb2xvcik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5ncm91cC1tZW1iZXItbmFtZSB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IHZhcigtLXBhZ2UtbWFyZ2luKTtcclxuICB9XHJcbn1cclxuXHJcbi5lbXB0eS1saXN0IHtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuIl19 */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { GroupPage } from './group.page';\r\nimport { SharedModule } from '../services/share.module';\r\nimport { ComponentsModule } from '../components/components.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: GroupPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SharedModule,\r\n    ComponentsModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [GroupPage]\r\n})\r\nexport class GroupPageModule {}\r\n","import { Component, OnInit, ElementRef, ViewChild } from '@angular/core';\r\nimport { DataService } from '../services/data.service';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\nimport { Keyboard } from '@ionic-native/keyboard/ngx';\r\n// tslint:disable-next-line: max-line-length\r\nimport { NavController, ActionSheetController, AlertController, ModalController, PopoverController, IonInfiniteScroll } from '@ionic/angular';\r\nimport { Contacts } from '@ionic-native/contacts/ngx';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { LoadingService } from '../services/loading.service';\r\nimport { ImageService } from '../services/image.service';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { ActivatedRoute, Router, NavigationExtras } from '@angular/router';\r\nimport * as firebase from 'firebase';\r\n\r\nimport { PopoverPage } from '../popover/popover.page';\r\nimport { TagModalPage } from '../tag-modal/tag-modal.page';\r\nimport { ReactionListModalPage } from '../reaction-list-modal/reaction-list-modal.page';\r\n\r\n@Component({\r\n  selector: 'app-group',\r\n  templateUrl: './group.page.html',\r\n  styleUrls: ['./group.page.scss'],\r\n})\r\nexport class GroupPage implements OnInit {\r\n\r\n  @ViewChild('content', null) content: ElementRef;\r\n  @ViewChild(IonInfiniteScroll, {static: true}) infiniteScroll: IonInfiniteScroll;\r\n  title: any;\r\n  groupId: any;\r\n  message: any;\r\n  messages: any;\r\n  updateDateTime: any;\r\n  subscription: any;\r\n  messagesToShow: any;\r\n  startIndex: any = -1;\r\n  scrollDirection: any = 'bottom';\r\n  // Set number of messages to show.\r\n  numberOfMessages = 10;\r\n  private polls: any = [];\r\n  private resources: any = [];\r\n  private events: any = [];\r\n  private tab: any;\r\n  private group: any;\r\n  private user: any;\r\n  private groupMembers: any;\r\n  private loggedInUserIsMember: any = 'false';\r\n  private searchPoll: any;\r\n  private searchResource: any;\r\n  private searchEvent: any;\r\n  private resourceTags: any = [];\r\n  private resourceTagsString: any;\r\n  private eventTags: any;\r\n  private eventTagsString: any;\r\n  private alert: any;\r\n  private loggedInUserId: any;\r\n  notifications: any = [];\r\n\r\n  private toggled = false;\r\n  private emojitext: string;\r\n\r\n  // posts\r\n  private posts: any = [];\r\n  private postsToShow: any;\r\n  private numberOfPosts = 10;\r\n\r\n  // infinite scroll data\r\n  private firstDataSetPost: any;\r\n  private lastDataSetPost: any;\r\n  private maxNoOfPosts: any = 1000;\r\n  private nextDataSetPost: firebase.firestore.Query;\r\n\r\n  private firstDataSetEvent: any;\r\n  private lastDataSetEvent: any;\r\n  private maxNoOfEvents: any = 1000;\r\n  private nextDataSetEvent: firebase.firestore.Query;\r\n\r\n\r\n  private firstDataSetPoll: any;\r\n  private lastDataSetPoll: any;\r\n  private maxNoOfPolls: any = 1000;\r\n  private nextDataSetPoll: firebase.firestore.Query;\r\n\r\n\r\n  private firstDataSetResources: any;\r\n  private lastDataSetResources: any;\r\n  private maxNoOfResources: any = 1000;\r\n  private nextDataSetResources: firebase.firestore.Query;\r\n\r\n  // GroupPage\r\n  // This is the page where the user can chat with other group members and view group info.\r\n  constructor(\r\n    public dataProvider: DataService,\r\n    public navCtrl: NavController,\r\n    public modalCtrl: ModalController,\r\n    public firestore: AngularFirestore,\r\n    public alertCtrl: AlertController,\r\n    public imageProvider: ImageService,\r\n    public loadingProvider: LoadingService,\r\n    public camera: Camera,\r\n    public keyboard: Keyboard,\r\n    public actionSheet: ActionSheetController,\r\n    public contacts: Contacts,\r\n    public geolocation: Geolocation,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n\r\n    public popoverCtrl: PopoverController\r\n  ) {\r\n    this.loggedInUserId = firebase.auth().currentUser.uid;\r\n  }\r\n\r\n  handleSelection(event) {\r\n    this.emojitext = this.emojitext + ' ' + event.char;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.loadingProvider.show();\r\n    this.tab = 'posts';\r\n    this.title = 'Posts';\r\n    this.searchResource = '';\r\n    this.searchPoll = '';\r\n    this.searchEvent = '';\r\n\r\n    // Get user information for system message sent to the group when a member was added.\r\n    this.dataProvider.getCurrentUser().snapshotChanges().subscribe((user: any) => {\r\n      this.notifications = user.payload.data().notifications;\r\n      this.user  = user.payload.data();\r\n  });\r\n    this.getGroupDetailsandPosts();\r\n\r\n    this.loadingProvider.hide();\r\n  }\r\n\r\n  ionViewDidEnter() { }\r\n\r\n  // Load previous messages in relation to numberOfMessages.\r\n  loadPreviousMessages() {\r\n    const that = this;\r\n    // Show loading.\r\n    this.loadingProvider.show();\r\n    setTimeout(function() {\r\n      // Set startIndex to load more messages.\r\n      if (that.startIndex - that.numberOfMessages > -1) {\r\n        that.startIndex -= that.numberOfMessages;\r\n      } else {\r\n        that.startIndex = 0;\r\n      }\r\n      // Refresh our messages list.\r\n      that.messages = null;\r\n      that.messagesToShow = null;\r\n      // Set scroll direction to top.\r\n      that.scrollDirection = 'top';\r\n      // Populate list again.\r\n      that.ionViewDidEnter();\r\n    }, 1000);\r\n  }\r\n\r\n  // Update messagesRead when user lefts this page.\r\n  ionViewWillLeave() {\r\n    if (this.messages) {\r\n      this.setMessagesRead(this.messages);\r\n    }\r\n  }\r\n\r\n  // Check if currentPage is active, then update user's messagesRead.\r\n  setMessagesRead(messages) {\r\n    // if (this.navCtrl.getActive().instance instanceof GroupPage) {\r\n    // Update user's messagesRead on database.\r\n    this.firestore.doc('/accounts/' + firebase.auth().currentUser.uid + '/groups/' + this.groupId).update({\r\n      messagesRead: this.messages.length\r\n    });\r\n    // }\r\n  }\r\n\r\n  // Check if 'return' button is pressed and send the message.\r\n  onType(keyCode) {\r\n    if (keyCode == 13) {\r\n      // this.keyboard.close();\r\n      // this.send();\r\n    }\r\n  }\r\n\r\n  // Scroll to bottom of page after a short delay.\r\n  scrollBottom() {\r\n    const that = this;\r\n    setTimeout(function() {\r\n      that.content.nativeElement.scrollBottom = that.content.nativeElement.scrollHeight;\r\n    }, 300);\r\n  }\r\n\r\n  // Scroll to top of the page after a short delay.\r\n  scrollTop() {\r\n    const that = this;\r\n    setTimeout(function() {\r\n      that.content.nativeElement.scrollTop = that.content.nativeElement.scrollHeight;\r\n    }, 300);\r\n  }\r\n\r\n  // Scroll depending on the direction.\r\n  doScroll() {\r\n    if (this.scrollDirection === 'bottom') {\r\n      this.scrollBottom();\r\n    } else if (this.scrollDirection === 'top') {\r\n      this.scrollTop();\r\n    }\r\n  }\r\n\r\n  // Check if the user is the sender of the message.\r\n  isSender(message) {\r\n    if (message.sender === firebase.auth().currentUser.uid) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Check if the message is a system message.\r\n  isSystemMessage(message) {\r\n    if (message.type === 'system') {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // View user info\r\n  viewUser(userId) {\r\n    this.router.navigateByUrl('/userinfo/' + userId);\r\n  }\r\n\r\n  // Send text message to the group.\r\n  send(type) {\r\n    // Clone an instance of messages object so it will not directly be updated.\r\n    // The messages object should be updated by our observer declared on ionViewDidLoad.\r\n    const messages = JSON.parse(JSON.stringify(this.messages));\r\n\r\n    messages.push({\r\n      date: new Date().toString(),\r\n      sender: firebase.auth().currentUser.uid,\r\n      // tslint:disable-next-line: object-literal-shorthand\r\n      type: type,\r\n      message: this.message\r\n    });\r\n\r\n    // Update group messages.\r\n    this.dataProvider.getGroup(this.groupId).update({\r\n      // tslint:disable-next-line: object-literal-shorthand\r\n      messages: messages\r\n    });\r\n    // Clear messagebox.\r\n    this.message = '';\r\n  }\r\n\r\n  // Enlarge image messages.\r\n  enlargeImage(img) {\r\n    // let imageModal = this.modalCtrl.create(\"ImageModalPage\", { img: img });\r\n    // imageModal.present();\r\n  }\r\n\r\n  attach() {\r\n    const action = this.actionSheet.create({\r\n      header: 'Choose attachments',\r\n      buttons: [{\r\n        text: 'Camera',\r\n        handler: () => {\r\n          console.log('take photo');\r\n          this.imageProvider.uploadGroupPhotoMessage(this.groupId, this.camera.PictureSourceType.CAMERA).then((url) => {\r\n            // Process image message.\r\n            this.sendPhotoMessage(url);\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Photo Library',\r\n        handler: () => {\r\n          console.log('Access gallery');\r\n          this.imageProvider.uploadGroupPhotoMessage(this.groupId, this.camera.PictureSourceType.PHOTOLIBRARY).then((url) => {\r\n            // Process image message.\r\n            this.sendPhotoMessage(url);\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Video',\r\n        handler: () => {\r\n          console.log('Video');\r\n          this.imageProvider.uploadGroupVideoMessage(this.groupId).then(url => {\r\n            this.sendVideoMessage(url);\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Location',\r\n        handler: () => {\r\n          console.log('Location');\r\n          this.geolocation.getCurrentPosition({\r\n            timeout: 2000\r\n          }).then(res => {\r\n            const locationMessage = 'current location: lat:' + res.coords.latitude + ' lng:' + res.coords.longitude;\r\n            const mapUrl = '<a href=\\'https://www.google.com/maps/search/' + res.coords.latitude + ',' + res.coords.longitude + '\\'>View on Map</a>';\r\n            const confirm = this.alertCtrl.create({\r\n              header: 'Your Location',\r\n              message: locationMessage,\r\n              buttons: [{\r\n                text: 'cancel',\r\n                handler: () => {\r\n                  console.log('canceled');\r\n                }\r\n              }, {\r\n                text: 'Share',\r\n                handler: () => {\r\n                  console.log('share');\r\n                  this.message = locationMessage + '<br>' + mapUrl;\r\n                  this.send('location');\r\n                }\r\n              }]\r\n            }).then(r => r.present());\r\n          }, locationErr => {\r\n            console.log('Location Error' + JSON.stringify(locationErr));\r\n          });\r\n        }\r\n      }, {\r\n        text: 'Contact',\r\n        handler: () => {\r\n          console.log('Share contact');\r\n          this.contacts.pickContact().then(data => {\r\n            console.log(data.displayName);\r\n            console.log(data.phoneNumbers[0].value);\r\n            this.message = '<b>Name:</b> ' + data.displayName + '<br><b>Mobile:</b> <a href=\\'tel:' + data.phoneNumbers[0].value + '\\'>' + data.phoneNumbers[0].value + '</a>';\r\n            this.send('contact');\r\n          }, err => {\r\n            console.log(err);\r\n          });\r\n        }\r\n      }, {\r\n        text: 'cancel',\r\n        role: 'cancel',\r\n        handler: () => {\r\n          console.log('cancelled');\r\n        }\r\n      }]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  takePhoto() {\r\n    this.imageProvider.uploadGroupPhotoMessage(this.groupId, this.camera.PictureSourceType.CAMERA).then((url) => {\r\n      // Process image message.\r\n      this.sendPhotoMessage(url);\r\n    });\r\n  }\r\n\r\n  // Process photoMessage on database.\r\n  sendPhotoMessage(url) {\r\n    const messages = JSON.parse(JSON.stringify(this.messages));\r\n    messages.push({\r\n      date: new Date().toString(),\r\n      sender: firebase.auth().currentUser.uid,\r\n      type: 'image',\r\n      url\r\n    });\r\n    this.dataProvider.getGroup(this.groupId).update({\r\n      messages\r\n    });\r\n    this.message = '';\r\n  }\r\n\r\n  sendVideoMessage(url) {\r\n    const messages = JSON.parse(JSON.stringify(this.messages));\r\n    messages.push({\r\n      date: new Date().toString(),\r\n      sender: firebase.auth().currentUser.uid,\r\n      type: 'video',\r\n      url\r\n    });\r\n    this.dataProvider.getGroup(this.groupId).update({\r\n      messages\r\n    });\r\n    this.message = '';\r\n  }\r\n\r\n  // View group info.\r\n  groupInfo() {\r\n    this.router.navigateByUrl('/groupinfo/' + this.groupId);\r\n  }\r\n\r\n  // Controller Functions\r\n  onPress($event) {\r\n    console.log('onPress', $event);\r\n  }\r\n\r\n  onPressUp(event, message) {\r\n    console.log('onPressUp', event);\r\n    console.log(event.center.x);\r\n    console.log(event.center.y);\r\n    this.presentPopover(event, message);\r\n  }\r\n\r\n  async joinGroup() {\r\n    this.alert = this.alertCtrl.create({\r\n      header: 'Join Group',\r\n      message: 'Are you sure you want to join this group?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel'\r\n        },\r\n        {\r\n          text: 'Join',\r\n          handler: data => {\r\n            // Proceed\r\n            this.loadingProvider.show();\r\n\r\n            // Add groupInfo to each friend added to the group.\r\n            this.firestore.doc('/accounts/' + firebase.auth().currentUser.uid + '/groups/' + this.groupId).update({\r\n              messagesRead: 0\r\n            });\r\n            // Add friend as members of the group.\r\n            this.group.members.push(firebase.auth().currentUser.uid);\r\n            // Add system message that the members are added to the group.\r\n            this.group.messages.push({\r\n              date: new Date().toString(),\r\n              sender: firebase.auth().currentUser.uid,\r\n              type: 'system',\r\n              message: this.user.name + ' has joined the group.',\r\n              icon: 'md-contacts'\r\n            });\r\n\r\n            // Update group data on the database.\r\n            this.dataProvider.getGroup(this.groupId).update({\r\n              members: this.group.members,\r\n              messages: this.group.messages\r\n            }).then(() => {\r\n              // Back.\r\n              this.loadingProvider.hide();\r\n              this.navCtrl.back();\r\n            });\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  async presentPopover(myEvent: any, message) {\r\n    let ev: any;\r\n    ev = {\r\n      target: {\r\n        getBoundingClientRect: () => {\r\n          return {\r\n            top: myEvent.center.y,\r\n            left: myEvent.center.x\r\n          };\r\n        }\r\n      }\r\n    };\r\n    const popover = await this.popoverCtrl.create({\r\n      component: PopoverPage,\r\n      componentProps: { message, groupId: this.groupId },\r\n      event: ev,\r\n      translucent: true\r\n    });\r\n    return await popover.present();\r\n  }\r\n\r\n  getGroupDetailsandMessages() {\r\n    // Get group details\r\n\r\n    this.groupId = this.route.snapshot.params.id;\r\n    this.subscription = this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group: any) => {\r\n      console.log('group:', group);\r\n\r\n      this.group = group.payload.data();\r\n      this.title = group.payload.data().name;\r\n\r\n        // Get Group Members\r\n      if (this.group.members) {\r\n          this.group.members.forEach((memberId) => {\r\n            this.dataProvider.getUser(memberId).snapshotChanges().subscribe((member: any) => {\r\n              if (member.key != null) {\r\n                member = { $key: member.key, ...member.payload.data() };\r\n                this.addUpdateOrRemoveMember(member);\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        // Get group messages\r\n      this.dataProvider.getGroupMessages(this.groupId).snapshotChanges().subscribe((messagesRes: any) => {\r\n          let messages = messagesRes.payload.data();\r\n          if (messages == null || messages == undefined) { messages = []; }\r\n\r\n          console.log(this.messages);\r\n          if (this.messages != null && this.messages != undefined) {\r\n            // Just append newly added messages to the bottom of the view.\r\n\r\n            if (messages.length > this.messages.length) {\r\n              const message = messages[messages.length - 1];\r\n              this.dataProvider.getUser(message.sender).snapshotChanges().subscribe((user: any) => {\r\n                message.avatar = user.payload.data().img;\r\n              });\r\n              this.messages.push(message);\r\n              // Also append to messagesToShow.\r\n              this.messagesToShow.push(message);\r\n              // Reset scrollDirection to bottom.\r\n              this.scrollDirection = 'bottom';\r\n            }\r\n          } else {\r\n            // Get all messages, this will be used as reference object for messagesToShow.\r\n            this.messages = [];\r\n            messages.forEach((message) => {\r\n              console.log(message);\r\n              this.dataProvider.getUser(message.sender).snapshotChanges().subscribe((user: any) => {\r\n                if (user.key != null) {\r\n                  message.avatar = user.payload.data().img;\r\n                }\r\n              });\r\n              this.messages.push(message);\r\n            });\r\n            // Load messages in relation to numOfMessages.\r\n            if (this.startIndex === -1) {\r\n              // Get initial index for numberOfMessages to show.\r\n              if ((this.messages.length - this.numberOfMessages) > 0) {\r\n                this.startIndex = this.messages.length - this.numberOfMessages;\r\n              } else {\r\n                this.startIndex = 0;\r\n              }\r\n            }\r\n            if (!this.messagesToShow) {\r\n              this.messagesToShow = [];\r\n            }\r\n            // Set messagesToShow\r\n            for (let i = this.startIndex; i < this.messages.length; i++) {\r\n              this.messagesToShow.push(this.messages[i]);\r\n            }\r\n            this.loadingProvider.hide();\r\n          }\r\n        });\r\n\r\n      this.dataProvider.getGroupMembers(this.groupId).snapshotChanges().subscribe((memberIdsRes: any) => {\r\n          const memberIds = memberIdsRes.payload.data();\r\n          if (memberIds.includes(firebase.auth().currentUser.uid)) {\r\n            this.loggedInUserIsMember = true;\r\n          } else {\r\n            this.loggedInUserIsMember = false;\r\n          }\r\n\r\n        });\r\n\r\n    });\r\n\r\n    // Update messages' date time elapsed every minute based on Moment.js.\r\n    const that = this;\r\n    if (!that.updateDateTime) {\r\n      that.updateDateTime = setInterval(() => {\r\n        if (that.messages) {\r\n          that.messages.forEach((message) => {\r\n            const date = message.date;\r\n            message.date = new Date(date);\r\n          });\r\n        }\r\n      }, 60000);\r\n    }\r\n  }\r\n\r\n  getGroupDetailsandPosts() {\r\n    // Get group details\r\n    this.posts = [];\r\n    this.groupId = this.route.snapshot.params.id;\r\n    this.subscription = this.dataProvider.getGroup(this.groupId).snapshotChanges().subscribe((group: any) => {\r\n\r\n    this.group = group.payload.data();\r\n    this.title = group.payload.data().name;\r\n\r\n    // Get Group Members\r\n    if (this.group.members) {\r\n      this.group.members.forEach((memberId) => {\r\n        this.dataProvider.getUser(memberId).snapshotChanges().subscribe((member: any) => {\r\n          if (member.payload.exists) {\r\n            member = { $key: member.payload.id, ...member.payload.data() };\r\n            this.addUpdateOrRemoveMember(member);\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n        // Get group posts\r\n    this.firstDataSetPost = this.firestore.collection('posts').ref\r\n        .where('groupId', '==', this.groupId)\r\n        .where('type', '==', 'general')\r\n        .orderBy('date', 'desc')\r\n        .limit(5);\r\n\r\n    this.firstDataSetPost.onSnapshot((po) => {\r\n      this.lastDataSetPost = po.docs[po.docs.length - 1];\r\n      this.posts = [];\r\n        this.loadEachPostData(po);\r\n      });\r\n    });\r\n\r\n    // Update messages' date time elapsed every minute based on Moment.js.\r\n    const that = this;\r\n    if (!that.updateDateTime) {\r\n      that.updateDateTime = setInterval(() => {\r\n        if (that.posts) {\r\n          that.posts.forEach((post) => {\r\n            const date = post.date;\r\n            post.date = new Date(date);\r\n          });\r\n        }\r\n      }, 60000);\r\n    }\r\n  }\r\n\r\n  loadEachPostData(po: any) {\r\n    po.forEach((p) => {\r\n      let post: any;\r\n      post = p.data();\r\n      post.key = p.id;\r\n      const startDate = new Date(post.date);\r\n    // Do your operations\r\n      const endDate   = new Date();\r\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n      if (seconds > 120) {\r\n      post.showNewIcon = false;\r\n    } else {\r\n      post.showNewIcon = true;\r\n    }\r\n      // get reactions list\r\n      this.firestore.collection('posts').doc(post.key).collection('reactions').snapshotChanges().subscribe((reactions: any) => {\r\n        post.reactions = [];\r\n        reactions.forEach(element => {\r\n        let reaction = element.payload.doc.data();\r\n        reaction.key = element.payload.doc.id;\r\n        post.reactions.push(reaction);\r\n      });\r\n\r\n        // Check for Thanks\r\n        if (reactions) {\r\n        let foundSmiley = false;\r\n        if (post.reactions !== undefined) {\r\n            foundSmiley = post.reactions.find(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId()).reactionType\r\n            .some(r => r === 'Thanks');\r\n          }\r\n        if (foundSmiley) {\r\n            post.showSmiley = true;\r\n          } else {\r\n            post.showSmiley = false;\r\n          }\r\n          // Check for Hugs\r\n        let foundHug = false;\r\n        if (post.reactions !== undefined) {\r\n            foundHug = post.reactions.find(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId()).reactionType\r\n            .some(r => r === 'Hug');\r\n          }\r\n        if (foundHug) {\r\n            post.showHug = true;\r\n          } else {\r\n            post.showHug = false;\r\n          }\r\n      }\r\n     });\r\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\r\n      this.addOrUpdatePost(post);\r\n    });\r\n  }\r\n\r\n  addUpdateOrRemoveMember(member) {\r\n    console.log('member',member);\r\n    if (this.group) {\r\n      if (this.group.members.indexOf(member.$key) > -1) {\r\n        // User exists in the group.\r\n        if (!this.groupMembers) {\r\n          this.groupMembers = [member];\r\n        } else {\r\n          let index = -1;\r\n          for (let i = 0; i < this.groupMembers.length; i++) {\r\n            if (this.groupMembers[i].$key === member.$key) {\r\n              index = i;\r\n            }\r\n          }\r\n          // Add/Update User.\r\n          if (index > -1) {\r\n            this.groupMembers[index] = member;\r\n          } else {\r\n            this.groupMembers.push(member);\r\n          }\r\n        }\r\n      } else {\r\n        // User already left the group, remove member from list.\r\n        let index1 = -1;\r\n        for (let j = 0; j < this.groupMembers.length; j++) {\r\n          if (this.groupMembers[j].$key === member.$key) {\r\n            index1 = j;\r\n          }\r\n        }\r\n        if (index1 > -1) {\r\n          this.groupMembers.splice(index1, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  segmentChanged($event) {\r\n    if (this.tab === 'groups') {\r\n      this.title = this.group.name; this.getGroupDetailsandMessages();\r\n    } else if (this.tab === 'posts') {\r\n      this.title = this.group.name; this.getGroupDetailsandPosts();\r\n    } else if (this.tab === 'polls') {\r\n      this.title = this.group.name; this.getPolls();\r\n    } else if (this.tab === 'resources') {\r\n      this.title = this.group.name; this.getResources();\r\n    } else if (this.tab === 'events') {\r\n      this.title = this.group.name; this.getEvents();\r\n    } else if (this.tab === 'groupInfo') {\r\n      this.title = this.group.name;\r\n    }\r\n  }\r\n\r\n  getPolls() {\r\n        // Get group posts\r\n    this.firstDataSetPoll = this.firestore.collection('posts').ref\r\n                              .where('groupId', '==', this.groupId)\r\n                              .where('type', '==', 'poll')\r\n                              .orderBy('date', 'desc')\r\n                              .limit(5);\r\n    // Get group posts\r\n    this.firstDataSetPoll\r\n    .onSnapshot((po) => {\r\n      this.lastDataSetPoll = po.docs[po.docs.length - 1];\r\n      this.polls = [];\r\n      this.loadEachPollData(po);\r\n      });\r\n  }\r\n\r\n  loadEachPollData(po: any) {\r\n    po.forEach((p) => {\r\n      let post: any;\r\n      post = p.data();\r\n      post.key = p.id;\r\n      const startDate = new Date(post.date);\r\n    // Do your operations\r\n      const endDate   = new Date();\r\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n      if (seconds > 120) {\r\n      post.showNewIcon = false;\r\n    } else {\r\n      post.showNewIcon = true;\r\n    }\r\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\r\n      this.addOrUpdatePoll(post);\r\n    });\r\n  }\r\n\r\n  viewPoll(poll) {\r\n    this.router.navigateByUrl('post/' + poll.key);\r\n  }\r\n\r\n  viewResource(resource) {\r\n    this.router.navigateByUrl('post/' + resource.key);\r\n  }\r\n\r\n  viewPost(post) {\r\n    console.log('postID: ' + post.key);\r\n    this.router.navigateByUrl('post/' + post.key);\r\n\r\n  }\r\n\r\n  viewEvent(event) {\r\n    this.router.navigateByUrl('post/' + event.key);\r\n  }\r\n\r\n  newPoll() {\r\n    this.router.navigateByUrl('/new-poll/' + this.groupId);\r\n  }\r\n\r\n  newPost() {\r\n    this.router.navigateByUrl('/new-post/' + this.groupId);\r\n  }\r\n\r\n  newResource() {\r\n    this.router.navigateByUrl('/new-resource/' + this.groupId);\r\n  }\r\n\r\n  newEvent() {\r\n    this.router.navigateByUrl('/new-event/' + this.groupId);\r\n  }\r\n\r\n  getResources() {\r\n    // Get group posts\r\n    this.firstDataSetResources = this.firestore.collection('posts').ref\r\n    .where('groupId', '==', this.groupId)\r\n    .where('type', '==', 'resource')\r\n    .orderBy('date', 'desc')\r\n    .limit(5);\r\n    // Get group posts\r\n    this.firstDataSetResources\r\n        .onSnapshot((po) => {\r\n    this.lastDataSetResources = po.docs[po.docs.length - 1];\r\n    this.resources = [];\r\n    this.loadEachResourceData(po);\r\n    });\r\n  }\r\n\r\n  loadEachResourceData(po: any) {\r\n    po.forEach((p) => {\r\n      let post: any;\r\n      post = p.data();\r\n      post.key = p.id;\r\n      const startDate = new Date(post.date);\r\n    // Do your operations\r\n      const endDate   = new Date();\r\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n      if (seconds > 120) {\r\n      post.showNewIcon = false;\r\n    } else {\r\n      post.showNewIcon = true;\r\n    }\r\n      // get reactions list\r\n      this.firestore.collection('posts').doc(post.key).collection('reactions').snapshotChanges().subscribe((reactions: any) => {\r\n        post.reactions = [];\r\n        reactions.forEach(element => {\r\n        let reaction = element.payload.doc.data();\r\n        reaction.key = element.payload.doc.id;\r\n        post.reactions.push(reaction);\r\n      });\r\n\r\n        // Check for Thanks\r\n        if (reactions) {\r\n        let foundSmiley = false;\r\n        if (post.reactions !== undefined) {\r\n            foundSmiley = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \r\n                                          && el.reactionType === 'Thanks');\r\n          }\r\n        if (foundSmiley) {\r\n            post.showSmiley = true;\r\n          } else {\r\n            post.showSmiley = false;\r\n          }\r\n        // Check for Bookmark\r\n        let foundBookmark = false;\r\n        if (post.reactions !== undefined) {\r\n          foundBookmark = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \r\n                                        && el.reactionType === 'Bookmark');\r\n          }\r\n        if (foundBookmark) {\r\n            post.showBookmark = true;\r\n          } else {\r\n            post.showBookmark = false;\r\n          }\r\n      }\r\n      });\r\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\r\n      this.addOrUpdateResource(post);\r\n    });\r\n  }\r\n\r\n  getEvents() {\r\n    // Get group posts\r\n    this.firstDataSetEvent = this.firestore.collection('posts').ref\r\n    .where('groupId', '==', this.groupId)\r\n    .where('type', '==', 'event')\r\n    .orderBy('date', 'desc')\r\n    .limit(5);\r\n    // Get group posts\r\n    this.firstDataSetEvent\r\n        .onSnapshot((po) => {\r\n    this.lastDataSetEvent = po.docs[po.docs.length - 1];\r\n    this.events = [];\r\n    this.loadEachEventData(po);\r\n    });\r\n  }\r\n\r\n  loadEachEventData(po: any) {\r\n    po.forEach((p) => {\r\n      let post: any;\r\n      post = p.data();\r\n      post.key = p.id;\r\n      const startDate = new Date(post.date);\r\n    // Do your operations\r\n      const endDate   = new Date();\r\n      const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n      if (seconds > 120) {\r\n      post.showNewIcon = false;\r\n    } else {\r\n      post.showNewIcon = true;\r\n    }\r\n      // get reactions list\r\n      this.firestore.collection('posts').doc(post.key).collection('reactions').snapshotChanges().subscribe((reactions: any) => {\r\n        post.reactions = [];\r\n        reactions.forEach(element => {\r\n        let reaction = element.payload.doc.data();\r\n        reaction.key = element.payload.doc.id;\r\n        post.reactions.push(reaction);\r\n      });\r\n\r\n        // Check for Thanks\r\n        if (reactions) {\r\n        let foundSmiley = false;\r\n        if (post.reactions !== undefined) {\r\n            foundSmiley = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \r\n                                          && el.reactionType === 'Thanks');\r\n          }\r\n        if (foundSmiley) {\r\n            post.showSmiley = true;\r\n          } else {\r\n            post.showSmiley = false;\r\n          }\r\n         // Check for Checkin\r\n        let foundCheckin = false;\r\n        if (post.reactions !== undefined) {\r\n          foundCheckin = post.reactions.some(el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId() \r\n                                        && el.reactionType === 'Checkin');\r\n          }\r\n        if (foundCheckin) {\r\n            post.showCheckin = true;\r\n          } else {\r\n            post.showCheckin = false;\r\n          }\r\n\r\n      }\r\n      });\r\n      post.postTags = post.postTags.filter(x => x.isChecked !== false);\r\n      this.addOrUpdateEvent(post);\r\n    });\r\n  }\r\n\r\n  openResourceFilter() {\r\n    this.openModal();\r\n  }\r\n\r\n  openModal() {\r\n\r\n    this.modalCtrl.create({\r\n      component: TagModalPage,\r\n      componentProps: { groupTags: this.resourceTags }\r\n    }).then(res => {\r\n      res.present();\r\n    });\r\n\r\n    this.modalCtrl.dismiss((data) => {\r\n      this.resourceTagsString = '';\r\n      this.resourceTags = data;\r\n      this.resourceTags.forEach(element => {\r\n        if (element.isChecked == true) {\r\n          this.resourceTagsString = this.resourceTagsString + ', ' + element.val;\r\n        }\r\n      });\r\n      this.resourceTagsString = this.resourceTagsString.replace(', ', '');\r\n\r\n    });\r\n\r\n  }\r\n\r\n  addOrUpdatePoll(poll) {\r\n    let totalPollCount = 0;\r\n    poll.pollTagsString = '';\r\n    if (poll.pollTags && poll.pollTags) {\r\n\r\n      poll.pollTags.forEach(element => {\r\n        if (element.isChecked == true) {\r\n          poll.pollTagsString = poll.pollTagsString + ', ' + element.val;\r\n        }\r\n      });\r\n\r\n      poll.pollTagsString = poll.pollTagsString.replace(', ', '');\r\n    } else {\r\n      poll.pollTagsString = 'No tags found';\r\n    }\r\n    // Add total poll count\r\n    if (poll.pollOptions) {\r\n      poll.pollOptions.forEach(element => {\r\n        if (element.members !== undefined) {\r\n        totalPollCount = totalPollCount + element.members.length;\r\n        }\r\n      });\r\n    }\r\n    poll.totalPollCount = totalPollCount;\r\n\r\n    // Add NEW Icon\r\n    const startDate = new Date(poll.dateCreated);\r\n    const endDate   = new Date();\r\n    const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n\r\n    if (seconds > 120) {\r\n      poll.showNewIcon = false;\r\n    } else {\r\n      poll.showNewIcon = true;\r\n    }\r\n\r\n    if (!this.polls) {\r\n      this.polls = [poll];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.polls.length; i++) {\r\n        if (this.polls[i].key == poll.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.polls[index] = poll;\r\n      } else {\r\n        this.polls.push(poll);\r\n      }\r\n    }\r\n  }\r\n\r\n  addOrUpdateResource(resource) {\r\n    resource.resourceTagsString = '';\r\n    if (resource.resourceTags && resource.resourceTags) {\r\n      resource.resourceTags.forEach(element => {\r\n        if (element.isChecked == true) {\r\n          resource.resourceTagsString = resource.resourceTagsString + ', ' + element.val;\r\n        }\r\n      });\r\n\r\n      resource.resourceTagsString = resource.resourceTagsString.replace(', ', '');\r\n    } else {\r\n      resource.resourceTagsString = 'No tags found';\r\n\r\n    }\r\n\r\n    // Add NEW Icon\r\n    const startDate = new Date(resource.dateCreated);\r\n    const endDate   = new Date();\r\n    const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n\r\n    if (seconds > 120) {\r\n      resource.showNewIcon = false;\r\n    } else {\r\n      resource.showNewIcon = true;\r\n    }\r\n\r\n    if (!this.resources) {\r\n      this.resources = [resource];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.resources.length; i++) {\r\n        if (this.resources[i].key == resource.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.resources[index] = resource;\r\n      } else {\r\n        this.resources.push(resource);\r\n      }\r\n    }\r\n  }\r\n\r\n  addOrUpdatePost(post) {\r\n    post.postTagsString = '';\r\n    if (post.resourceTags && post.resourceTags) {\r\n      post.resourceTags.forEach(element => {\r\n        if (element.isChecked == true) {\r\n          post.postTagsString = post.resourceTagsString + ', ' + element.val;\r\n        }\r\n      });\r\n\r\n      post.postTagsString = post.postTagsString.replace(', ', '');\r\n    } else {\r\n      post.postTagsString = 'No tags found';\r\n\r\n    }\r\n    if (!this.posts) {\r\n      this.posts = [post];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.posts.length; i++) {\r\n        if (this.posts[i].key == post.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.posts[index] = post;\r\n      } else {\r\n        this.posts.push(post);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  addOrUpdateEvent(event) {\r\n    event.eventTagsString = '';\r\n    if (event.eventTags) {\r\n      event.eventTags.forEach(element => {\r\n        if (element.isChecked === true) {\r\n          event.eventTagsString = event.eventTagsString + ', ' + element.val;\r\n        }\r\n      });\r\n      // Remove first comma from the string\r\n      event.eventTagsString = event.eventTagsString.replace(', ', '');\r\n    } else {\r\n      event.eventTagsString = 'No tags found';\r\n    }\r\n\r\n    // Add NEW Icon\r\n    const startDate = new Date(event.dateCreated);\r\n    const endDate   = new Date();\r\n    const seconds = (endDate.getTime() - startDate.getTime()) / 1000;\r\n\r\n    if (seconds > 120) {\r\n      event.showNewIcon = false;\r\n    } else {\r\n      event.showNewIcon = true;\r\n    }\r\n\r\n    if (!this.events) {\r\n      this.events = [event];\r\n    } else {\r\n      let index = -1;\r\n      for (let i = 0; i < this.events.length; i++) {\r\n        if (this.events[i].key === event.key) {\r\n          index = i;\r\n        }\r\n      }\r\n      if (index > -1) {\r\n        this.events[index] = event;\r\n      } else {\r\n        this.events.push(event);\r\n      }\r\n    }\r\n  }\r\n\r\n  showGroupOptions() {\r\n  const action = this.actionSheet.create({\r\n    header: 'Create a new ...',\r\n    backdropDismiss: true,\r\n    mode: 'md',\r\n    cssClass: 'GroupAction',\r\n    buttons: [{\r\n      text: 'Post',\r\n      icon: 'chatbubbles',\r\n      handler: () => {\r\n        this.newPost();\r\n      }\r\n    }, {\r\n      text: 'Resource',\r\n      icon: 'document',\r\n      handler: () => {\r\n        this.newResource();\r\n      }\r\n    }, {\r\n      text: 'Poll',\r\n      icon: 'podium',\r\n      handler: () => {\r\n        this.newPoll();\r\n      }\r\n    }, {\r\n      text: 'Event',\r\n      icon: 'calendar',\r\n      cssClass: 'cancelAction',\r\n      handler: () => {\r\n        this.newEvent();\r\n      }\r\n    }]\r\n  }).then(r => r.present());\r\n  }\r\n\r\n  submitReactionPost(post, reactionType) {\r\n    switch (reactionType) {\r\n      case 'Thanks': {\r\n        if (!post.showSmiley) {\r\n          this.addPostReaction(post, reactionType);\r\n          post.showSmiley = true;\r\n          post.totalReactionCount += 1;\r\n        } else {\r\n          this.removePostReaction(post, reactionType);\r\n          post.showSmiley = false;\r\n          post.totalReactionCount -= 1;\r\n        }\r\n        break;\r\n      }\r\n\r\n      case 'Hug': {\r\n        if (!post.showHug) {\r\n          this.addPostReaction(post, reactionType);\r\n          post.showHug = true;\r\n          post.totalReactionCount += 1;\r\n        } else {\r\n          this.removePostReaction(post, reactionType);\r\n          post.showHug = false;\r\n          post.totalReactionCount -= 1;\r\n        }\r\n        break;\r\n      }\r\n\r\n      case 'Checkin': {\r\n        if (!post.showCheckin) {\r\n          this.addPostReaction(post, reactionType);\r\n          post.showCheckin = true;\r\n          post.totalReactionCount += 1;\r\n        } else {\r\n          this.removePostReaction(post, reactionType);\r\n          post.showCheckin = false;\r\n          post.totalReactionCount -= 1;\r\n        }\r\n        break;\r\n      }\r\n\r\n      case 'Bookmark': {\r\n        if (!post.showBookmark) {\r\n          this.addPostReaction(post, reactionType);\r\n          post.showBookmark = true;\r\n          post.totalReactionCount += 1;\r\n        } else {\r\n          this.removePostReaction(post, reactionType);\r\n          post.showBookmark = false;\r\n          post.totalReactionCount -= 1;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  addPostReaction(post, reactionType) {\r\n    // first find the post in the collection\r\n    let postIndex: any;\r\n    let p: any;\r\n    if (post.type === 'general') {\r\n      postIndex = this.posts.findIndex(el => el.key ===  post.key);\r\n      p = this.posts[postIndex];\r\n    } else if (post.type === 'event') {\r\n      postIndex = this.events.findIndex(el => el.key ===  post.key);\r\n      p = this.events[postIndex];\r\n    } else if (post.type === 'poll') {\r\n      postIndex = this.polls.findIndex(el => el.key ===  post.key);\r\n      p = this.polls[postIndex];\r\n    } else if (post.type === 'resource') {\r\n      postIndex = this.resources.findIndex(el => el.key ===  post.key);\r\n      p = this.resources[postIndex];\r\n    }\r\n    this.dataProvider.getCurrentUser().get().subscribe((account: any) => {\r\n      if (account) {\r\n      let reaction = {\r\n        key: '',\r\n        dateCreated: new Date(),\r\n        addedByUser: {\r\n                      addedByKey: this.dataProvider.getCurrentUserId(),\r\n                      addedByUsername: account.data().username,\r\n                      addedByImg: account.data().img\r\n                    },\r\n        reactionType\r\n    };\r\n\r\n      if (postIndex >= 0) {\r\n      this.dataProvider.updatePostReactions(post.key, reaction);\r\n    }\r\n  }\r\n  });\r\n  }\r\n\r\n  removePostReaction(post, reactionType) {\r\n    let postIndex: any;\r\n    let p: any;\r\n    if (post.type === 'general') {\r\n      postIndex = this.posts.findIndex(el => el.key ===  post.key);\r\n      p = this.posts[postIndex];\r\n    } else if (post.type === 'event') {\r\n      postIndex = this.events.findIndex(el => el.key ===  post.key);\r\n      p = this.events[postIndex];\r\n    } else if (post.type === 'poll') {\r\n      postIndex = this.polls.findIndex(el => el.key ===  post.key);\r\n      p = this.polls[postIndex];\r\n    } else if (post.type === 'resource') {\r\n      postIndex = this.resources.findIndex(el => el.key ===  post.key);\r\n      p = this.resources[postIndex];\r\n    }\r\n\r\n    const found = false;\r\n    if (p.reactions !== undefined) {\r\n      let values = Object.keys(p.reactions).map(function(e) {\r\n        return p.reactions[e];\r\n      });\r\n\r\n      const reaction = post.reactions.find(\r\n        el => el.addedByUser.addedByKey === this.dataProvider.getCurrentUserId()\r\n        && el.reactionType === reactionType);\r\n\r\n      console.log('reaction.key', reaction);\r\n      this.dataProvider.removePostReaction(post.key, reaction.key);\r\n    }\r\n  }\r\n\r\n  async showReactionsList(post) {\r\n    if (post.totalReactionCount === 0) {\r\n      return;\r\n    }\r\n  // first find the post in the collection\r\n    let postIndex: any;\r\n    let p: any;\r\n    if (post.type === 'general') {\r\n      postIndex = this.posts.findIndex(el => el.key ===  post.key);\r\n      p = this.posts[postIndex];\r\n    } else if (post.type === 'event') {\r\n      postIndex = this.events.findIndex(el => el.key ===  post.key);\r\n      p = this.events[postIndex];\r\n    } else if (post.type === 'poll') {\r\n      postIndex = this.polls.findIndex(el => el.key ===  post.key);\r\n      p = this.polls[postIndex];\r\n    } else if (post.type === 'resource') {\r\n      postIndex = this.resources.findIndex(el => el.key ===  post.key);\r\n      p = this.resources[postIndex];\r\n    }\r\n\r\n    const modal = await this.modalCtrl.create({\r\n      component: ReactionListModalPage,\r\n      componentProps: {\r\n        reactions: p.reactions\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  showPostOptions(post) {\r\n    const action = this.actionSheet.create({\r\n      header: 'Post options',\r\n      backdropDismiss: true,\r\n      mode: 'md',\r\n      cssClass: 'GroupAction',\r\n      buttons: this.createPostOptionButtons(post)\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  followPost(post) {\r\n    if (!this.notifications) {\r\n      this.notifications = [post.key];\r\n    } else {\r\n      this.notifications.push(post.key);\r\n    }\r\n\r\n    this.dataProvider.getUser(this.loggedInUserId).update({\r\n      notifications: this.notifications\r\n    }).then(() => {\r\n      this.loadingProvider.showToast('You will be notified when there are new replies');\r\n    });\r\n  }\r\n\r\n  unFollowPost(post) {\r\n    const index = this.notifications.indexOf(post.key, 0);\r\n    if (index > -1) {\r\n      this.notifications.splice(index, 1);\r\n    }\r\n\r\n    this.dataProvider.getUser(this.loggedInUserId).update({\r\n      notifications: this.notifications\r\n    }).then(() => {\r\n      this.loadingProvider.showToast('You won\\'t get notifications for this post');\r\n    });\r\n  }\r\n\r\n  reportPost(post) {\r\n    this.dataProvider.addReports(this.loggedInUserId, post).then(() => {\r\n      this.loadingProvider.showToast('Thank you for reporting the post.');\r\n    });\r\n  }\r\n\r\n  deletePost(post) {\r\n    this.alertCtrl.create({\r\n      header: 'Delete Post',\r\n      message: 'Are you sure you want to delete this post?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel'\r\n        },\r\n        {\r\n          text: 'Yes',\r\n          handler: data => {\r\n            this.firestore.doc('posts/' + post.key).delete();\r\n          }\r\n        }\r\n      ]\r\n    }).then(r => r.present());\r\n  }\r\n\r\n  createPostOptionButtons(post) {\r\n    let buttons = [];\r\n    \r\n    let cancelButton = {\r\n      text: 'Cancel',\r\n      icon: 'close',\r\n      role: 'cancel',\r\n      handler: () => {\r\n        console.log('Cancel clicked');\r\n      }\r\n    };\r\n\r\n    let reportButton = {\r\n      text: 'Report Post',\r\n      icon: 'flag-outline',\r\n      handler: () => {\r\n        this.reportPost(post);\r\n      }\r\n      };\r\n    let notificationButton = {};\r\n\r\n    if (post.addedByUser.addedByKey === this.loggedInUserId) {\r\n      const deletePostButton = {\r\n        text: 'Delete Post',\r\n        icon: 'trash-outline',\r\n        cssClass: 'actionicon',\r\n        handler: () => {\r\n          this.deletePost(post);\r\n        }\r\n      };\r\n      buttons.push(deletePostButton);\r\n    } else {\r\n      if (this.notifications && this.notifications.some(el => el === post.key)) {\r\n        notificationButton = {\r\n            text: 'Turn Off Notifications',\r\n            icon: 'notifications-off-outline',\r\n            cssClass: 'actionicon',\r\n            handler: () => {\r\n              this.unFollowPost(post);\r\n            }\r\n          };\r\n      } else {\r\n        notificationButton = {\r\n          text: 'Turn On Notifications',\r\n          icon: 'notifications-outline',\r\n          cssClass: 'actionicon',\r\n          handler: () => {\r\n            this.followPost(post);\r\n          }\r\n        };\r\n      }\r\n      buttons.push(notificationButton);\r\n  }\r\n    buttons.push(reportButton);\r\n    buttons.push(cancelButton);\r\n    return buttons;\r\n  }\r\n\r\n  loadDataPosts(event) {\r\n    if ( this.posts.length > this.maxNoOfPosts ) {\r\n      event.target.disabled = true;\r\n    } else {\r\n      if (this.lastDataSetPost) {\r\n      this.nextDataSetPost = this.firestore.collection('posts').ref\r\n                          .where('groupId', '==', this.groupId)\r\n                          .where('type', '==', 'general')\r\n                          .orderBy('date', 'desc')\r\n                          .startAfter(this.lastDataSetPost).limit(5);\r\n      this.nextDataSetPost.onSnapshot((po: any) => {\r\n      this.lastDataSetPost = po.docs[po.docs.length - 1];\r\n      if (po.docs.length > 0) {\r\n        this.loadEachPostData(po);\r\n      }\r\n      event.target.complete();\r\n        });\r\n      } else {\r\n        event.target.complete();\r\n      }\r\n    }\r\n  }\r\n\r\n  loadDataPolls(event) {\r\n    if ( this.polls.length > this.maxNoOfPolls ) {\r\n      event.target.disabled = true;\r\n    } else {\r\n      if (this.lastDataSetPoll) {\r\n      this.nextDataSetPoll = this.firestore.collection('posts').ref\r\n                          .where('groupId', '==', this.groupId)\r\n                          .where('type', '==', 'poll')\r\n                          .orderBy('date', 'desc')\r\n                          .startAfter(this.lastDataSetPoll).limit(5);\r\n      this.nextDataSetPoll.onSnapshot((po: any) => {\r\n      this.lastDataSetPoll = po.docs[po.docs.length - 1];\r\n      if (po.docs.length > 0) {\r\n        this.loadEachPollData(po);\r\n      }\r\n      event.target.complete();\r\n        });\r\n      } else {\r\n        event.target.complete();\r\n      }\r\n    }\r\n  }\r\n\r\n  loadDataEvents(event) {\r\n    if ( this.events.length > this.maxNoOfEvents ) {\r\n      event.target.disabled = true;\r\n    } else {\r\n      if (this.lastDataSetEvent) {\r\n      this.nextDataSetEvent = this.firestore.collection('posts').ref\r\n                          .where('groupId', '==', this.groupId)\r\n                          .where('type', '==', 'event')\r\n                          .orderBy('date', 'desc')\r\n                          .startAfter(this.lastDataSetEvent).limit(5);\r\n      this.nextDataSetEvent.onSnapshot((po: any) => {\r\n      this.lastDataSetEvent = po.docs[po.docs.length - 1];\r\n      if (po.docs.length > 0) {\r\n        this.loadEachEventData(po);\r\n      }\r\n      event.target.complete();\r\n        });\r\n      } else {\r\n        event.target.complete();\r\n      }\r\n    }\r\n  }\r\n\r\n  loadDataResources(event) {\r\n    if ( this.events.length > this.maxNoOfResources ) {\r\n      event.target.disabled = true;\r\n    } else {\r\n      if (this.lastDataSetResources) {\r\n      this.nextDataSetResources = this.firestore.collection('posts').ref\r\n                          .where('groupId', '==', this.groupId)\r\n                          .where('type', '==', 'resource')\r\n                          .orderBy('date', 'desc')\r\n                          .startAfter(this.lastDataSetResources).limit(5);\r\n      this.nextDataSetResources.onSnapshot((po: any) => {\r\n      this.lastDataSetResources = po.docs[po.docs.length - 1];\r\n      if (po.docs.length > 0) {\r\n        this.loadEachResourceData(po);\r\n      }\r\n      event.target.complete();\r\n        });\r\n      } else {\r\n        event.target.complete();\r\n      }\r\n    }\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title (click)=\\\"groupInfo()\\\">{{title}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\"> \\r\\n      <ion-button *ngIf=\\\"loggedInUserIsMember == true\\\" (click)=\\\"showGroupOptions()\\\" ><ion-icon name=\\\"ellipsis-vertical\\\"></ion-icon></ion-button>\\r\\n   <ion-button *ngIf=\\\"loggedInUserIsMember == false\\\" (click)=\\\"joinGroup()\\\" >Join Group</ion-button>\\r\\n    <ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='posts'\\\" (click)=\\\"newPost()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\r\\n    <ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='polls'\\\" (click)=\\\"newPoll()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\r\\n\\t\\t<ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='resources'\\\" (click)=\\\"newResource()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\r\\n\\t\\t<ion-button *ngIf=\\\"loggedInUserIsMember == true && tab=='events'\\\" (click)=\\\"newEvent()\\\" ><ion-icon name=\\\"add-circle-outline\\\"></ion-icon></ion-button>\\r\\n\\t</ion-buttons>\\r\\n\\r\\n  </ion-toolbar>\\r\\n\\r\\n  <ion-segment value=\\\"posts\\\" color=\\\"secondary\\\" [(ngModel)]=\\\"tab\\\" (ionChange)=\\\"segmentChanged($event)\\\">\\r\\n\\t\\t<!-- <ion-segment-button value=\\\"group\\\">\\r\\n  \\t\\t\\t<ion-icon name=\\\"chatbubbles\\\"></ion-icon>\\r\\n    </ion-segment-button> -->\\r\\n\\t\\t<!-- <ion-segment-button value=\\\"groupInfo\\\">\\r\\n      <ion-icon name=\\\"ellipsis-vertical\\\"></ion-icon>\\r\\n\\t\\t</ion-segment-button> -->\\r\\n    <ion-segment-button value=\\\"posts\\\">\\r\\n      <ion-icon size=\\\"medium\\\" name=\\\"chatbubbles\\\"></ion-icon>\\r\\n      <!-- <span class=\\\"tab-title\\\">Posts</span> -->\\r\\n    </ion-segment-button>\\r\\n\\t\\t<ion-segment-button value=\\\"polls\\\">\\r\\n      <ion-icon size=\\\"medium\\\" name=\\\"podium\\\"></ion-icon>\\r\\n      <!-- <span class=\\\"tab-title\\\">Polls</span> -->\\r\\n\\t\\t</ion-segment-button>\\r\\n\\t\\t<ion-segment-button value=\\\"resources\\\">\\r\\n      <ion-icon size=\\\"medium\\\" name=\\\"library\\\"></ion-icon>\\r\\n      <!-- <span class=\\\"tab-title\\\">Resources</span> -->\\r\\n    </ion-segment-button>\\r\\n    <ion-segment-button value=\\\"events\\\">\\r\\n      <ion-icon size=\\\"medium\\\" name=\\\"calendar\\\"></ion-icon>\\r\\n      <!-- <span class=\\\"tab-title\\\">Events</span> -->\\r\\n    </ion-segment-button>\\r\\n</ion-segment>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen>\\r\\n  <div [ngSwitch]=\\\"tab\\\" >\\r\\n\\r\\n  <div *ngSwitchCase=\\\"'posts'\\\">\\r\\n    <!-- No Posts to show -->\\r\\n     <div class=\\\"empty-list\\\" *ngIf=\\\"posts && posts.length == 0\\\">\\r\\n     <h1><ion-icon name=\\\"chatbubbles-outline\\\"></ion-icon></h1>\\r\\n     <p>No new Posts added to this group.</p>\\r\\n     </div>\\r\\n     <!-- Show Posts -->\\r\\n     <div *ngIf=\\\"posts && posts.length > 0\\\" >\\r\\n     <div class=\\\"listing-item\\\" *ngFor=\\\"let item of posts\\\" >\\r\\n      <ion-card>\\r\\n        <ion-card-header>\\r\\n          <ion-row>\\r\\n            <ion-col size=10>\\r\\n           <ion-card-subtitle class=\\\"addedBy\\\">\\r\\n            <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\r\\n             <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\r\\n              <br/>\\r\\n             <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\r\\n            <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\r\\n          </ion-card-subtitle>\\r\\n        </ion-col>\\r\\n        <ion-col size=2>\\r\\n          <ion-buttons>\\r\\n            <ion-button (click)=\\\"showPostOptions(item)\\\">\\r\\n              <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\r\\n            </ion-button>\\r\\n          </ion-buttons>\\r\\n        </ion-col>\\r\\n        </ion-row>\\r\\n        </ion-card-header>\\r\\n        <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'general'\\\">\\r\\n          <div (click)=\\\"viewPost(item)\\\">\\r\\n            <div>\\r\\n              <ion-slides class=\\\"slider\\\" pager=\\\"true\\\" [options]=\\\"slideOptsOne\\\" #slideWithNav>\\r\\n              <ion-slide *ngFor=\\\"let s of item.postMedia\\\">\\r\\n                <div class=\\\"bgSizeContain\\\" \\r\\n                [ngStyle]=\\\"{'background-image':'url('+s+')'}\\\">\\r\\n              </div>\\r\\n              </ion-slide>\\r\\n            </ion-slides>\\r\\n            </div>\\r\\n          <ion-label><b>{{item.title}}.</b> {{item.data.message}} <br/></ion-label>\\r\\n        </div>\\r\\n          <div class=\\\"tags-wrapper\\\">\\r\\n          <ion-row>\\r\\n            <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\r\\n              <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\r\\n            </div>\\r\\n          </ion-row>\\r\\n          </div>\\r\\n          <div class=\\\"reactions\\\">\\r\\n          <ion-row >\\r\\n            <ion-col size=3>\\r\\n              <ion-buttons>\\r\\n                <ion-button (click)=\\\"submitReactionPost(item, 'Thanks')\\\">\\r\\n               <div *ngIf=\\\"item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/smile-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\r\\n               <div *ngIf=\\\"!item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/smile.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\r\\n              </ion-button>\\r\\n              </ion-buttons> \\r\\n            </ion-col>\\r\\n            <ion-col size=3>\\r\\n              <ion-buttons>\\r\\n                <ion-button (click)=\\\"submitReactionPost(item, 'Hug')\\\">\\r\\n               <div *ngIf=\\\"item.showHug\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/hug-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Hug</span></div> \\r\\n               <div *ngIf=\\\"!item.showHug\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/hug.svg\\\" ></ion-icon> <span class=\\\"text\\\">Hug</span></div> \\r\\n              </ion-button>\\r\\n              </ion-buttons> \\r\\n            </ion-col>\\r\\n            <ion-col size=2></ion-col>\\r\\n            <ion-col size=2>\\r\\n              <ion-buttons>\\r\\n                <ion-button (click)=\\\"showReactionsList(item)\\\">\\r\\n              <div><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/smile-active.svg\\\" class=\\\"icon\\\"></ion-icon><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/hug-active.svg\\\" class=\\\"icon\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReactionCount}}</span></div>\\r\\n            </ion-button>\\r\\n          </ion-buttons> \\r\\n            </ion-col>\\r\\n            <ion-col size=2>\\r\\n              <ion-buttons>\\r\\n                <ion-button>\\r\\n              <div><ion-icon size=\\\"small\\\" class=\\\"icon\\\" name=\\\"chatbox-outline\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReviewCount}}</span></div>\\r\\n            </ion-button>\\r\\n          </ion-buttons> \\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n          </div>\\r\\n        </ion-card-content>\\r\\n      </ion-card>\\r\\n    </div>\\r\\n     </div>\\r\\n    </div>\\r\\n     <div *ngSwitchCase=\\\"'polls'\\\">\\r\\n    <!-- No polls to show -->\\r\\n     <div class=\\\"empty-list\\\" *ngIf=\\\"polls && polls.length == 0\\\">\\r\\n     <h1><ion-icon name=\\\"md-chatbubbles\\\"></ion-icon></h1>\\r\\n     <p>No new polls yet.</p>\\r\\n     </div>\\r\\n     <!-- Show polls -->\\r\\n     <div *ngIf=\\\"polls && polls.length > 0\\\">\\r\\n      <div class=\\\"listing-item\\\" *ngFor=\\\"let item of polls\\\">\\r\\n     <ion-card>\\r\\n      <ion-card-header>\\r\\n        <ion-row>\\r\\n          <ion-col size=10>\\r\\n         <ion-card-subtitle class=\\\"addedBy\\\">\\r\\n          <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\r\\n           <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\r\\n            <br/>\\r\\n           <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\r\\n          <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\r\\n        </ion-card-subtitle>\\r\\n      </ion-col>\\r\\n      <ion-col size=2>\\r\\n        <ion-buttons>\\r\\n          <ion-button (click)=\\\"showPostOptions(item)\\\">\\r\\n            <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </ion-buttons>\\r\\n      </ion-col>\\r\\n      </ion-row>\\r\\n      </ion-card-header>\\r\\n\\r\\n      <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'poll'\\\" >\\r\\n        <div (click)=\\\"viewPoll(item)\\\">\\r\\n        <b>{{item.title}}.</b><br/>\\r\\n        <ion-row  *ngFor=\\\"let pollOption of item.data.pollOptions\\\">\\r\\n          <ion-col >\\r\\n             <div><ion-icon class=\\\"poll-icon\\\" name=\\\"checkbox-outline\\\"></ion-icon> <span>{{pollOption.name}}</span></div>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </div>\\r\\n      <div class=\\\"tags-wrapper\\\">\\r\\n        <ion-row>\\r\\n          <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\r\\n            <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\r\\n          </div>\\r\\n        </ion-row>\\r\\n        </div>\\r\\n\\r\\n              <ion-row class=\\\"info-row\\\" >\\r\\n         <ion-col size=\\\"8\\\">\\r\\n                   <span class=\\\"text\\\" *ngIf=\\\"!item.pollClosed\\\">Poll ends {{item.data.dateEnding.toDate() | DateFormat}}</span> \\r\\n                   <span class=\\\"text\\\" *ngIf=\\\"item.pollClosed\\\">Poll closed</span> \\r\\n                </ion-col>\\r\\n          <ion-col size=\\\"1\\\">\\r\\n          </ion-col>\\r\\n                <ion-col size=\\\"3\\\">\\r\\n                  <div><span class=\\\"text\\\">{{item.totalPollCount}} voted</span></div>\\r\\n                </ion-col>\\r\\n              </ion-row>\\r\\n      </ion-card-content>\\r\\n      </ion-card>\\r\\n   </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngSwitchCase=\\\"'resources'\\\">\\r\\n    <!-- No Resources to show -->\\r\\n     <div class=\\\"empty-list\\\" *ngIf=\\\"resources && resources.length == 0\\\">\\r\\n     <h1><ion-icon name=\\\"chatbubbles-outline\\\"></ion-icon></h1>\\r\\n     <p>No new Resources added to this group.</p>\\r\\n     </div>\\r\\n     <!-- Show Resources -->\\r\\n     <div *ngIf=\\\"resources && resources.length > 0\\\" >\\r\\n      <div class=\\\"listing-item\\\" *ngFor=\\\"let item of resources\\\">\\r\\n       <div>\\r\\n     <ion-card>\\r\\n      <ion-card-header>\\r\\n        <ion-row>\\r\\n          <ion-col size=10>\\r\\n         <ion-card-subtitle class=\\\"addedBy\\\">\\r\\n          <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\r\\n           <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\r\\n            <br/>\\r\\n           <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\r\\n          <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\r\\n        </ion-card-subtitle>\\r\\n      </ion-col>\\r\\n      <ion-col size=2>\\r\\n        <ion-buttons>\\r\\n          <ion-button (click)=\\\"showPostOptions(item)\\\">\\r\\n            <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n        </ion-buttons>\\r\\n      </ion-col>\\r\\n      </ion-row>\\r\\n      </ion-card-header>\\r\\n      <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'resource'\\\">\\r\\n        <div (click)=\\\"viewResource(item)\\\">\\r\\n        <b>{{item.title}}.</b><br/>\\r\\n        <div *ngIf=\\\"item?.data.type == 'contact'\\\">\\r\\n          {{item.data.name}}<br/>\\r\\n          {{item.data.address}}<br/><br/>\\r\\n          {{item.data.email}}<br/>\\r\\n          {{item.data.phones}}<br/>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"item?.data.type == 'upload'\\\">\\r\\n          <div *ngIf=\\\"item.data.uploadtype == 'location'\\\" [innerHtml]=\\\"item.data.url\\\"></div>\\r\\n          <div *ngIf=\\\"item.data.uploadtype == 'contact'\\\">\\r\\n          {{item.data.name}}<br/>\\r\\n          {{item.data.address}}<br/>\\r\\n          {{item.data.phones}}<br/>\\r\\n          {{item.data.email}}<br/>\\r\\n          </div>\\r\\n          <div *ngIf=\\\"item.data.uploadtype == 'image'\\\">\\r\\n          <img src=\\\"{{item.data.resolvedurl}}\\\" />\\r\\n          </div>\\r\\n          <div *ngIf=\\\"item.data.uploadtype == 'video'\\\">\\r\\n            <video controls width=\\\"100%\\\" src=\\\"{{item.data.resolvedurl}}\\\" ></video>\\r\\n          </div>\\r\\n        </div>\\r\\n        <div *ngIf=\\\"item?.data.type == 'weblink'\\\">\\r\\n        {{item.data.metatitle}}<br/>\\r\\n        <img [src]=\\\"item.data.metaicon\\\"/> \\r\\n        {{item.data.metadescription}}<br/><br/>\\r\\n        <a href=\\\"{{item.data.metasite}}\\\">{{item.data.metasite}}</a>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"tags-wrapper\\\">\\r\\n        <ion-row>\\r\\n          <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\r\\n            <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\r\\n          </div>\\r\\n        </ion-row>\\r\\n        </div>\\r\\n        <div class=\\\"reactions\\\">\\r\\n           <ion-row>\\r\\n            <ion-col size=3>\\r\\n              <ion-buttons>\\r\\n              <ion-button (click)=\\\"submitReactionPost(item, 'Thanks')\\\">\\r\\n             <div *ngIf=\\\"item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/smile-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\r\\n             <div *ngIf=\\\"!item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/smile.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\r\\n              </ion-button>\\r\\n              </ion-buttons> \\r\\n            </ion-col>\\r\\n            <ion-col size=3>\\r\\n                 <ion-buttons>\\r\\n                 <ion-button (click)=\\\"submitReactionPost(item, 'Bookmark')\\\">\\r\\n                <div *ngIf=\\\"item.showBookmark\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/bookmark-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Bookmark</span></div> \\r\\n                <div *ngIf=\\\"!item.showBookmark\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/bookmark.svg\\\" ></ion-icon> <span class=\\\"text\\\">Bookmark</span></div> \\r\\n                 </ion-button>\\r\\n                 </ion-buttons> \\r\\n            </ion-col>\\r\\n          <ion-col size=2></ion-col>\\r\\n          <ion-col size=2>\\r\\n                 <ion-buttons>\\r\\n                 <ion-button (click)=\\\"showReactionsList(item)\\\">\\r\\n                 <div><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/bookmark-active.svg\\\" class=\\\"icon\\\"></ion-icon><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/smile-active.svg\\\" class=\\\"icon\\\"></ion-icon><span class=\\\"text\\\">{{item.totalReactionCount}}</span></div>\\r\\n               </ion-button>\\r\\n               </ion-buttons> \\r\\n               </ion-col>\\r\\n               <ion-col size=2>\\r\\n                 <ion-buttons>\\r\\n                 <ion-button>\\r\\n                  <div><ion-icon size=\\\"small\\\" class=\\\"icon\\\" name=\\\"chatbox-outline\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReviewCount}}</span></div>\\r\\n                </ion-button>\\r\\n               </ion-buttons> \\r\\n               </ion-col>\\r\\n          </ion-row>\\r\\n        \\r\\n        </div>\\r\\n      </ion-card-content>\\r\\n        </ion-card>\\r\\n           </div>\\r\\n     </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div *ngSwitchCase=\\\"'events'\\\">\\r\\n      <!-- No Events to show -->\\r\\n       <div class=\\\"empty-list\\\" *ngIf=\\\"events && events.length == 0\\\">\\r\\n       <h1><ion-icon name=\\\"chatbubbles\\\"></ion-icon></h1>\\r\\n       <p>No new upcoming Events added to this group.</p>\\r\\n       </div>\\r\\n       <!-- Show Events -->\\r\\n       <div *ngIf=\\\"events && events.length > 0\\\" >\\r\\n        <div class=\\\"listing-item\\\" *ngFor=\\\"let item of events\\\">\\r\\n          <ion-card>\\r\\n            <ion-card-header>\\r\\n              <ion-row>\\r\\n                <ion-col size=10>\\r\\n               <ion-card-subtitle class=\\\"addedBy\\\">\\r\\n                <img class=\\\"addedByImg\\\" src=\\\"{{item.avatar}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\" /> \\r\\n                 <p><a class=\\\"addedByTitle\\\" (click)=\\\"viewUser(item.addedByUser.addedByKey)\\\" ><b>{{item.addedByUser.addedByUsername}}</b></a><!-- <img *ngIf=\\\"item.showNewIcon\\\" class=\\\"newIcon\\\" src=\\\"./assets/icon/new.svg\\\" />  -->\\r\\n                  <br/>\\r\\n                 <span class=\\\"addedByDate\\\">posted {{item.date.toDate() | DateFormat}}</span><br/>\\r\\n                <a (click)=\\\"viewGroup(item.groupId)\\\" class=\\\"addedByTitle\\\">in <b>{{item.groupName}}</b></a></p>\\r\\n              </ion-card-subtitle>\\r\\n            </ion-col>\\r\\n            <ion-col size=2>\\r\\n              <ion-buttons>\\r\\n                <ion-button (click)=\\\"showPostOptions(item)\\\">\\r\\n                  <ion-icon slot=\\\"end\\\" name=\\\"chevron-down-outline\\\"></ion-icon>\\r\\n                </ion-button>\\r\\n              </ion-buttons>\\r\\n            </ion-col>\\r\\n            </ion-row>\\r\\n            </ion-card-header>\\r\\n            <ion-card-content class=\\\"message\\\" *ngIf=\\\"item.type === 'event'\\\">\\r\\n              <div (click)=\\\"viewEvent(item)\\\">\\r\\n              <b>{{item.title}}.</b> <br/>{{item.data.eventDate}} at {{item.data.eventTime}}<br/><br/>\\r\\n                {{item.data.address}}<br/><br/>\\r\\n                {{item.data.link}}\\r\\n              </div>\\r\\n              <div class=\\\"tags-wrapper\\\">\\r\\n                <ion-row>\\r\\n                  <div class=\\\"tags\\\" *ngFor=\\\"let tag of item.postTags\\\">\\r\\n                    <span class=\\\"item-rating\\\">#{{tag.val}}</span>\\r\\n                  </div>\\r\\n                </ion-row>\\r\\n                </div>\\r\\n              <div class=\\\"reactions\\\">\\r\\n                <ion-row>\\r\\n                  <ion-col size=3>\\r\\n                    <ion-buttons>\\r\\n                      <ion-button (click)=\\\"submitReactionPost(item, 'Thanks')\\\">\\r\\n                      <div *ngIf=\\\"item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/smile-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\r\\n                      <div *ngIf=\\\"!item.showSmiley\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/smile.svg\\\" ></ion-icon> <span class=\\\"text\\\">Thanks</span></div> \\r\\n                    </ion-button>\\r\\n                    </ion-buttons> \\r\\n                  </ion-col>\\r\\n                  <ion-col size=3>\\r\\n                    <ion-buttons>\\r\\n                      <ion-button (click)=\\\"submitReactionPost(item, 'Checkin')\\\">\\r\\n                      <div *ngIf=\\\"item.showCheckin\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\" src=\\\"./assets/icon/checkin-active.svg\\\" ></ion-icon> <span class=\\\"text\\\">Checkin</span></div> \\r\\n                      <div *ngIf=\\\"!item.showCheckin\\\"><ion-icon size=\\\"small\\\" class=\\\"icon\\\"  src=\\\"./assets/icon/checkin.svg\\\" ></ion-icon> <span class=\\\"text\\\">Checkin</span></div> \\r\\n                    </ion-button>\\r\\n                    </ion-buttons> \\r\\n                  </ion-col>\\r\\n                  <ion-col size=2></ion-col>\\r\\n                  <ion-col size=2>\\r\\n                          <ion-buttons>\\r\\n                            <ion-button (click)=\\\"showReactionsList(item)\\\">\\r\\n                          <div><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/smile-active.svg\\\" class=\\\"icon\\\"></ion-icon><ion-icon size=\\\"small\\\" src=\\\"./assets/icon/checkin-active.svg\\\" class=\\\"icon\\\"></ion-icon><span class=\\\"text\\\">{{item.totalReactionCount}}</span></div>\\r\\n                        </ion-button>\\r\\n                      </ion-buttons> \\r\\n                  </ion-col>\\r\\n                  <ion-col size=2>\\r\\n                          <ion-buttons>\\r\\n                            <ion-button>\\r\\n                              <div><ion-icon size=\\\"small\\\" class=\\\"icon\\\" name=\\\"chatbox-outline\\\"></ion-icon> <span class=\\\"text\\\">{{item.totalReviewCount}}</span></div>\\r\\n                            </ion-button>\\r\\n                      </ion-buttons> \\r\\n                  </ion-col>\\r\\n                 </ion-row>\\r\\n             </div>\\r\\n            </ion-card-content>\\r\\n        </ion-card>\\r\\n        </div>\\r\\n       </div>\\r\\n      </div>\\r\\n      <!-- Group Info -->\\r\\n <div  class=\\\"group-info\\\" *ngSwitchCase=\\\"'groupInfo'\\\">\\r\\n  <div>\\r\\n\\r\\n    <div class=\\\"group-img\\\">\\r\\n      <img src=\\\"{{group.img}}\\\">\\r\\n    </div>\\r\\n    <div class=\\\"group-name\\\">    \\r\\n      {{group.name}}\\r\\n    </div>\\r\\n    <div class=\\\"group-desc\\\">\\r\\n      {{group.description}}\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\\\"group-name\\\"> \\r\\nGroup Tags\\r\\n</div>\\r\\n<div class=\\\"group-tags\\\">\\r\\n  <ion-row>\\r\\n    <div class=\\\"tags\\\" *ngFor=\\\"let tag of group.groupTags\\\">\\r\\n      <span class=\\\"item-rating\\\" [attr.ratingBase]=\\\"1\\\">#{{tag}}</span>\\r\\n    </div>\\r\\n  </ion-row>\\r\\n</div>\\r\\n<div class=\\\"group-name\\\"> \\r\\n  Group Members ({{groupMembers.length}})\\r\\n  </div>\\r\\n   <ion-list *ngIf=\\\"groupMembers\\\">\\r\\n    <!-- <ion-item (click)=\\\"addMembers()\\\">\\r\\n     <ion-icon name=\\\"add\\\" item-left></ion-icon>\\r\\n     <h2>Add Members</h2>\\r\\n     </ion-item>-->\\r\\n     <ion-item *ngFor=\\\"let member of groupMembers\\\" (click)=\\\"viewUser(member.$key)\\\">\\r\\n     <ion-avatar>\\r\\n       <img src=\\\"{{member.img}}\\\" onError=\\\"this.src='./assets/images/default-dp.png'\\\"/>\\r\\n     </ion-avatar>\\r\\n     <ion-label class=\\\"group-member-name\\\">{{member.name}}</ion-label>\\r\\n     <p>{{member.description}}</p>\\r\\n     </ion-item>\\r\\n   </ion-list>\\r\\n   <ion-list-header *ngIf=\\\"loggedInUserIsMember == true\\\" >\\r\\n     More\\r\\n   </ion-list-header>\\r\\n   <ion-list *ngIf=\\\"loggedInUserIsMember == true\\\"  style=\\\"text-align: center;\\\">  \\r\\n     <ion-item no-lines tappable (click)=\\\"leaveGroup()\\\" *ngIf=\\\"groupMembers && groupMembers.length > 1\\\">\\r\\n     Leave Group\\r\\n     </ion-item>\\r\\n     <!-- When there's only one member left, allow deleting of group. -->\\r\\n     <ion-item color=\\\"danger\\\" no-lines tappable (click)=\\\"deleteGroup()\\\" *ngIf=\\\"groupMembers && groupMembers.length <= 1\\\">\\r\\n     Delete Group\\r\\n     </ion-item>\\r\\n   </ion-list>\\r\\n   <p padding style=\\\"color:#aaa\\\">Started {{group.dateCreated | DateFormat}}</p>\\r\\n   </div>\\r\\n  </div>\\r\\n\\r\\n  <ion-infinite-scroll *ngIf=\\\"tab=='posts'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataPosts($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"Loading more data...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n  <ion-infinite-scroll *ngIf=\\\"tab=='events'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataEvents($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"Loading more data...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n  <ion-infinite-scroll *ngIf=\\\"tab=='polls'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataPolls($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"Loading more data...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n  <ion-infinite-scroll *ngIf=\\\"tab=='resources'\\\" threshold=\\\"100px\\\" (ionInfinite)=\\\"loadDataResources($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"bubbles\\\"\\r\\n      loadingText=\\\"Loading more data...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n\";"]}